import{r as du,a as I,g as gu,T as hl,S as pu,F as ar,d as ll,D as mu,B as As,b as bu,C as vu,t as bo,c as xu}from"./antd-BCQ8G-lJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var Sn={exports:{}},pi={};var vo;function wu(){if(vo)return pi;vo=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,n,r){var o=null;if(r!==void 0&&(o=""+r),n.key!==void 0&&(o=""+n.key),"key"in n){r={};for(var a in n)a!=="key"&&(r[a]=n[a])}else r=n;return n=r.ref,{$$typeof:i,type:s,key:o,ref:n!==void 0?n:null,props:r}}return pi.Fragment=t,pi.jsx=e,pi.jsxs=e,pi}var xo;function _u(){return xo||(xo=1,Sn.exports=wu()),Sn.exports}var M=_u(),ys={exports:{}},yu=ys.exports,wo;function Mu(){return wo||(wo=1,(function(i,t){(function(e,s){i.exports=s(du())})(yu,(function(e){function s(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var n=s(e),r={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,a){return a==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,a){var h=100*o+a;return h<600?"凌晨":h<900?"早上":h<1100?"上午":h<1300?"中午":h<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}))})(ys)),ys.exports}Mu();function Su(i){if(i.sheet)return i.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===i)return document.styleSheets[t]}function Pu(i){var t=document.createElement("style");return t.setAttribute("data-emotion",i.key),i.nonce!==void 0&&t.setAttribute("nonce",i.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Cu=(function(){function i(e){var s=this;this._insertTag=function(n){var r;s.tags.length===0?s.insertionPoint?r=s.insertionPoint.nextSibling:s.prepend?r=s.container.firstChild:r=s.before:r=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(n,r),s.tags.push(n)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=i.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Pu(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=Su(n);try{r.insertRule(s,r.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var n;return(n=s.parentNode)==null?void 0:n.removeChild(s)}),this.tags=[],this.ctr=0},i})(),bt="-ms-",Ds="-moz-",H="-webkit-",cl="comm",Or="rule",Fr="decl",ku="@import",ul="@keyframes",Eu="@layer",Lu=Math.abs,nn=String.fromCharCode,Tu=Object.assign;function Ru(i,t){return gt(i,0)^45?(((t<<2^gt(i,0))<<2^gt(i,1))<<2^gt(i,2))<<2^gt(i,3):0}function fl(i){return i.trim()}function Nu(i,t){return(i=t.exec(i))?i[0]:i}function $(i,t,e){return i.replace(t,e)}function hr(i,t){return i.indexOf(t)}function gt(i,t){return i.charCodeAt(t)|0}function Ii(i,t,e){return i.slice(t,e)}function jt(i){return i.length}function Ir(i){return i.length}function ts(i,t){return t.push(i),i}function Au(i,t){return i.map(t).join("")}var rn=1,ii=1,dl=0,kt=0,ht=0,fi="";function on(i,t,e,s,n,r,o){return{value:i,root:t,parent:e,type:s,props:n,children:r,line:rn,column:ii,length:o,return:""}}function mi(i,t){return Tu(on("",null,null,"",null,null,0),i,{length:-i.length},t)}function Du(){return ht}function Ou(){return ht=kt>0?gt(fi,--kt):0,ii--,ht===10&&(ii=1,rn--),ht}function Rt(){return ht=kt<dl?gt(fi,kt++):0,ii++,ht===10&&(ii=1,rn++),ht}function Ht(){return gt(fi,kt)}function Ms(){return kt}function Gi(i,t){return Ii(fi,i,t)}function zi(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gl(i){return rn=ii=1,dl=jt(fi=i),kt=0,[]}function pl(i){return fi="",i}function Ss(i){return fl(Gi(kt-1,lr(i===91?i+2:i===40?i+1:i)))}function Fu(i){for(;(ht=Ht())&&ht<33;)Rt();return zi(i)>2||zi(ht)>3?"":" "}function Iu(i,t){for(;--t&&Rt()&&!(ht<48||ht>102||ht>57&&ht<65||ht>70&&ht<97););return Gi(i,Ms()+(t<6&&Ht()==32&&Rt()==32))}function lr(i){for(;Rt();)switch(ht){case i:return kt;case 34:case 39:i!==34&&i!==39&&lr(ht);break;case 40:i===41&&lr(i);break;case 92:Rt();break}return kt}function zu(i,t){for(;Rt()&&i+ht!==57;)if(i+ht===84&&Ht()===47)break;return"/*"+Gi(t,kt-1)+"*"+nn(i===47?i:Rt())}function Bu(i){for(;!zi(Ht());)Rt();return Gi(i,kt)}function ju(i){return pl(Ps("",null,null,null,[""],i=gl(i),0,[0],i))}function Ps(i,t,e,s,n,r,o,a,h){for(var l=0,c=0,u=o,f=0,d=0,g=0,p=1,m=1,b=1,v=0,x="",w=n,_=r,S=s,y=x;m;)switch(g=v,v=Rt()){case 40:if(g!=108&&gt(y,u-1)==58){hr(y+=$(Ss(v),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:y+=Ss(v);break;case 9:case 10:case 13:case 32:y+=Fu(g);break;case 92:y+=Iu(Ms()-1,7);continue;case 47:switch(Ht()){case 42:case 47:ts(Vu(zu(Rt(),Ms()),t,e),h);break;default:y+="/"}break;case 123*p:a[l++]=jt(y)*b;case 125*p:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:b==-1&&(y=$(y,/\f/g,"")),d>0&&jt(y)-u&&ts(d>32?yo(y+";",s,e,u-1):yo($(y," ","")+";",s,e,u-2),h);break;case 59:y+=";";default:if(ts(S=_o(y,t,e,l,c,n,a,x,w=[],_=[],u),r),v===123)if(c===0)Ps(y,t,S,S,w,r,u,a,_);else switch(f===99&&gt(y,3)===110?100:f){case 100:case 108:case 109:case 115:Ps(i,S,S,s&&ts(_o(i,S,S,0,0,n,a,x,n,w=[],u),_),n,_,u,a,s?w:_);break;default:Ps(y,S,S,S,[""],_,0,a,_)}}l=c=d=0,p=b=1,x=y="",u=o;break;case 58:u=1+jt(y),d=g;default:if(p<1){if(v==123)--p;else if(v==125&&p++==0&&Ou()==125)continue}switch(y+=nn(v),v*p){case 38:b=c>0?1:(y+="\f",-1);break;case 44:a[l++]=(jt(y)-1)*b,b=1;break;case 64:Ht()===45&&(y+=Ss(Rt())),f=Ht(),c=u=jt(x=y+=Bu(Ms())),v++;break;case 45:g===45&&jt(y)==2&&(p=0)}}return r}function _o(i,t,e,s,n,r,o,a,h,l,c){for(var u=n-1,f=n===0?r:[""],d=Ir(f),g=0,p=0,m=0;g<s;++g)for(var b=0,v=Ii(i,u+1,u=Lu(p=o[g])),x=i;b<d;++b)(x=fl(p>0?f[b]+" "+v:$(v,/&\f/g,f[b])))&&(h[m++]=x);return on(i,t,e,n===0?Or:a,h,l,c)}function Vu(i,t,e){return on(i,t,e,cl,nn(Du()),Ii(i,2,-2),0)}function yo(i,t,e,s){return on(i,t,e,Fr,Ii(i,0,s),Ii(i,s+1,-1),s)}function Ze(i,t){for(var e="",s=Ir(i),n=0;n<s;n++)e+=t(i[n],n,i,t)||"";return e}function Wu(i,t,e,s){switch(i.type){case Eu:if(i.children.length)break;case ku:case Fr:return i.return=i.return||i.value;case cl:return"";case ul:return i.return=i.value+"{"+Ze(i.children,s)+"}";case Or:i.value=i.props.join(",")}return jt(e=Ze(i.children,s))?i.return=i.value+"{"+e+"}":""}function Hu(i){var t=Ir(i);return function(e,s,n,r){for(var o="",a=0;a<t;a++)o+=i[a](e,s,n,r)||"";return o}}function $u(i){return function(t){t.root||(t=t.return)&&i(t)}}function Yu(i){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=i(e)),t[e]}}var Uu=function(t,e,s){for(var n=0,r=0;n=r,r=Ht(),n===38&&r===12&&(e[s]=1),!zi(r);)Rt();return Gi(t,kt)},Ku=function(t,e){var s=-1,n=44;do switch(zi(n)){case 0:n===38&&Ht()===12&&(e[s]=1),t[s]+=Uu(kt-1,e,s);break;case 2:t[s]+=Ss(n);break;case 4:if(n===44){t[++s]=Ht()===58?"&\f":"",e[s]=t[s].length;break}default:t[s]+=nn(n)}while(n=Rt());return t},Xu=function(t,e){return pl(Ku(gl(t),e))},Mo=new WeakMap,Gu=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,s=t.parent,n=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!Mo.get(s))&&!n){Mo.set(t,!0);for(var r=[],o=Xu(e,r),a=s.props,h=0,l=0;h<o.length;h++)for(var c=0;c<a.length;c++,l++)t.props[l]=r[h]?o[h].replace(/&\f/g,a[c]):a[c]+" "+o[h]}}},Ju=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function ml(i,t){switch(Ru(i,t)){case 5103:return H+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return H+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return H+i+Ds+i+bt+i+i;case 6828:case 4268:return H+i+bt+i+i;case 6165:return H+i+bt+"flex-"+i+i;case 5187:return H+i+$(i,/(\w+).+(:[^]+)/,H+"box-$1$2"+bt+"flex-$1$2")+i;case 5443:return H+i+bt+"flex-item-"+$(i,/flex-|-self/,"")+i;case 4675:return H+i+bt+"flex-line-pack"+$(i,/align-content|flex-|-self/,"")+i;case 5548:return H+i+bt+$(i,"shrink","negative")+i;case 5292:return H+i+bt+$(i,"basis","preferred-size")+i;case 6060:return H+"box-"+$(i,"-grow","")+H+i+bt+$(i,"grow","positive")+i;case 4554:return H+$(i,/([^-])(transform)/g,"$1"+H+"$2")+i;case 6187:return $($($(i,/(zoom-|grab)/,H+"$1"),/(image-set)/,H+"$1"),i,"")+i;case 5495:case 3959:return $(i,/(image-set\([^]*)/,H+"$1$`$1");case 4968:return $($(i,/(.+:)(flex-)?(.*)/,H+"box-pack:$3"+bt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+H+i+i;case 4095:case 3583:case 4068:case 2532:return $(i,/(.+)-inline(.+)/,H+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jt(i)-1-t>6)switch(gt(i,t+1)){case 109:if(gt(i,t+4)!==45)break;case 102:return $(i,/(.+:)(.+)-([^]+)/,"$1"+H+"$2-$3$1"+Ds+(gt(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~hr(i,"stretch")?ml($(i,"stretch","fill-available"),t)+i:i}break;case 4949:if(gt(i,t+1)!==115)break;case 6444:switch(gt(i,jt(i)-3-(~hr(i,"!important")&&10))){case 107:return $(i,":",":"+H)+i;case 101:return $(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+H+(gt(i,14)===45?"inline-":"")+"box$3$1"+H+"$2$3$1"+bt+"$2box$3")+i}break;case 5936:switch(gt(i,t+11)){case 114:return H+i+bt+$(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return H+i+bt+$(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return H+i+bt+$(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return H+i+bt+i+i}return i}var qu=function(t,e,s,n){if(t.length>-1&&!t.return)switch(t.type){case Fr:t.return=ml(t.value,t.length);break;case ul:return Ze([mi(t,{value:$(t.value,"@","@"+H)})],n);case Or:if(t.length)return Au(t.props,function(r){switch(Nu(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ze([mi(t,{props:[$(r,/:(read-\w+)/,":"+Ds+"$1")]})],n);case"::placeholder":return Ze([mi(t,{props:[$(r,/:(plac\w+)/,":"+H+"input-$1")]}),mi(t,{props:[$(r,/:(plac\w+)/,":"+Ds+"$1")]}),mi(t,{props:[$(r,/:(plac\w+)/,bt+"input-$1")]})],n)}return""})}},Qu=[qu],Zu=function(t){var e=t.key;if(e==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(p){var m=p.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var n=t.stylisPlugins||Qu,r={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(p){for(var m=p.getAttribute("data-emotion").split(" "),b=1;b<m.length;b++)r[m[b]]=!0;a.push(p)});var h,l=[Gu,Ju];{var c,u=[Wu,$u(function(p){c.insert(p)})],f=Hu(l.concat(n,u)),d=function(m){return Ze(ju(m),f)};h=function(m,b,v,x){c=v,d(m?m+"{"+b.styles+"}":b.styles),x&&(g.inserted[b.name]=!0)}}var g={key:e,sheet:new Cu({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:h};return g.sheet.hydrate(a),g};function tf(i){for(var t=0,e,s=0,n=i.length;n>=4;++s,n-=4)e=i.charCodeAt(s)&255|(i.charCodeAt(++s)&255)<<8|(i.charCodeAt(++s)&255)<<16|(i.charCodeAt(++s)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(i.charCodeAt(s+2)&255)<<16;case 2:t^=(i.charCodeAt(s+1)&255)<<8;case 1:t^=i.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ef={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sf=/[A-Z]|^ms/g,nf=/_EMO_([^_]+?)_([^]*?)_EMO_/g,bl=function(t){return t.charCodeAt(1)===45},So=function(t){return t!=null&&typeof t!="boolean"},Pn=Yu(function(i){return bl(i)?i:i.replace(sf,"-$&").toLowerCase()}),Po=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(nf,function(s,n,r){return oe={name:n,styles:r,next:oe},n})}return ef[t]!==1&&!bl(t)&&typeof e=="number"&&e!==0?e+"px":e};function Os(i,t,e){if(e==null)return"";var s=e;if(s.__emotion_styles!==void 0)return s;switch(typeof e){case"boolean":return"";case"object":{var n=e;if(n.anim===1)return oe={name:n.name,styles:n.styles,next:oe},n.name;var r=e;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)oe={name:o.name,styles:o.styles,next:oe},o=o.next;var a=r.styles+";";return a}return rf(i,t,e)}}var h=e;if(t==null)return h;var l=t[h];return l!==void 0?l:h}function rf(i,t,e){var s="";if(Array.isArray(e))for(var n=0;n<e.length;n++)s+=Os(i,t,e[n])+";";else for(var r in e){var o=e[r];if(typeof o!="object"){var a=o;t!=null&&t[a]!==void 0?s+=r+"{"+t[a]+"}":So(a)&&(s+=Pn(r)+":"+Po(r,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var h=0;h<o.length;h++)So(o[h])&&(s+=Pn(r)+":"+Po(r,o[h])+";");else{var l=Os(i,t,o);switch(r){case"animation":case"animationName":{s+=Pn(r)+":"+l+";";break}default:s+=r+"{"+l+"}"}}}return s}var Co=/label:\s*([^\s;{]+)\s*(;|$)/g,oe;function Cn(i,t,e){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var s=!0,n="";oe=void 0;var r=i[0];if(r==null||r.raw===void 0)s=!1,n+=Os(e,t,r);else{var o=r;n+=o[0]}for(var a=1;a<i.length;a++)if(n+=Os(e,t,i[a]),s){var h=r;n+=h[a]}Co.lastIndex=0;for(var l="",c;(c=Co.exec(n))!==null;)l+="-"+c[1];var u=tf(n)+l;return{name:u,styles:n,next:oe}}function vl(i,t,e){var s="";return e.split(" ").forEach(function(n){i[n]!==void 0?t.push(i[n]+";"):n&&(s+=n+" ")}),s}var of=function(t,e,s){var n=t.key+"-"+e.name;t.registered[n]===void 0&&(t.registered[n]=e.styles)},af=function(t,e,s){of(t,e);var n=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var r=e;do t.insert(e===r?"."+n:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function ko(i,t){if(i.inserted[t.name]===void 0)return i.insert("",t,i.sheet,!0)}function Eo(i,t,e){var s=[],n=vl(i,s,e);return s.length<2?e:n+t(s)}var hf=function(t){var e=Zu(t);e.sheet.speedy=function(a){this.isSpeedy=a},e.compat=!0;var s=function(){for(var h=arguments.length,l=new Array(h),c=0;c<h;c++)l[c]=arguments[c];var u=Cn(l,e.registered,void 0);return af(e,u),e.key+"-"+u.name},n=function(){for(var h=arguments.length,l=new Array(h),c=0;c<h;c++)l[c]=arguments[c];var u=Cn(l,e.registered),f="animation-"+u.name;return ko(e,{name:u.name,styles:"@keyframes "+f+"{"+u.styles+"}"}),f},r=function(){for(var h=arguments.length,l=new Array(h),c=0;c<h;c++)l[c]=arguments[c];var u=Cn(l,e.registered);ko(e,u)},o=function(){for(var h=arguments.length,l=new Array(h),c=0;c<h;c++)l[c]=arguments[c];return Eo(e.registered,s,lf(l))};return{css:s,cx:o,injectGlobal:r,keyframes:n,hydrate:function(h){h.forEach(function(l){e.inserted[l]=!0})},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:vl.bind(null,e.registered),merge:Eo.bind(null,e.registered,s)}},lf=function i(t){for(var e="",s=0;s<t.length;s++){var n=t[s];if(n!=null){var r=void 0;switch(typeof n){case"boolean":break;case"object":{if(Array.isArray(n))r=i(n);else{r="";for(var o in n)n[o]&&o&&(r&&(r+=" "),r+=o)}break}default:r=n}r&&(e&&(e+=" "),e+=r)}}return e},xl=hf({key:"css"}),it=xl.cx,st=xl.css;const cf=Symbol(),zr=Symbol(),Mi="a",wl="f",Lo="p",_l="c",yl="t",Br="h",Ei="w",jr="o",Vr="k";let uf=(i,t)=>new Proxy(i,t);const cr=Object.getPrototypeOf,ur=new WeakMap,Ml=i=>i&&(ur.has(i)?ur.get(i):cr(i)===Object.prototype||cr(i)===Array.prototype),Fs=i=>typeof i=="object"&&i!==null,ff=i=>Object.values(Object.getOwnPropertyDescriptors(i)).some(t=>!t.configurable&&!t.writable),df=i=>{if(Array.isArray(i))return Array.from(i);const t=Object.getOwnPropertyDescriptors(i);return Object.values(t).forEach(e=>{e.configurable=!0}),Object.create(cr(i),t)},gf=(i,t)=>{const e={[wl]:t};let s=!1;const n=(a,h)=>{if(!s){let l=e[Mi].get(i);if(l||(l={},e[Mi].set(i,l)),a===Ei)l[Ei]=!0;else{let c=l[a];c||(c=new Set,l[a]=c),c.add(h)}}},r=()=>{s=!0,e[Mi].delete(i)},o={get(a,h){return h===zr?i:(n(Vr,h),Sl(Reflect.get(a,h),e[Mi],e[_l],e[yl]))},has(a,h){return h===cf?(r(),!0):(n(Br,h),Reflect.has(a,h))},getOwnPropertyDescriptor(a,h){return n(jr,h),Reflect.getOwnPropertyDescriptor(a,h)},ownKeys(a){return n(Ei),Reflect.ownKeys(a)}};return t&&(o.set=o.deleteProperty=()=>!1),[o,e]},Wr=i=>i[zr]||i,Sl=(i,t,e,s)=>{if(!Ml(i))return i;let n=s&&s.get(i);if(!n){const h=Wr(i);ff(h)?n=[h,df(h)]:n=[h],s?.set(i,n)}const[r,o]=n;let a=e&&e.get(r);return(!a||a[1][wl]!==!!o)&&(a=gf(r,!!o),a[1][Lo]=uf(o||r,a[0]),e&&e.set(r,a)),a[1][Mi]=t,a[1][_l]=e,a[1][yl]=s,a[1][Lo]},pf=(i,t)=>{const e=Reflect.ownKeys(i),s=Reflect.ownKeys(t);return e.length!==s.length||e.some((n,r)=>n!==s[r])},Pl=(i,t,e,s,n=Object.is)=>{if(n(i,t))return!1;if(!Fs(i)||!Fs(t))return!0;const r=e.get(Wr(i));if(!r)return!0;if(s){if(s.get(i)===t)return!1;s.set(i,t)}let o=null;for(const a of r[Br]||[])if(o=Reflect.has(i,a)!==Reflect.has(t,a),o)return o;if(r[Ei]===!0){if(o=pf(i,t),o)return o}else for(const a of r[jr]||[]){const h=!!Reflect.getOwnPropertyDescriptor(i,a),l=!!Reflect.getOwnPropertyDescriptor(t,a);if(o=h!==l,o)return o}for(const a of r[Vr]||[])if(o=Pl(i[a],t[a],e,s,n),o)return o;if(o===null)throw new Error("invalid used");return o},mf=i=>Ml(i)&&i[zr]||null,To=(i,t=!0)=>{ur.set(i,t)},bf=(i,t,e)=>{const s=[],n=new WeakSet,r=(o,a)=>{var h,l,c;if(n.has(o))return;Fs(o)&&n.add(o);const u=Fs(o)&&t.get(Wr(o));if(u){if((h=u[Br])===null||h===void 0||h.forEach(f=>{const d=`:has(${String(f)})`;s.push(a?[...a,d]:[d])}),u[Ei]===!0){const f=":ownKeys";s.push(a?[...a,f]:[f])}else(l=u[jr])===null||l===void 0||l.forEach(f=>{const d=`:hasOwn(${String(f)})`;s.push(a?[...a,d]:[d])});(c=u[Vr])===null||c===void 0||c.forEach(f=>{"value"in(Object.getOwnPropertyDescriptor(o,f)||{})&&r(o[f],a?[...a,f]:[f])})}else a&&s.push(a)};return r(i),s},Is={},Hr=i=>typeof i=="object"&&i!==null,vf=i=>Hr(i)&&!$r.has(i)&&(Array.isArray(i)||!(Symbol.iterator in i))&&!(i instanceof WeakMap)&&!(i instanceof WeakSet)&&!(i instanceof Error)&&!(i instanceof Number)&&!(i instanceof Date)&&!(i instanceof String)&&!(i instanceof RegExp)&&!(i instanceof ArrayBuffer)&&!(i instanceof Promise),Cl=(i,t)=>{const e=Ro.get(i);if(e?.[0]===t)return e[1];const s=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i));return To(s,!0),Ro.set(i,[t,s]),Reflect.ownKeys(i).forEach(n=>{if(Object.getOwnPropertyDescriptor(s,n))return;const r=Reflect.get(i,n),{enumerable:o}=Reflect.getOwnPropertyDescriptor(i,n),a={value:r,enumerable:o,configurable:!0};if($r.has(r))To(r,!1);else if(Oe.has(r)){const[h,l]=Oe.get(r);a.value=Cl(h,l())}Object.defineProperty(s,n,a)}),Object.preventExtensions(s)},xf=(i,t,e,s)=>({deleteProperty(n,r){Reflect.get(n,r),e(r);const o=Reflect.deleteProperty(n,r);return o&&s(void 0),o},set(n,r,o,a){const h=!i()&&Reflect.has(n,r),l=Reflect.get(n,r,a);if(h&&(No(l,o)||zs.has(o)&&No(l,zs.get(o))))return!0;e(r),Hr(o)&&(o=mf(o)||o);const c=!Oe.has(o)&&_f(o)?kl(o):o;return t(r,c),Reflect.set(n,r,c,a),s(void 0),!0}}),Oe=new WeakMap,$r=new WeakSet,Ro=new WeakMap,kn=[1],zs=new WeakMap;let No=Object.is,wf=(i,t)=>new Proxy(i,t),_f=vf,yf=Cl,Mf=xf;function kl(i={}){if(!Hr(i))throw new Error("object required");const t=zs.get(i);if(t)return t;let e=kn[0];const s=new Set,n=(m,b=++kn[0])=>{e!==b&&(r=e=b,s.forEach(v=>v(m,b)))};let r=e;const o=(m=kn[0])=>(r!==m&&(r=m,h.forEach(([b])=>{const v=b[1](m);v>e&&(e=v)})),e),a=m=>(b,v)=>{let x;b&&(x=[...b],x[1]=[m,...x[1]]),n(x,v)},h=new Map,l=(m,b)=>{const v=!$r.has(b)&&Oe.get(b);if(v){if((Is?"production":void 0)!=="production"&&h.has(m))throw new Error("prop listener already exists");if(s.size){const x=v[2](a(m));h.set(m,[v,x])}else h.set(m,[v])}},c=m=>{var b;const v=h.get(m);v&&(h.delete(m),(b=v[1])==null||b.call(v))},u=m=>(s.add(m),s.size===1&&h.forEach(([v,x],w)=>{if((Is?"production":void 0)!=="production"&&x)throw new Error("remove already exists");const _=v[2](a(w));h.set(w,[v,_])}),()=>{s.delete(m),s.size===0&&h.forEach(([v,x],w)=>{x&&(x(),h.set(w,[v]))})});let f=!0;const d=Mf(()=>f,l,c,n),g=wf(i,d);zs.set(i,g);const p=[i,o,u];return Oe.set(g,p),Reflect.ownKeys(i).forEach(m=>{const b=Object.getOwnPropertyDescriptor(i,m);"value"in b&&b.writable&&(g[m]=i[m])}),f=!1,g}function El(i,t,e){const s=Oe.get(i);(Is?"production":void 0)!=="production"&&!s&&console.warn("Please use proxy object");let n;const r=[],o=s[2];let a=!1;const l=o(c=>{c&&r.push(c),n||(n=Promise.resolve().then(()=>{n=void 0,a&&t(r.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Ao(i){const t=Oe.get(i);(Is?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[e,s]=t;return yf(e,s())}const Sf={},Pf=(i,t)=>{const e=I.useRef(void 0);I.useEffect(()=>{e.current=bf(i,t)}),I.useDebugValue(e.current)},Cf=Pf,kf=new WeakMap;function We(i,t){const s=I.useMemo(()=>i&&new WeakMap,[i]),n=I.useRef(void 0),r=I.useRef(!1),o=I.useSyncExternalStore(I.useCallback(h=>{r.current=!0;const l=El(i,h);return h(),()=>{l(),r.current=!1}},[i,void 0]),()=>{const h=Ao(i);try{if(r.current&&n.current&&!Pl(n.current,h,s,new WeakMap))return n.current}catch{}return h},()=>Ao(i));I.useLayoutEffect(()=>{n.current=o}),(Sf?"production":void 0)!=="production"&&Cf(o,s);const a=I.useMemo(()=>new WeakMap,[]);return Sl(o,s,a,kf)}function fr(i,t,e,s){let n=i[t];return El(i,()=>{const r=i[t];Object.is(n,r)||e(n=r)})}var Je=9e15,be=1e9,dr="0123456789abcdef",Bs="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",js="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",gr={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Je,maxE:Je,crypto:!1},Ll,Jt,O=!0,an="[DecimalError] ",ge=an+"Invalid argument: ",Tl=an+"Precision limit exceeded",Rl=an+"crypto unavailable",Nl="[object Decimal]",_t=Math.floor,lt=Math.pow,Ef=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Lf=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Tf=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Al=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ot=1e7,A=7,Rf=9007199254740991,Nf=Bs.length-1,pr=js.length-1,P={toStringTag:Nl};P.absoluteValue=P.abs=function(){var i=new this.constructor(this);return i.s<0&&(i.s=1),R(i)};P.ceil=function(){return R(new this.constructor(this),this.e+1,2)};P.clampedTo=P.clamp=function(i,t){var e,s=this,n=s.constructor;if(i=new n(i),t=new n(t),!i.s||!t.s)return new n(NaN);if(i.gt(t))throw Error(ge+t);return e=s.cmp(i),e<0?i:s.cmp(t)>0?t:new n(s)};P.comparedTo=P.cmp=function(i){var t,e,s,n,r=this,o=r.d,a=(i=new r.constructor(i)).d,h=r.s,l=i.s;if(!o||!a)return!h||!l?NaN:h!==l?h:o===a?0:!o^h<0?1:-1;if(!o[0]||!a[0])return o[0]?h:a[0]?-l:0;if(h!==l)return h;if(r.e!==i.e)return r.e>i.e^h<0?1:-1;for(s=o.length,n=a.length,t=0,e=s<n?s:n;t<e;++t)if(o[t]!==a[t])return o[t]>a[t]^h<0?1:-1;return s===n?0:s>n^h<0?1:-1};P.cosine=P.cos=function(){var i,t,e=this,s=e.constructor;return e.d?e.d[0]?(i=s.precision,t=s.rounding,s.precision=i+Math.max(e.e,e.sd())+A,s.rounding=1,e=Af(s,zl(s,e)),s.precision=i,s.rounding=t,R(Jt==2||Jt==3?e.neg():e,i,t,!0)):new s(1):new s(NaN)};P.cubeRoot=P.cbrt=function(){var i,t,e,s,n,r,o,a,h,l,c=this,u=c.constructor;if(!c.isFinite()||c.isZero())return new u(c);for(O=!1,r=c.s*lt(c.s*c,1/3),!r||Math.abs(r)==1/0?(e=mt(c.d),i=c.e,(r=(i-e.length+1)%3)&&(e+=r==1||r==-2?"0":"00"),r=lt(e,1/3),i=_t((i+1)/3)-(i%3==(i<0?-1:2)),r==1/0?e="5e"+i:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+i),s=new u(e),s.s=c.s):s=new u(r.toString()),o=(i=u.precision)+3;;)if(a=s,h=a.times(a).times(a),l=h.plus(c),s=J(l.plus(c).times(a),l.plus(h),o+2,1),mt(a.d).slice(0,o)===(e=mt(s.d)).slice(0,o))if(e=e.slice(o-3,o+1),e=="9999"||!n&&e=="4999"){if(!n&&(R(a,i+1,0),a.times(a).times(a).eq(c))){s=a;break}o+=4,n=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(R(s,i+1,1),t=!s.times(s).times(s).eq(c));break}return O=!0,R(s,i,u.rounding,t)};P.decimalPlaces=P.dp=function(){var i,t=this.d,e=NaN;if(t){if(i=t.length-1,e=(i-_t(this.e/A))*A,i=t[i],i)for(;i%10==0;i/=10)e--;e<0&&(e=0)}return e};P.dividedBy=P.div=function(i){return J(this,new this.constructor(i))};P.dividedToIntegerBy=P.divToInt=function(i){var t=this,e=t.constructor;return R(J(t,new e(i),0,1,1),e.precision,e.rounding)};P.equals=P.eq=function(i){return this.cmp(i)===0};P.floor=function(){return R(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(i){return this.cmp(i)>0};P.greaterThanOrEqualTo=P.gte=function(i){var t=this.cmp(i);return t==1||t===0};P.hyperbolicCosine=P.cosh=function(){var i,t,e,s,n,r=this,o=r.constructor,a=new o(1);if(!r.isFinite())return new o(r.s?1/0:NaN);if(r.isZero())return a;e=o.precision,s=o.rounding,o.precision=e+Math.max(r.e,r.sd())+4,o.rounding=1,n=r.d.length,n<32?(i=Math.ceil(n/3),t=(1/ln(4,i)).toString()):(i=16,t="2.3283064365386962890625e-10"),r=si(o,1,r.times(t),new o(1),!0);for(var h,l=i,c=new o(8);l--;)h=r.times(r),r=a.minus(h.times(c.minus(h.times(c))));return R(r,o.precision=e,o.rounding=s,!0)};P.hyperbolicSine=P.sinh=function(){var i,t,e,s,n=this,r=n.constructor;if(!n.isFinite()||n.isZero())return new r(n);if(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+4,r.rounding=1,s=n.d.length,s<3)n=si(r,2,n,n,!0);else{i=1.4*Math.sqrt(s),i=i>16?16:i|0,n=n.times(1/ln(5,i)),n=si(r,2,n,n,!0);for(var o,a=new r(5),h=new r(16),l=new r(20);i--;)o=n.times(n),n=n.times(a.plus(o.times(h.times(o).plus(l))))}return r.precision=t,r.rounding=e,R(n,t,e,!0)};P.hyperbolicTangent=P.tanh=function(){var i,t,e=this,s=e.constructor;return e.isFinite()?e.isZero()?new s(e):(i=s.precision,t=s.rounding,s.precision=i+7,s.rounding=1,J(e.sinh(),e.cosh(),s.precision=i,s.rounding=t)):new s(e.s)};P.inverseCosine=P.acos=function(){var i=this,t=i.constructor,e=i.abs().cmp(1),s=t.precision,n=t.rounding;return e!==-1?e===0?i.isNeg()?Vt(t,s,n):new t(0):new t(NaN):i.isZero()?Vt(t,s+4,n).times(.5):(t.precision=s+6,t.rounding=1,i=new t(1).minus(i).div(i.plus(1)).sqrt().atan(),t.precision=s,t.rounding=n,i.times(2))};P.inverseHyperbolicCosine=P.acosh=function(){var i,t,e=this,s=e.constructor;return e.lte(1)?new s(e.eq(1)?0:NaN):e.isFinite()?(i=s.precision,t=s.rounding,s.precision=i+Math.max(Math.abs(e.e),e.sd())+4,s.rounding=1,O=!1,e=e.times(e).minus(1).sqrt().plus(e),O=!0,s.precision=i,s.rounding=t,e.ln()):new s(e)};P.inverseHyperbolicSine=P.asinh=function(){var i,t,e=this,s=e.constructor;return!e.isFinite()||e.isZero()?new s(e):(i=s.precision,t=s.rounding,s.precision=i+2*Math.max(Math.abs(e.e),e.sd())+6,s.rounding=1,O=!1,e=e.times(e).plus(1).sqrt().plus(e),O=!0,s.precision=i,s.rounding=t,e.ln())};P.inverseHyperbolicTangent=P.atanh=function(){var i,t,e,s,n=this,r=n.constructor;return n.isFinite()?n.e>=0?new r(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(i=r.precision,t=r.rounding,s=n.sd(),Math.max(s,i)<2*-n.e-1?R(new r(n),i,t,!0):(r.precision=e=s-n.e,n=J(n.plus(1),new r(1).minus(n),e+i,1),r.precision=i+4,r.rounding=1,n=n.ln(),r.precision=i,r.rounding=t,n.times(.5))):new r(NaN)};P.inverseSine=P.asin=function(){var i,t,e,s,n=this,r=n.constructor;return n.isZero()?new r(n):(t=n.abs().cmp(1),e=r.precision,s=r.rounding,t!==-1?t===0?(i=Vt(r,e+4,s).times(.5),i.s=n.s,i):new r(NaN):(r.precision=e+6,r.rounding=1,n=n.div(new r(1).minus(n.times(n)).sqrt().plus(1)).atan(),r.precision=e,r.rounding=s,n.times(2)))};P.inverseTangent=P.atan=function(){var i,t,e,s,n,r,o,a,h,l=this,c=l.constructor,u=c.precision,f=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&u+4<=pr)return o=Vt(c,u+4,f).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(u+4<=pr)return o=Vt(c,u+4,f).times(.5),o.s=l.s,o}for(c.precision=a=u+10,c.rounding=1,e=Math.min(28,a/A+2|0),i=e;i;--i)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(O=!1,t=Math.ceil(a/A),s=1,h=l.times(l),o=new c(l),n=l;i!==-1;)if(n=n.times(h),r=o.minus(n.div(s+=2)),n=n.times(h),o=r.plus(n.div(s+=2)),o.d[t]!==void 0)for(i=t;o.d[i]===r.d[i]&&i--;);return e&&(o=o.times(2<<e-1)),O=!0,R(o,c.precision=u,c.rounding=f,!0)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&_t(this.e/A)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(i){return this.cmp(i)<0};P.lessThanOrEqualTo=P.lte=function(i){return this.cmp(i)<1};P.logarithm=P.log=function(i){var t,e,s,n,r,o,a,h,l=this,c=l.constructor,u=c.precision,f=c.rounding,d=5;if(i==null)i=new c(10),t=!0;else{if(i=new c(i),e=i.d,i.s<0||!e||!e[0]||i.eq(1))return new c(NaN);t=i.eq(10)}if(e=l.d,l.s<0||!e||!e[0]||l.eq(1))return new c(e&&!e[0]?-1/0:l.s!=1?NaN:e?0:1/0);if(t)if(e.length>1)r=!0;else{for(n=e[0];n%10===0;)n/=10;r=n!==1}if(O=!1,a=u+d,o=ae(l,a),s=t?Vs(c,a+10):ae(i,a),h=J(o,s,a,1),Bi(h.d,n=u,f))do if(a+=10,o=ae(l,a),s=t?Vs(c,a+10):ae(i,a),h=J(o,s,a,1),!r){+mt(h.d).slice(n+1,n+15)+1==1e14&&(h=R(h,u+1,0));break}while(Bi(h.d,n+=10,f));return O=!0,R(h,u,f)};P.minus=P.sub=function(i){var t,e,s,n,r,o,a,h,l,c,u,f,d=this,g=d.constructor;if(i=new g(i),!d.d||!i.d)return!d.s||!i.s?i=new g(NaN):d.d?i.s=-i.s:i=new g(i.d||d.s!==i.s?d:NaN),i;if(d.s!=i.s)return i.s=-i.s,d.plus(i);if(l=d.d,f=i.d,a=g.precision,h=g.rounding,!l[0]||!f[0]){if(f[0])i.s=-i.s;else if(l[0])i=new g(d);else return new g(h===3?-0:0);return O?R(i,a,h):i}if(e=_t(i.e/A),c=_t(d.e/A),l=l.slice(),r=c-e,r){for(u=r<0,u?(t=l,r=-r,o=f.length):(t=f,e=c,o=l.length),s=Math.max(Math.ceil(a/A),o)+2,r>s&&(r=s,t.length=1),t.reverse(),s=r;s--;)t.push(0);t.reverse()}else{for(s=l.length,o=f.length,u=s<o,u&&(o=s),s=0;s<o;s++)if(l[s]!=f[s]){u=l[s]<f[s];break}r=0}for(u&&(t=l,l=f,f=t,i.s=-i.s),o=l.length,s=f.length-o;s>0;--s)l[o++]=0;for(s=f.length;s>r;){if(l[--s]<f[s]){for(n=s;n&&l[--n]===0;)l[n]=Ot-1;--l[n],l[s]+=Ot}l[s]-=f[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--e;return l[0]?(i.d=l,i.e=hn(l,e),O?R(i,a,h):i):new g(h===3?-0:0)};P.modulo=P.mod=function(i){var t,e=this,s=e.constructor;return i=new s(i),!e.d||!i.s||i.d&&!i.d[0]?new s(NaN):!i.d||e.d&&!e.d[0]?R(new s(e),s.precision,s.rounding):(O=!1,s.modulo==9?(t=J(e,i.abs(),0,3,1),t.s*=i.s):t=J(e,i,0,s.modulo,1),t=t.times(i),O=!0,e.minus(t))};P.naturalExponential=P.exp=function(){return mr(this)};P.naturalLogarithm=P.ln=function(){return ae(this)};P.negated=P.neg=function(){var i=new this.constructor(this);return i.s=-i.s,R(i)};P.plus=P.add=function(i){var t,e,s,n,r,o,a,h,l,c,u=this,f=u.constructor;if(i=new f(i),!u.d||!i.d)return!u.s||!i.s?i=new f(NaN):u.d||(i=new f(i.d||u.s===i.s?u:NaN)),i;if(u.s!=i.s)return i.s=-i.s,u.minus(i);if(l=u.d,c=i.d,a=f.precision,h=f.rounding,!l[0]||!c[0])return c[0]||(i=new f(u)),O?R(i,a,h):i;if(r=_t(u.e/A),s=_t(i.e/A),l=l.slice(),n=r-s,n){for(n<0?(e=l,n=-n,o=c.length):(e=c,s=r,o=l.length),r=Math.ceil(a/A),o=r>o?r+1:o+1,n>o&&(n=o,e.length=1),e.reverse();n--;)e.push(0);e.reverse()}for(o=l.length,n=c.length,o-n<0&&(n=o,e=c,c=l,l=e),t=0;n;)t=(l[--n]=l[n]+c[n]+t)/Ot|0,l[n]%=Ot;for(t&&(l.unshift(t),++s),o=l.length;l[--o]==0;)l.pop();return i.d=l,i.e=hn(l,s),O?R(i,a,h):i};P.precision=P.sd=function(i){var t,e=this;if(i!==void 0&&i!==!!i&&i!==1&&i!==0)throw Error(ge+i);return e.d?(t=Dl(e.d),i&&e.e+1>t&&(t=e.e+1)):t=NaN,t};P.round=function(){var i=this,t=i.constructor;return R(new t(i),i.e+1,t.rounding)};P.sine=P.sin=function(){var i,t,e=this,s=e.constructor;return e.isFinite()?e.isZero()?new s(e):(i=s.precision,t=s.rounding,s.precision=i+Math.max(e.e,e.sd())+A,s.rounding=1,e=Of(s,zl(s,e)),s.precision=i,s.rounding=t,R(Jt>2?e.neg():e,i,t,!0)):new s(NaN)};P.squareRoot=P.sqrt=function(){var i,t,e,s,n,r,o=this,a=o.d,h=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(O=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=mt(a),(t.length+h)%2==0&&(t+="0"),l=Math.sqrt(t),h=_t((h+1)/2)-(h<0||h%2),l==1/0?t="5e"+h:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+h),s=new c(t)):s=new c(l.toString()),e=(h=c.precision)+3;;)if(r=s,s=r.plus(J(o,r,e+2,1)).times(.5),mt(r.d).slice(0,e)===(t=mt(s.d)).slice(0,e))if(t=t.slice(e-3,e+1),t=="9999"||!n&&t=="4999"){if(!n&&(R(r,h+1,0),r.times(r).eq(o))){s=r;break}e+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(R(s,h+1,1),i=!s.times(s).eq(o));break}return O=!0,R(s,h,c.rounding,i)};P.tangent=P.tan=function(){var i,t,e=this,s=e.constructor;return e.isFinite()?e.isZero()?new s(e):(i=s.precision,t=s.rounding,s.precision=i+10,s.rounding=1,e=e.sin(),e.s=1,e=J(e,new s(1).minus(e.times(e)).sqrt(),i+10,0),s.precision=i,s.rounding=t,R(Jt==2||Jt==4?e.neg():e,i,t,!0)):new s(NaN)};P.times=P.mul=function(i){var t,e,s,n,r,o,a,h,l,c=this,u=c.constructor,f=c.d,d=(i=new u(i)).d;if(i.s*=c.s,!f||!f[0]||!d||!d[0])return new u(!i.s||f&&!f[0]&&!d||d&&!d[0]&&!f?NaN:!f||!d?i.s/0:i.s*0);for(e=_t(c.e/A)+_t(i.e/A),h=f.length,l=d.length,h<l&&(r=f,f=d,d=r,o=h,h=l,l=o),r=[],o=h+l,s=o;s--;)r.push(0);for(s=l;--s>=0;){for(t=0,n=h+s;n>s;)a=r[n]+d[s]*f[n-s-1]+t,r[n--]=a%Ot|0,t=a/Ot|0;r[n]=(r[n]+t)%Ot|0}for(;!r[--o];)r.pop();return t?++e:r.shift(),i.d=r,i.e=hn(r,e),O?R(i,u.precision,u.rounding):i};P.toBinary=function(i,t){return Yr(this,2,i,t)};P.toDecimalPlaces=P.toDP=function(i,t){var e=this,s=e.constructor;return e=new s(e),i===void 0?e:(Et(i,0,be),t===void 0?t=s.rounding:Et(t,0,8),R(e,i+e.e+1,t))};P.toExponential=function(i,t){var e,s=this,n=s.constructor;return i===void 0?e=Yt(s,!0):(Et(i,0,be),t===void 0?t=n.rounding:Et(t,0,8),s=R(new n(s),i+1,t),e=Yt(s,!0,i+1)),s.isNeg()&&!s.isZero()?"-"+e:e};P.toFixed=function(i,t){var e,s,n=this,r=n.constructor;return i===void 0?e=Yt(n):(Et(i,0,be),t===void 0?t=r.rounding:Et(t,0,8),s=R(new r(n),i+n.e+1,t),e=Yt(s,!1,i+s.e+1)),n.isNeg()&&!n.isZero()?"-"+e:e};P.toFraction=function(i){var t,e,s,n,r,o,a,h,l,c,u,f,d=this,g=d.d,p=d.constructor;if(!g)return new p(d);if(l=e=new p(1),s=h=new p(0),t=new p(s),r=t.e=Dl(g)-d.e-1,o=r%A,t.d[0]=lt(10,o<0?A+o:o),i==null)i=r>0?t:l;else{if(a=new p(i),!a.isInt()||a.lt(l))throw Error(ge+a);i=a.gt(t)?r>0?t:l:a}for(O=!1,a=new p(mt(g)),c=p.precision,p.precision=r=g.length*A*2;u=J(a,t,0,1,1),n=e.plus(u.times(s)),n.cmp(i)!=1;)e=s,s=n,n=l,l=h.plus(u.times(n)),h=n,n=t,t=a.minus(u.times(n)),a=n;return n=J(i.minus(e),s,0,1,1),h=h.plus(n.times(l)),e=e.plus(n.times(s)),h.s=l.s=d.s,f=J(l,s,r,1).minus(d).abs().cmp(J(h,e,r,1).minus(d).abs())<1?[l,s]:[h,e],p.precision=c,O=!0,f};P.toHexadecimal=P.toHex=function(i,t){return Yr(this,16,i,t)};P.toNearest=function(i,t){var e=this,s=e.constructor;if(e=new s(e),i==null){if(!e.d)return e;i=new s(1),t=s.rounding}else{if(i=new s(i),t===void 0?t=s.rounding:Et(t,0,8),!e.d)return i.s?e:i;if(!i.d)return i.s&&(i.s=e.s),i}return i.d[0]?(O=!1,e=J(e,i,0,t,1).times(i),O=!0,R(e)):(i.s=e.s,e=i),e};P.toNumber=function(){return+this};P.toOctal=function(i,t){return Yr(this,8,i,t)};P.toPower=P.pow=function(i){var t,e,s,n,r,o,a=this,h=a.constructor,l=+(i=new h(i));if(!a.d||!i.d||!a.d[0]||!i.d[0])return new h(lt(+a,l));if(a=new h(a),a.eq(1))return a;if(s=h.precision,r=h.rounding,i.eq(1))return R(a,s,r);if(t=_t(i.e/A),t>=i.d.length-1&&(e=l<0?-l:l)<=Rf)return n=Ol(h,a,e,s),i.s<0?new h(1).div(n):R(n,s,r);if(o=a.s,o<0){if(t<i.d.length-1)return new h(NaN);if((i.d[t]&1)==0&&(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return e=lt(+a,l),t=e==0||!isFinite(e)?_t(l*(Math.log("0."+mt(a.d))/Math.LN10+a.e+1)):new h(e+"").e,t>h.maxE+1||t<h.minE-1?new h(t>0?o/0:0):(O=!1,h.rounding=a.s=1,e=Math.min(12,(t+"").length),n=mr(i.times(ae(a,s+e)),s),n.d&&(n=R(n,s+5,1),Bi(n.d,s,r)&&(t=s+10,n=R(mr(i.times(ae(a,t+e)),t),t+5,1),+mt(n.d).slice(s+1,s+15)+1==1e14&&(n=R(n,s+1,0)))),n.s=o,O=!0,h.rounding=r,R(n,s,r))};P.toPrecision=function(i,t){var e,s=this,n=s.constructor;return i===void 0?e=Yt(s,s.e<=n.toExpNeg||s.e>=n.toExpPos):(Et(i,1,be),t===void 0?t=n.rounding:Et(t,0,8),s=R(new n(s),i,t),e=Yt(s,i<=s.e||s.e<=n.toExpNeg,i)),s.isNeg()&&!s.isZero()?"-"+e:e};P.toSignificantDigits=P.toSD=function(i,t){var e=this,s=e.constructor;return i===void 0?(i=s.precision,t=s.rounding):(Et(i,1,be),t===void 0?t=s.rounding:Et(t,0,8)),R(new s(e),i,t)};P.toString=function(){var i=this,t=i.constructor,e=Yt(i,i.e<=t.toExpNeg||i.e>=t.toExpPos);return i.isNeg()&&!i.isZero()?"-"+e:e};P.truncated=P.trunc=function(){return R(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var i=this,t=i.constructor,e=Yt(i,i.e<=t.toExpNeg||i.e>=t.toExpPos);return i.isNeg()?"-"+e:e};function mt(i){var t,e,s,n=i.length-1,r="",o=i[0];if(n>0){for(r+=o,t=1;t<n;t++)s=i[t]+"",e=A-s.length,e&&(r+=re(e)),r+=s;o=i[t],s=o+"",e=A-s.length,e&&(r+=re(e))}else if(o===0)return"0";for(;o%10===0;)o/=10;return r+o}function Et(i,t,e){if(i!==~~i||i<t||i>e)throw Error(ge+i)}function Bi(i,t,e,s){var n,r,o,a;for(r=i[0];r>=10;r/=10)--t;return--t<0?(t+=A,n=0):(n=Math.ceil((t+1)/A),t%=A),r=lt(10,A-t),a=i[n]%r|0,s==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=e<4&&a==99999||e>3&&a==49999||a==5e4||a==0):o=(e<4&&a+1==r||e>3&&a+1==r/2)&&(i[n+1]/r/100|0)==lt(10,t-2)-1||(a==r/2||a==0)&&(i[n+1]/r/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(s||e<4)&&a==9999||!s&&e>3&&a==4999):o=((s||e<4)&&a+1==r||!s&&e>3&&a+1==r/2)&&(i[n+1]/r/1e3|0)==lt(10,t-3)-1,o}function Cs(i,t,e){for(var s,n=[0],r,o=0,a=i.length;o<a;){for(r=n.length;r--;)n[r]*=t;for(n[0]+=dr.indexOf(i.charAt(o++)),s=0;s<n.length;s++)n[s]>e-1&&(n[s+1]===void 0&&(n[s+1]=0),n[s+1]+=n[s]/e|0,n[s]%=e)}return n.reverse()}function Af(i,t){var e,s,n;if(t.isZero())return t;s=t.d.length,s<32?(e=Math.ceil(s/3),n=(1/ln(4,e)).toString()):(e=16,n="2.3283064365386962890625e-10"),i.precision+=e,t=si(i,1,t.times(n),new i(1));for(var r=e;r--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return i.precision-=e,t}var J=(function(){function i(s,n,r){var o,a=0,h=s.length;for(s=s.slice();h--;)o=s[h]*n+a,s[h]=o%r|0,a=o/r|0;return a&&s.unshift(a),s}function t(s,n,r,o){var a,h;if(r!=o)h=r>o?1:-1;else for(a=h=0;a<r;a++)if(s[a]!=n[a]){h=s[a]>n[a]?1:-1;break}return h}function e(s,n,r,o){for(var a=0;r--;)s[r]-=a,a=s[r]<n[r]?1:0,s[r]=a*o+s[r]-n[r];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,r,o,a,h){var l,c,u,f,d,g,p,m,b,v,x,w,_,S,y,C,E,L,T,F,j=s.constructor,et=s.s==n.s?1:-1,D=s.d,N=n.d;if(!D||!D[0]||!N||!N[0])return new j(!s.s||!n.s||(D?N&&D[0]==N[0]:!N)?NaN:D&&D[0]==0||!N?et*0:et/0);for(h?(d=1,c=s.e-n.e):(h=Ot,d=A,c=_t(s.e/d)-_t(n.e/d)),T=N.length,E=D.length,b=new j(et),v=b.d=[],u=0;N[u]==(D[u]||0);u++);if(N[u]>(D[u]||0)&&c--,r==null?(S=r=j.precision,o=j.rounding):a?S=r+(s.e-n.e)+1:S=r,S<0)v.push(1),g=!0;else{if(S=S/d+2|0,u=0,T==1){for(f=0,N=N[0],S++;(u<E||f)&&S--;u++)y=f*h+(D[u]||0),v[u]=y/N|0,f=y%N|0;g=f||u<E}else{for(f=h/(N[0]+1)|0,f>1&&(N=i(N,f,h),D=i(D,f,h),T=N.length,E=D.length),C=T,x=D.slice(0,T),w=x.length;w<T;)x[w++]=0;F=N.slice(),F.unshift(0),L=N[0],N[1]>=h/2&&++L;do f=0,l=t(N,x,T,w),l<0?(_=x[0],T!=w&&(_=_*h+(x[1]||0)),f=_/L|0,f>1?(f>=h&&(f=h-1),p=i(N,f,h),m=p.length,w=x.length,l=t(p,x,m,w),l==1&&(f--,e(p,T<m?F:N,m,h))):(f==0&&(l=f=1),p=N.slice()),m=p.length,m<w&&p.unshift(0),e(x,p,w,h),l==-1&&(w=x.length,l=t(N,x,T,w),l<1&&(f++,e(x,T<w?F:N,w,h))),w=x.length):l===0&&(f++,x=[0]),v[u++]=f,l&&x[0]?x[w++]=D[C]||0:(x=[D[C]],w=1);while((C++<E||x[0]!==void 0)&&S--);g=x[0]!==void 0}v[0]||v.shift()}if(d==1)b.e=c,Ll=g;else{for(u=1,f=v[0];f>=10;f/=10)u++;b.e=u+c*d-1,R(b,a?r+b.e+1:r,o,g)}return b}})();function R(i,t,e,s){var n,r,o,a,h,l,c,u,f,d=i.constructor;t:if(t!=null){if(u=i.d,!u)return i;for(n=1,a=u[0];a>=10;a/=10)n++;if(r=t-n,r<0)r+=A,o=t,c=u[f=0],h=c/lt(10,n-o-1)%10|0;else if(f=Math.ceil((r+1)/A),a=u.length,f>=a)if(s){for(;a++<=f;)u.push(0);c=h=0,n=1,r%=A,o=r-A+1}else break t;else{for(c=a=u[f],n=1;a>=10;a/=10)n++;r%=A,o=r-A+n,h=o<0?0:c/lt(10,n-o-1)%10|0}if(s=s||t<0||u[f+1]!==void 0||(o<0?c:c%lt(10,n-o-1)),l=e<4?(h||s)&&(e==0||e==(i.s<0?3:2)):h>5||h==5&&(e==4||s||e==6&&(r>0?o>0?c/lt(10,n-o):0:u[f-1])%10&1||e==(i.s<0?8:7)),t<1||!u[0])return u.length=0,l?(t-=i.e+1,u[0]=lt(10,(A-t%A)%A),i.e=-t||0):u[0]=i.e=0,i;if(r==0?(u.length=f,a=1,f--):(u.length=f+1,a=lt(10,A-r),u[f]=o>0?(c/lt(10,n-o)%lt(10,o)|0)*a:0),l)for(;;)if(f==0){for(r=1,o=u[0];o>=10;o/=10)r++;for(o=u[0]+=a,a=1;o>=10;o/=10)a++;r!=a&&(i.e++,u[0]==Ot&&(u[0]=1));break}else{if(u[f]+=a,u[f]!=Ot)break;u[f--]=0,a=1}for(r=u.length;u[--r]===0;)u.pop()}return O&&(i.e>d.maxE?(i.d=null,i.e=NaN):i.e<d.minE&&(i.e=0,i.d=[0])),i}function Yt(i,t,e){if(!i.isFinite())return Il(i);var s,n=i.e,r=mt(i.d),o=r.length;return t?(e&&(s=e-o)>0?r=r.charAt(0)+"."+r.slice(1)+re(s):o>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(i.e<0?"e":"e+")+i.e):n<0?(r="0."+re(-n-1)+r,e&&(s=e-o)>0&&(r+=re(s))):n>=o?(r+=re(n+1-o),e&&(s=e-n-1)>0&&(r=r+"."+re(s))):((s=n+1)<o&&(r=r.slice(0,s)+"."+r.slice(s)),e&&(s=e-o)>0&&(n+1===o&&(r+="."),r+=re(s))),r}function hn(i,t){var e=i[0];for(t*=A;e>=10;e/=10)t++;return t}function Vs(i,t,e){if(t>Nf)throw O=!0,e&&(i.precision=e),Error(Tl);return R(new i(Bs),t,1,!0)}function Vt(i,t,e){if(t>pr)throw Error(Tl);return R(new i(js),t,e,!0)}function Dl(i){var t=i.length-1,e=t*A+1;if(t=i[t],t){for(;t%10==0;t/=10)e--;for(t=i[0];t>=10;t/=10)e++}return e}function re(i){for(var t="";i--;)t+="0";return t}function Ol(i,t,e,s){var n,r=new i(1),o=Math.ceil(s/A+4);for(O=!1;;){if(e%2&&(r=r.times(t),Oo(r.d,o)&&(n=!0)),e=_t(e/2),e===0){e=r.d.length-1,n&&r.d[e]===0&&++r.d[e];break}t=t.times(t),Oo(t.d,o)}return O=!0,r}function Do(i){return i.d[i.d.length-1]&1}function Fl(i,t,e){for(var s,n,r=new i(t[0]),o=0;++o<t.length;){if(n=new i(t[o]),!n.s){r=n;break}s=r.cmp(n),(s===e||s===0&&r.s===e)&&(r=n)}return r}function mr(i,t){var e,s,n,r,o,a,h,l=0,c=0,u=0,f=i.constructor,d=f.rounding,g=f.precision;if(!i.d||!i.d[0]||i.e>17)return new f(i.d?i.d[0]?i.s<0?0:1/0:1:i.s?i.s<0?0:i:NaN);for(t==null?(O=!1,h=g):h=t,a=new f(.03125);i.e>-2;)i=i.times(a),u+=5;for(s=Math.log(lt(2,u))/Math.LN10*2+5|0,h+=s,e=r=o=new f(1),f.precision=h;;){if(r=R(r.times(i),h,1),e=e.times(++c),a=o.plus(J(r,e,h,1)),mt(a.d).slice(0,h)===mt(o.d).slice(0,h)){for(n=u;n--;)o=R(o.times(o),h,1);if(t==null)if(l<3&&Bi(o.d,h-s,d,l))f.precision=h+=10,e=r=a=new f(1),c=0,l++;else return R(o,f.precision=g,d,O=!0);else return f.precision=g,o}o=a}}function ae(i,t){var e,s,n,r,o,a,h,l,c,u,f,d=1,g=10,p=i,m=p.d,b=p.constructor,v=b.rounding,x=b.precision;if(p.s<0||!m||!m[0]||!p.e&&m[0]==1&&m.length==1)return new b(m&&!m[0]?-1/0:p.s!=1?NaN:m?0:p);if(t==null?(O=!1,c=x):c=t,b.precision=c+=g,e=mt(m),s=e.charAt(0),Math.abs(r=p.e)<15e14){for(;s<7&&s!=1||s==1&&e.charAt(1)>3;)p=p.times(i),e=mt(p.d),s=e.charAt(0),d++;r=p.e,s>1?(p=new b("0."+e),r++):p=new b(s+"."+e.slice(1))}else return l=Vs(b,c+2,x).times(r+""),p=ae(new b(s+"."+e.slice(1)),c-g).plus(l),b.precision=x,t==null?R(p,x,v,O=!0):p;for(u=p,h=o=p=J(p.minus(1),p.plus(1),c,1),f=R(p.times(p),c,1),n=3;;){if(o=R(o.times(f),c,1),l=h.plus(J(o,new b(n),c,1)),mt(l.d).slice(0,c)===mt(h.d).slice(0,c))if(h=h.times(2),r!==0&&(h=h.plus(Vs(b,c+2,x).times(r+""))),h=J(h,new b(d),c,1),t==null)if(Bi(h.d,c-g,v,a))b.precision=c+=g,l=o=p=J(u.minus(1),u.plus(1),c,1),f=R(p.times(p),c,1),n=a=1;else return R(h,b.precision=x,v,O=!0);else return b.precision=x,h;h=l,n+=2}}function Il(i){return String(i.s*i.s/0)}function ks(i,t){var e,s,n;for((e=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(e<0&&(e=s),e+=+t.slice(s+1),t=t.substring(0,s)):e<0&&(e=t.length),s=0;t.charCodeAt(s)===48;s++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(s,n),t){if(n-=s,i.e=e=e-s-1,i.d=[],s=(e+1)%A,e<0&&(s+=A),s<n){for(s&&i.d.push(+t.slice(0,s)),n-=A;s<n;)i.d.push(+t.slice(s,s+=A));t=t.slice(s),s=A-t.length}else s-=n;for(;s--;)t+="0";i.d.push(+t),O&&(i.e>i.constructor.maxE?(i.d=null,i.e=NaN):i.e<i.constructor.minE&&(i.e=0,i.d=[0]))}else i.e=0,i.d=[0];return i}function Df(i,t){var e,s,n,r,o,a,h,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Al.test(t))return ks(i,t)}else if(t==="Infinity"||t==="NaN")return+t||(i.s=NaN),i.e=NaN,i.d=null,i;if(Lf.test(t))e=16,t=t.toLowerCase();else if(Ef.test(t))e=2;else if(Tf.test(t))e=8;else throw Error(ge+t);for(r=t.search(/p/i),r>0?(h=+t.slice(r+1),t=t.substring(2,r)):t=t.slice(2),r=t.indexOf("."),o=r>=0,s=i.constructor,o&&(t=t.replace(".",""),a=t.length,r=a-r,n=Ol(s,new s(e),r,r*2)),l=Cs(t,e,Ot),c=l.length-1,r=c;l[r]===0;--r)l.pop();return r<0?new s(i.s*0):(i.e=hn(l,c),i.d=l,O=!1,o&&(i=J(i,n,a*4)),h&&(i=i.times(Math.abs(h)<54?lt(2,h):ni.pow(2,h))),O=!0,i)}function Of(i,t){var e,s=t.d.length;if(s<3)return t.isZero()?t:si(i,2,t,t);e=1.4*Math.sqrt(s),e=e>16?16:e|0,t=t.times(1/ln(5,e)),t=si(i,2,t,t);for(var n,r=new i(5),o=new i(16),a=new i(20);e--;)n=t.times(t),t=t.times(r.plus(n.times(o.times(n).minus(a))));return t}function si(i,t,e,s,n){var r,o,a,h,l=i.precision,c=Math.ceil(l/A);for(O=!1,h=e.times(e),a=new i(s);;){if(o=J(a.times(h),new i(t++*t++),l,1),a=n?s.plus(o):s.minus(o),s=J(o.times(h),new i(t++*t++),l,1),o=a.plus(s),o.d[c]!==void 0){for(r=c;o.d[r]===a.d[r]&&r--;);if(r==-1)break}r=a,a=s,s=o,o=r}return O=!0,o.d.length=c+1,o}function ln(i,t){for(var e=i;--t;)e*=i;return e}function zl(i,t){var e,s=t.s<0,n=Vt(i,i.precision,1),r=n.times(.5);if(t=t.abs(),t.lte(r))return Jt=s?4:1,t;if(e=t.divToInt(n),e.isZero())Jt=s?3:2;else{if(t=t.minus(e.times(n)),t.lte(r))return Jt=Do(e)?s?2:3:s?4:1,t;Jt=Do(e)?s?1:4:s?3:2}return t.minus(n).abs()}function Yr(i,t,e,s){var n,r,o,a,h,l,c,u,f,d=i.constructor,g=e!==void 0;if(g?(Et(e,1,be),s===void 0?s=d.rounding:Et(s,0,8)):(e=d.precision,s=d.rounding),!i.isFinite())c=Il(i);else{for(c=Yt(i),o=c.indexOf("."),g?(n=2,t==16?e=e*4-3:t==8&&(e=e*3-2)):n=t,o>=0&&(c=c.replace(".",""),f=new d(1),f.e=c.length-o,f.d=Cs(Yt(f),10,n),f.e=f.d.length),u=Cs(c,10,n),r=h=u.length;u[--h]==0;)u.pop();if(!u[0])c=g?"0p+0":"0";else{if(o<0?r--:(i=new d(i),i.d=u,i.e=r,i=J(i,f,e,s,0,n),u=i.d,r=i.e,l=Ll),o=u[e],a=n/2,l=l||u[e+1]!==void 0,l=s<4?(o!==void 0||l)&&(s===0||s===(i.s<0?3:2)):o>a||o===a&&(s===4||l||s===6&&u[e-1]&1||s===(i.s<0?8:7)),u.length=e,l)for(;++u[--e]>n-1;)u[e]=0,e||(++r,u.unshift(1));for(h=u.length;!u[h-1];--h);for(o=0,c="";o<h;o++)c+=dr.charAt(u[o]);if(g){if(h>1)if(t==16||t==8){for(o=t==16?4:3,--h;h%o;h++)c+="0";for(u=Cs(c,n,t),h=u.length;!u[h-1];--h);for(o=1,c="1.";o<h;o++)c+=dr.charAt(u[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(r<0?"p":"p+")+r}else if(r<0){for(;++r;)c="0"+c;c="0."+c}else if(++r>h)for(r-=h;r--;)c+="0";else r<h&&(c=c.slice(0,r)+"."+c.slice(r))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return i.s<0?"-"+c:c}function Oo(i,t){if(i.length>t)return i.length=t,!0}function Ff(i){return new this(i).abs()}function If(i){return new this(i).acos()}function zf(i){return new this(i).acosh()}function Bf(i,t){return new this(i).plus(t)}function jf(i){return new this(i).asin()}function Vf(i){return new this(i).asinh()}function Wf(i){return new this(i).atan()}function Hf(i){return new this(i).atanh()}function $f(i,t){i=new this(i),t=new this(t);var e,s=this.precision,n=this.rounding,r=s+4;return!i.s||!t.s?e=new this(NaN):!i.d&&!t.d?(e=Vt(this,r,1).times(t.s>0?.25:.75),e.s=i.s):!t.d||i.isZero()?(e=t.s<0?Vt(this,s,n):new this(0),e.s=i.s):!i.d||t.isZero()?(e=Vt(this,r,1).times(.5),e.s=i.s):t.s<0?(this.precision=r,this.rounding=1,e=this.atan(J(i,t,r,1)),t=Vt(this,r,1),this.precision=s,this.rounding=n,e=i.s<0?e.minus(t):e.plus(t)):e=this.atan(J(i,t,r,1)),e}function Yf(i){return new this(i).cbrt()}function Uf(i){return R(i=new this(i),i.e+1,2)}function Kf(i,t,e){return new this(i).clamp(t,e)}function Xf(i){if(!i||typeof i!="object")throw Error(an+"Object expected");var t,e,s,n=i.defaults===!0,r=["precision",1,be,"rounding",0,8,"toExpNeg",-Je,0,"toExpPos",0,Je,"maxE",0,Je,"minE",-Je,0,"modulo",0,9];for(t=0;t<r.length;t+=3)if(e=r[t],n&&(this[e]=gr[e]),(s=i[e])!==void 0)if(_t(s)===s&&s>=r[t+1]&&s<=r[t+2])this[e]=s;else throw Error(ge+e+": "+s);if(e="crypto",n&&(this[e]=gr[e]),(s=i[e])!==void 0)if(s===!0||s===!1||s===0||s===1)if(s)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(Rl);else this[e]=!1;else throw Error(ge+e+": "+s);return this}function Gf(i){return new this(i).cos()}function Jf(i){return new this(i).cosh()}function Bl(i){var t,e,s;function n(r){var o,a,h,l=this;if(!(l instanceof n))return new n(r);if(l.constructor=n,Fo(r)){l.s=r.s,O?!r.d||r.e>n.maxE?(l.e=NaN,l.d=null):r.e<n.minE?(l.e=0,l.d=[0]):(l.e=r.e,l.d=r.d.slice()):(l.e=r.e,l.d=r.d?r.d.slice():r.d);return}if(h=typeof r,h==="number"){if(r===0){l.s=1/r<0?-1:1,l.e=0,l.d=[0];return}if(r<0?(r=-r,l.s=-1):l.s=1,r===~~r&&r<1e7){for(o=0,a=r;a>=10;a/=10)o++;O?o>n.maxE?(l.e=NaN,l.d=null):o<n.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[r]):(l.e=o,l.d=[r]);return}if(r*0!==0){r||(l.s=NaN),l.e=NaN,l.d=null;return}return ks(l,r.toString())}if(h==="string")return(a=r.charCodeAt(0))===45?(r=r.slice(1),l.s=-1):(a===43&&(r=r.slice(1)),l.s=1),Al.test(r)?ks(l,r):Df(l,r);if(h==="bigint")return r<0?(r=-r,l.s=-1):l.s=1,ks(l,r.toString());throw Error(ge+r)}if(n.prototype=P,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Xf,n.clone=Bl,n.isDecimal=Fo,n.abs=Ff,n.acos=If,n.acosh=zf,n.add=Bf,n.asin=jf,n.asinh=Vf,n.atan=Wf,n.atanh=Hf,n.atan2=$f,n.cbrt=Yf,n.ceil=Uf,n.clamp=Kf,n.cos=Gf,n.cosh=Jf,n.div=qf,n.exp=Qf,n.floor=Zf,n.hypot=td,n.ln=ed,n.log=id,n.log10=nd,n.log2=sd,n.max=rd,n.min=od,n.mod=ad,n.mul=hd,n.pow=ld,n.random=cd,n.round=ud,n.sign=fd,n.sin=dd,n.sinh=gd,n.sqrt=pd,n.sub=md,n.sum=bd,n.tan=vd,n.tanh=xd,n.trunc=wd,i===void 0&&(i={}),i&&i.defaults!==!0)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<s.length;)i.hasOwnProperty(e=s[t++])||(i[e]=this[e]);return n.config(i),n}function qf(i,t){return new this(i).div(t)}function Qf(i){return new this(i).exp()}function Zf(i){return R(i=new this(i),i.e+1,3)}function td(){var i,t,e=new this(0);for(O=!1,i=0;i<arguments.length;)if(t=new this(arguments[i++]),t.d)e.d&&(e=e.plus(t.times(t)));else{if(t.s)return O=!0,new this(1/0);e=t}return O=!0,e.sqrt()}function Fo(i){return i instanceof ni||i&&i.toStringTag===Nl||!1}function ed(i){return new this(i).ln()}function id(i,t){return new this(i).log(t)}function sd(i){return new this(i).log(2)}function nd(i){return new this(i).log(10)}function rd(){return Fl(this,arguments,-1)}function od(){return Fl(this,arguments,1)}function ad(i,t){return new this(i).mod(t)}function hd(i,t){return new this(i).mul(t)}function ld(i,t){return new this(i).pow(t)}function cd(i){var t,e,s,n,r=0,o=new this(1),a=[];if(i===void 0?i=this.precision:Et(i,1,be),s=Math.ceil(i/A),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(s));r<s;)n=t[r],n>=429e7?t[r]=crypto.getRandomValues(new Uint32Array(1))[0]:a[r++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(s*=4);r<s;)n=t[r]+(t[r+1]<<8)+(t[r+2]<<16)+((t[r+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,r):(a.push(n%1e7),r+=4);r=s/4}else throw Error(Rl);else for(;r<s;)a[r++]=Math.random()*1e7|0;for(s=a[--r],i%=A,s&&i&&(n=lt(10,A-i),a[r]=(s/n|0)*n);a[r]===0;r--)a.pop();if(r<0)e=0,a=[0];else{for(e=-1;a[0]===0;e-=A)a.shift();for(s=1,n=a[0];n>=10;n/=10)s++;s<A&&(e-=A-s)}return o.e=e,o.d=a,o}function ud(i){return R(i=new this(i),i.e+1,this.rounding)}function fd(i){return i=new this(i),i.d?i.d[0]?i.s:0*i.s:i.s||NaN}function dd(i){return new this(i).sin()}function gd(i){return new this(i).sinh()}function pd(i){return new this(i).sqrt()}function md(i,t){return new this(i).sub(t)}function bd(){var i=0,t=arguments,e=new this(t[i]);for(O=!1;e.s&&++i<t.length;)e=e.plus(t[i]);return O=!0,R(e,this.precision,this.rounding)}function vd(i){return new this(i).tan()}function xd(i){return new this(i).tanh()}function wd(i){return R(i=new this(i),i.e+1,1)}P[Symbol.for("nodejs.util.inspect.custom")]=P.toString;P[Symbol.toStringTag]="Decimal";var ni=P.constructor=Bl(gr);Bs=new ni(Bs);js=new ni(js);var Es={exports:{}};var _d=Es.exports,Io;function yd(){return Io||(Io=1,(function(i){(function(t,e){i.exports?i.exports=e():t.numeral=e()})(_d,function(){var t,e,s="2.0.6",n={},r={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},a={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function h(l,c){this._input=l,this._value=c}return t=function(l){var c,u,f,d;if(t.isNumeral(l))c=l.value();else if(l===0||typeof l>"u")c=0;else if(l===null||e.isNaN(l))c=null;else if(typeof l=="string")if(a.zeroFormat&&l===a.zeroFormat)c=0;else if(a.nullFormat&&l===a.nullFormat||!l.replace(/[^0-9]+/g,"").length)c=null;else{for(u in n)if(d=typeof n[u].regexps.unformat=="function"?n[u].regexps.unformat():n[u].regexps.unformat,d&&l.match(d)){f=n[u].unformat;break}f=f||t._.stringToNumber,c=f(l)}else c=Number(l)||null;return new h(l,c)},t.version=s,t.isNumeral=function(l){return l instanceof h},t._=e={numberToFormat:function(l,c,u){var f=r[t.options.currentLocale],d=!1,g=!1,p=0,m="",b=1e12,v=1e9,x=1e6,w=1e3,_="",S=!1,y,C,E,L,T,F,j;if(l=l||0,C=Math.abs(l),t._.includes(c,"(")?(d=!0,c=c.replace(/[\(|\)]/g,"")):(t._.includes(c,"+")||t._.includes(c,"-"))&&(T=t._.includes(c,"+")?c.indexOf("+"):l<0?c.indexOf("-"):-1,c=c.replace(/[\+|\-]/g,"")),t._.includes(c,"a")&&(y=c.match(/a(k|m|b|t)?/),y=y?y[1]:!1,t._.includes(c," a")&&(m=" "),c=c.replace(new RegExp(m+"a[kmbt]?"),""),C>=b&&!y||y==="t"?(m+=f.abbreviations.trillion,l=l/b):C<b&&C>=v&&!y||y==="b"?(m+=f.abbreviations.billion,l=l/v):C<v&&C>=x&&!y||y==="m"?(m+=f.abbreviations.million,l=l/x):(C<x&&C>=w&&!y||y==="k")&&(m+=f.abbreviations.thousand,l=l/w)),t._.includes(c,"[.]")&&(g=!0,c=c.replace("[.]",".")),E=l.toString().split(".")[0],L=c.split(".")[1],F=c.indexOf(","),p=(c.split(".")[0].split(",")[0].match(/0/g)||[]).length,L?(t._.includes(L,"[")?(L=L.replace("]",""),L=L.split("["),_=t._.toFixed(l,L[0].length+L[1].length,u,L[1].length)):_=t._.toFixed(l,L.length,u),E=_.split(".")[0],t._.includes(_,".")?_=f.delimiters.decimal+_.split(".")[1]:_="",g&&Number(_.slice(1))===0&&(_="")):E=t._.toFixed(l,0,u),m&&!y&&Number(E)>=1e3&&m!==f.abbreviations.trillion)switch(E=String(Number(E)/1e3),m){case f.abbreviations.thousand:m=f.abbreviations.million;break;case f.abbreviations.million:m=f.abbreviations.billion;break;case f.abbreviations.billion:m=f.abbreviations.trillion;break}if(t._.includes(E,"-")&&(E=E.slice(1),S=!0),E.length<p)for(var et=p-E.length;et>0;et--)E="0"+E;return F>-1&&(E=E.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),c.indexOf(".")===0&&(E=""),j=E+_+(m||""),d?j=(d&&S?"(":"")+j+(d&&S?")":""):T>=0?j=T===0?(S?"-":"+")+j:j+(S?"-":"+"):S&&(j="-"+j),j},stringToNumber:function(l){var c=r[a.currentLocale],u=l,f={thousand:3,million:6,billion:9,trillion:12},d,g,p;if(a.zeroFormat&&l===a.zeroFormat)g=0;else if(a.nullFormat&&l===a.nullFormat||!l.replace(/[^0-9]+/g,"").length)g=null;else{g=1,c.delimiters.decimal!=="."&&(l=l.replace(/\./g,"").replace(c.delimiters.decimal,"."));for(d in f)if(p=new RegExp("[^a-zA-Z]"+c.abbreviations[d]+"(?:\\)|(\\"+c.currency.symbol+")?(?:\\))?)?$"),u.match(p)){g*=Math.pow(10,f[d]);break}g*=(l.split("-").length+Math.min(l.split("(").length-1,l.split(")").length-1))%2?1:-1,l=l.replace(/[^0-9\.]+/g,""),g*=Number(l)}return g},isNaN:function(l){return typeof l=="number"&&isNaN(l)},includes:function(l,c){return l.indexOf(c)!==-1},insert:function(l,c,u){return l.slice(0,u)+c+l.slice(u)},reduce:function(l,c){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof c!="function")throw new TypeError(c+" is not a function");var u=Object(l),f=u.length>>>0,d=0,g;if(arguments.length===3)g=arguments[2];else{for(;d<f&&!(d in u);)d++;if(d>=f)throw new TypeError("Reduce of empty array with no initial value");g=u[d++]}for(;d<f;d++)d in u&&(g=c(g,u[d],d,u));return g},multiplier:function(l){var c=l.toString().split(".");return c.length<2?1:Math.pow(10,c[1].length)},correctionFactor:function(){var l=Array.prototype.slice.call(arguments);return l.reduce(function(c,u){var f=e.multiplier(u);return c>f?c:f},1)},toFixed:function(l,c,u,f){var d=l.toString().split("."),g=c-(f||0),p,m,b,v;return d.length===2?p=Math.min(Math.max(d[1].length,g),c):p=g,b=Math.pow(10,p),v=(u(l+"e+"+p)/b).toFixed(p),f>c-p&&(m=new RegExp("\\.?0{1,"+(f-(c-p))+"}$"),v=v.replace(m,"")),v}},t.options=a,t.formats=n,t.locales=r,t.locale=function(l){return l&&(a.currentLocale=l.toLowerCase()),a.currentLocale},t.localeData=function(l){if(!l)return r[a.currentLocale];if(l=l.toLowerCase(),!r[l])throw new Error("Unknown locale : "+l);return r[l]},t.reset=function(){for(var l in o)a[l]=o[l]},t.zeroFormat=function(l){a.zeroFormat=typeof l=="string"?l:null},t.nullFormat=function(l){a.nullFormat=typeof l=="string"?l:null},t.defaultFormat=function(l){a.defaultFormat=typeof l=="string"?l:"0.0"},t.register=function(l,c,u){if(c=c.toLowerCase(),this[l+"s"][c])throw new TypeError(c+" "+l+" already registered.");return this[l+"s"][c]=u,u},t.validate=function(l,c){var u,f,d,g,p,m,b,v;if(typeof l!="string"&&(l+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",l)),l=l.trim(),l.match(/^\d+$/))return!0;if(l==="")return!1;try{b=t.localeData(c)}catch{b=t.localeData(t.locale())}return d=b.currency.symbol,p=b.abbreviations,u=b.delimiters.decimal,b.delimiters.thousands==="."?f="\\.":f=b.delimiters.thousands,v=l.match(/^[^\d]+/),v!==null&&(l=l.substr(1),v[0]!==d)||(v=l.match(/[^\d]+$/),v!==null&&(l=l.slice(0,-1),v[0]!==p.thousand&&v[0]!==p.million&&v[0]!==p.billion&&v[0]!==p.trillion))?!1:(m=new RegExp(f+"{2}"),l.match(/[^\d.,]/g)?!1:(g=l.split(u),g.length>2?!1:g.length<2?!!g[0].match(/^\d+.*\d$/)&&!g[0].match(m):g[0].length===1?!!g[0].match(/^\d+$/)&&!g[0].match(m)&&!!g[1].match(/^\d+$/):!!g[0].match(/^\d+.*\d$/)&&!g[0].match(m)&&!!g[1].match(/^\d+$/)))},t.fn=h.prototype={clone:function(){return t(this)},format:function(l,c){var u=this._value,f=l||a.defaultFormat,d,g,p;if(c=c||Math.round,u===0&&a.zeroFormat!==null)g=a.zeroFormat;else if(u===null&&a.nullFormat!==null)g=a.nullFormat;else{for(d in n)if(f.match(n[d].regexps.format)){p=n[d].format;break}p=p||t._.numberToFormat,g=p(u,f,c)}return g},value:function(){return this._value},input:function(){return this._input},set:function(l){return this._value=Number(l),this},add:function(l){var c=e.correctionFactor.call(null,this._value,l);function u(f,d,g,p){return f+Math.round(c*d)}return this._value=e.reduce([this._value,l],u,0)/c,this},subtract:function(l){var c=e.correctionFactor.call(null,this._value,l);function u(f,d,g,p){return f-Math.round(c*d)}return this._value=e.reduce([l],u,Math.round(this._value*c))/c,this},multiply:function(l){function c(u,f,d,g){var p=e.correctionFactor(u,f);return Math.round(u*p)*Math.round(f*p)/Math.round(p*p)}return this._value=e.reduce([this._value,l],c,1),this},divide:function(l){function c(u,f,d,g){var p=e.correctionFactor(u,f);return Math.round(u*p)/Math.round(f*p)}return this._value=e.reduce([this._value,l],c),this},difference:function(l){return Math.abs(t(this._value).subtract(l).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(l){var c=l%10;return~~(l%100/10)===1?"th":c===1?"st":c===2?"nd":c===3?"rd":"th"},currency:{symbol:"$"}}),(function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(l,c,u){var f=t._.includes(c," BPS")?" ":"",d;return l=l*1e4,c=c.replace(/\s?BPS/,""),d=t._.numberToFormat(l,c,u),t._.includes(d,")")?(d=d.split(""),d.splice(-1,0,f+"BPS"),d=d.join("")):d=d+f+"BPS",d},unformat:function(l){return+(t._.stringToNumber(l)*1e-4).toFixed(15)}})})(),(function(){var l={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},c={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},u=l.suffixes.concat(c.suffixes.filter(function(d){return l.suffixes.indexOf(d)<0})),f=u.join("|");f="("+f.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(f)},format:function(d,g,p){var m,b=t._.includes(g,"ib")?c:l,v=t._.includes(g," b")||t._.includes(g," ib")?" ":"",x,w,_;for(g=g.replace(/\s?i?b/,""),x=0;x<=b.suffixes.length;x++)if(w=Math.pow(b.base,x),_=Math.pow(b.base,x+1),d===null||d===0||d>=w&&d<_){v+=b.suffixes[x],w>0&&(d=d/w);break}return m=t._.numberToFormat(d,g,p),m+v},unformat:function(d){var g=t._.stringToNumber(d),p,m;if(g){for(p=l.suffixes.length-1;p>=0;p--){if(t._.includes(d,l.suffixes[p])){m=Math.pow(l.base,p);break}if(t._.includes(d,c.suffixes[p])){m=Math.pow(c.base,p);break}}g*=m||1}return g}})})(),(function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(l,c,u){var f=t.locales[t.options.currentLocale],d={before:c.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:c.match(/([\+|\-|\)|\s|\$]*)$/)[0]},g,p,m;for(c=c.replace(/\s?\$\s?/,""),g=t._.numberToFormat(l,c,u),l>=0?(d.before=d.before.replace(/[\-\(]/,""),d.after=d.after.replace(/[\-\)]/,"")):l<0&&!t._.includes(d.before,"-")&&!t._.includes(d.before,"(")&&(d.before="-"+d.before),m=0;m<d.before.length;m++)switch(p=d.before[m],p){case"$":g=t._.insert(g,f.currency.symbol,m);break;case" ":g=t._.insert(g," ",m+f.currency.symbol.length-1);break}for(m=d.after.length-1;m>=0;m--)switch(p=d.after[m],p){case"$":g=m===d.after.length-1?g+f.currency.symbol:t._.insert(g,f.currency.symbol,-(d.after.length-(1+m)));break;case" ":g=m===d.after.length-1?g+" ":t._.insert(g," ",-(d.after.length-(1+m)+f.currency.symbol.length-1));break}return g}})})(),(function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(l,c,u){var f,d=typeof l=="number"&&!t._.isNaN(l)?l.toExponential():"0e+0",g=d.split("e");return c=c.replace(/e[\+|\-]{1}0/,""),f=t._.numberToFormat(Number(g[0]),c,u),f+"e"+g[1]},unformat:function(l){var c=t._.includes(l,"e+")?l.split("e+"):l.split("e-"),u=Number(c[0]),f=Number(c[1]);f=t._.includes(l,"e-")?f*=-1:f;function d(g,p,m,b){var v=t._.correctionFactor(g,p),x=g*v*(p*v)/(v*v);return x}return t._.reduce([u,Math.pow(10,f)],d,1)}})})(),(function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(l,c,u){var f=t.locales[t.options.currentLocale],d,g=t._.includes(c," o")?" ":"";return c=c.replace(/\s?o/,""),g+=f.ordinal(l),d=t._.numberToFormat(l,c,u),d+g}})})(),(function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(l,c,u){var f=t._.includes(c," %")?" ":"",d;return t.options.scalePercentBy100&&(l=l*100),c=c.replace(/\s?\%/,""),d=t._.numberToFormat(l,c,u),t._.includes(d,")")?(d=d.split(""),d.splice(-1,0,f+"%"),d=d.join("")):d=d+f+"%",d},unformat:function(l){var c=t._.stringToNumber(l);return t.options.scalePercentBy100?c*.01:c}})})(),(function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(l,c,u){var f=Math.floor(l/60/60),d=Math.floor((l-f*60*60)/60),g=Math.round(l-f*60*60-d*60);return f+":"+(d<10?"0"+d:d)+":"+(g<10?"0"+g:g)},unformat:function(l){var c=l.split(":"),u=0;return c.length===3?(u=u+Number(c[0])*60*60,u=u+Number(c[1])*60,u=u+Number(c[2])):c.length===2&&(u=u+Number(c[0])*60,u=u+Number(c[1])),Number(u)}})})(),t})})(Es)),Es.exports}var Md=yd();const zo=gu(Md),Te=zo.default||zo;async function jl(i){let{url:t,headers:e,method:s,body:n}=i;return e=e??{"Content-Type":"application/json"},s=s??"POST",n=n??{},await(await fetch(t,{method:s,headers:e,body:JSON.stringify(n)})).json()}function En(i,t){return Number(ni(i).add(ni(t)))}function Ur(i){const t=(i.days??0)*24*60*60*1e3,e=(i.hours??0)*60*60*1e3,s=(i.minutes??0)*60*1e3,n=(i.seconds??0)*1e3;return t+e+s+n}function Bo(){return new Date().getTime()}function Sd(i){const t=i>=0?"+"+i:"-"+i;return t.length===2?t[0]+"0"+t[1]:t}function ri(i,t){t=t??Pd(),console.assert(!isNaN(Number(t))),console.assert(t<=12&&t>=-12),t=Number.parseInt(String(t));const e=new Date(i+Ur({hours:t})).toISOString(),s=`${e.slice(0,10)} ${e.slice(11,23)} ${Sd(t)}`;return console.assert(s.length===27),s}function Pd(){return new Date().getTimezoneOffset()/-60}function jo(i,t){let e=Number.parseInt(i.slice(0,4)),s=Number.parseInt(i.slice(5,7));for(s+=t;s>12;)s-=12,e+=1;for(;s<1;)s+=12,e-=1;return e+"-"+(String(s).length===1?`0${s}`:`${s}`)}const U=kl({isLight:window.matchMedia("(prefers-color-scheme: light)").matches,candle:null,price:0,chg24Hour:0,position:null,isShowCandle:!1,isShowPrice:!1,isShowHistory:!1,isShowPosition:!1,isShowFills:!1});fr(U,"isLight",()=>{document.body.style.backgroundColor=U.isLight?"#FFFFFFFF":"#292929FF"});const Re={width:355,paddingLeft:5,paddingRight:5},Wt={WsUrl:"wss://api.hyperliquid.xyz/ws",InfoUrl:"https://api.hyperliquid.xyz/info",AccountAddress:"0x5B84b15A72096f7908B44A33d90FC03B59c02bb3"};async function Vl(i){return await jl({url:Wt.InfoUrl,body:i})}var K=(i=>(i.white="#FFFFFFFF",i.black="#292929FF",i.whiteGray="#FFFFFF99",i.blackGray="#505050FF",i.red="#F23645FF",i.green="#089981FF",i))(K||{});const ie=()=>({fsbc:st`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,fcc:st`
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    `,fColumnCenter:st`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,container:st`
      width: ${Re.width}px;
      padding-left: ${Re.paddingLeft}px;
      padding-right: ${Re.paddingRight}px;
    `,columnHeight:st`
      height: 30px;
    `});function Ji(i){return i+.5|0}const he=(i,t,e)=>Math.max(Math.min(i,e),t);function Si(i){return he(Ji(i*2.55),0,255)}function de(i){return he(Ji(i*255),0,255)}function Gt(i){return he(Ji(i/2.55)/100,0,1)}function Vo(i){return he(Ji(i*100),0,100)}const At={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},br=[..."0123456789ABCDEF"],Cd=i=>br[i&15],kd=i=>br[(i&240)>>4]+br[i&15],es=i=>(i&240)>>4===(i&15),Ed=i=>es(i.r)&&es(i.g)&&es(i.b)&&es(i.a);function Ld(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&At[i[1]]*17,g:255&At[i[2]]*17,b:255&At[i[3]]*17,a:t===5?At[i[4]]*17:255}:(t===7||t===9)&&(e={r:At[i[1]]<<4|At[i[2]],g:At[i[3]]<<4|At[i[4]],b:At[i[5]]<<4|At[i[6]],a:t===9?At[i[7]]<<4|At[i[8]]:255})),e}const Td=(i,t)=>i<255?t(i):"";function Rd(i){var t=Ed(i)?Cd:kd;return i?"#"+t(i.r)+t(i.g)+t(i.b)+Td(i.a,t):void 0}const Nd=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Wl(i,t,e){const s=t*Math.min(e,1-e),n=(r,o=(r+i/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Ad(i,t,e){const s=(n,r=(n+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function Dd(i,t,e){const s=Wl(i,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function Od(i,t,e,s,n){return i===n?(t-e)/s+(t<e?6:0):t===n?(e-i)/s+2:(i-t)/s+4}function Kr(i){const e=i.r/255,s=i.g/255,n=i.b/255,r=Math.max(e,s,n),o=Math.min(e,s,n),a=(r+o)/2;let h,l,c;return r!==o&&(c=r-o,l=a>.5?c/(2-r-o):c/(r+o),h=Od(e,s,n,c,r),h=h*60+.5),[h|0,l||0,a]}function Xr(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(de)}function Gr(i,t,e){return Xr(Wl,i,t,e)}function Fd(i,t,e){return Xr(Dd,i,t,e)}function Id(i,t,e){return Xr(Ad,i,t,e)}function Hl(i){return(i%360+360)%360}function zd(i){const t=Nd.exec(i);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?Si(+t[5]):de(+t[5]));const n=Hl(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=Fd(n,r,o):t[1]==="hsv"?s=Id(n,r,o):s=Gr(n,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function Bd(i,t){var e=Kr(i);e[0]=Hl(e[0]+t),e=Gr(e),i.r=e[0],i.g=e[1],i.b=e[2]}function jd(i){if(!i)return;const t=Kr(i),e=t[0],s=Vo(t[1]),n=Vo(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${n}%, ${Gt(i.a)})`:`hsl(${e}, ${s}%, ${n}%)`}const Wo={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ho={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Vd(){const i={},t=Object.keys(Ho),e=Object.keys(Wo);let s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<e.length;n++)r=e[n],a=a.replace(r,Wo[r]);r=parseInt(Ho[o],16),i[a]=[r>>16&255,r>>8&255,r&255]}return i}let is;function Wd(i){is||(is=Vd(),is.transparent=[0,0,0,0]);const t=is[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Hd=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $d(i){const t=Hd.exec(i);let e=255,s,n,r;if(t){if(t[7]!==s){const o=+t[7];e=t[8]?Si(o):he(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?Si(s):he(s,0,255)),n=255&(t[4]?Si(n):he(n,0,255)),r=255&(t[6]?Si(r):he(r,0,255)),{r:s,g:n,b:r,a:e}}}function Yd(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Gt(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Ln=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Ue=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Ud(i,t,e){const s=Ue(Gt(i.r)),n=Ue(Gt(i.g)),r=Ue(Gt(i.b));return{r:de(Ln(s+e*(Ue(Gt(t.r))-s))),g:de(Ln(n+e*(Ue(Gt(t.g))-n))),b:de(Ln(r+e*(Ue(Gt(t.b))-r))),a:i.a+e*(t.a-i.a)}}function ss(i,t,e){if(i){let s=Kr(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=Gr(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function $l(i,t){return i&&Object.assign(t||{},i)}function $o(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=de(i[3]))):(t=$l(i,{r:0,g:0,b:0,a:1}),t.a=de(t.a)),t}function Kd(i){return i.charAt(0)==="r"?$d(i):zd(i)}class ji{constructor(t){if(t instanceof ji)return t;const e=typeof t;let s;e==="object"?s=$o(t):e==="string"&&(s=Ld(t)||Wd(t)||Kd(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=$l(this._rgb);return t&&(t.a=Gt(t.a)),t}set rgb(t){this._rgb=$o(t)}rgbString(){return this._valid?Yd(this._rgb):void 0}hexString(){return this._valid?Rd(this._rgb):void 0}hslString(){return this._valid?jd(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,n=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,h=s.a-n.a,l=((a*h===-1?a:(a+h)/(1+a*h))+1)/2;r=1-l,s.r=255&l*s.r+r*n.r+.5,s.g=255&l*s.g+r*n.g+.5,s.b=255&l*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=Ud(this._rgb,t._rgb,e)),this}clone(){return new ji(this.rgb)}alpha(t){return this._rgb.a=de(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ji(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ss(this._rgb,2,t),this}darken(t){return ss(this._rgb,2,-t),this}saturate(t){return ss(this._rgb,1,t),this}desaturate(t){return ss(this._rgb,1,-t),this}rotate(t){return Bd(this._rgb,t),this}}function Ut(){}const Xd=(()=>{let i=0;return()=>i++})();function B(i){return i==null}function Z(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function V(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function nt(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Tt(i,t){return nt(i)?i:t}function z(i,t){return typeof i>"u"?t:i}const Gd=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,Yl=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function q(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Y(i,t,e,s){let n,r,o;if(Z(i))for(r=i.length,n=0;n<r;n++)t.call(e,i[n],n);else if(V(i))for(o=Object.keys(i),r=o.length,n=0;n<r;n++)t.call(e,i[o[n]],o[n])}function Ws(i,t){let e,s,n,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],r=t[e],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Hs(i){if(Z(i))return i.map(Hs);if(V(i)){const t=Object.create(null),e=Object.keys(i),s=e.length;let n=0;for(;n<s;++n)t[e[n]]=Hs(i[e[n]]);return t}return i}function Ul(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Jd(i,t,e,s){if(!Ul(i))return;const n=t[i],r=e[i];V(n)&&V(r)?Vi(n,r,s):t[i]=Hs(r)}function Vi(i,t,e){const s=Z(t)?t:[t],n=s.length;if(!V(i))return i;e=e||{};const r=e.merger||Jd;let o;for(let a=0;a<n;++a){if(o=s[a],!V(o))continue;const h=Object.keys(o);for(let l=0,c=h.length;l<c;++l)r(h[l],i,o,e)}return i}function Li(i,t){return Vi(i,t,{merger:qd})}function qd(i,t,e){if(!Ul(i))return;const s=t[i],n=e[i];V(s)&&V(n)?Li(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Hs(n))}const Yo={"":i=>i,x:i=>i.x,y:i=>i.y};function Qd(i){const t=i.split("."),e=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function Zd(i){const t=Qd(i);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function pe(i,t){return(Yo[t]||(Yo[t]=Zd(t)))(i)}function Jr(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Wi=i=>typeof i<"u",me=i=>typeof i=="function",Uo=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function tg(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const W=Math.PI,Q=2*W,eg=Q+W,$s=Number.POSITIVE_INFINITY,ig=W/180,rt=W/2,ye=W/4,Ko=W*2/3,le=Math.log10,$t=Math.sign;function Ti(i,t,e){return Math.abs(i-t)<e}function Xo(i){const t=Math.round(i);i=Ti(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(le(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function sg(i){const t=[],e=Math.sqrt(i);let s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((n,r)=>n-r).pop(),t}function ng(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function oi(i){return!ng(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function rg(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function Kl(i,t,e){let s,n,r;for(s=0,n=i.length;s<n;s++)r=i[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Dt(i){return i*(W/180)}function qr(i){return i*(180/W)}function Go(i){if(!nt(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Xl(i,t){const e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s);let r=Math.atan2(s,e);return r<-.5*W&&(r+=Q),{angle:r,distance:n}}function vr(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function og(i,t){return(i-t+eg)%Q-W}function xt(i){return(i%Q+Q)%Q}function Hi(i,t,e,s){const n=xt(i),r=xt(t),o=xt(e),a=xt(r-n),h=xt(o-n),l=xt(n-r),c=xt(n-o);return n===r||n===o||s&&r===o||a>h&&l<c}function ut(i,t,e){return Math.max(t,Math.min(e,i))}function ag(i){return ut(i,-32768,32767)}function qt(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function Qr(i,t,e){e=e||(o=>i[o]<t);let s=i.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,e(r)?n=r:s=r;return{lo:n,hi:s}}const Qt=(i,t,e,s)=>Qr(i,e,s?n=>{const r=i[n][t];return r<e||r===e&&i[n+1][t]===e}:n=>i[n][t]<e),hg=(i,t,e)=>Qr(i,e,s=>i[s][t]>=e);function lg(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}const Gl=["push","pop","shift","splice","unshift"];function cg(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Gl.forEach(e=>{const s="_onData"+Jr(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return i._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Jo(i,t){const e=i._chartjs;if(!e)return;const s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(Gl.forEach(r=>{delete i[r]}),delete i._chartjs)}function Jl(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const ql=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function Ql(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,ql.call(window,()=>{s=!1,i.apply(t,e)}))}}function ug(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}const Zr=i=>i==="start"?"left":i==="end"?"right":"center",vt=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,fg=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function Zl(i,t,e){const s=t.length;let n=0,r=s;if(i._sorted){const{iScale:o,vScale:a,_parsed:h}=i,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,c=o.axis,{min:u,max:f,minDefined:d,maxDefined:g}=o.getUserBounds();if(d){if(n=Math.min(Qt(h,c,u).lo,e?s:Qt(t,c,o.getPixelForValue(u)).lo),l){const p=h.slice(0,n+1).reverse().findIndex(m=>!B(m[a.axis]));n-=Math.max(0,p)}n=ut(n,0,s-1)}if(g){let p=Math.max(Qt(h,o.axis,f,!0).hi+1,e?0:Qt(t,c,o.getPixelForValue(f),!0).hi+1);if(l){const m=h.slice(p-1).findIndex(b=>!B(b[a.axis]));p+=Math.max(0,m)}r=ut(p,n,s)-n}else r=s-n}return{start:n,count:r}}function tc(i){const{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),r}const ns=i=>i===0||i===1,qo=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Q/e)),Qo=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Q/e)+1,Ri={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*rt)+1,easeOutSine:i=>Math.sin(i*rt),easeInOutSine:i=>-.5*(Math.cos(W*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>ns(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>ns(i)?i:qo(i,.075,.3),easeOutElastic:i=>ns(i)?i:Qo(i,.075,.3),easeInOutElastic(i){return ns(i)?i:i<.5?.5*qo(i*2,.1125,.45):.5+.5*Qo(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-Ri.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Ri.easeInBounce(i*2)*.5:Ri.easeOutBounce(i*2-1)*.5+.5};function to(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Zo(i){return to(i)?i:new ji(i)}function Tn(i){return to(i)?i:new ji(i).saturate(.5).darken(.1).hexString()}const dg=["x","y","borderWidth","radius","tension"],gg=["color","borderColor","backgroundColor"];function pg(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:gg},numbers:{type:"number",properties:dg}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mg(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ta=new Map;function bg(i,t){t=t||{};const e=i+JSON.stringify(t);let s=ta.get(e);return s||(s=new Intl.NumberFormat(i,t),ta.set(e,s)),s}function qi(i,t,e){return bg(t,e).format(i)}const ec={values(i){return Z(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const s=this.chart.options.locale;let n,r=i;if(e.length>1){const l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(n="scientific"),r=vg(i,e)}const o=le(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(h,this.options.ticks.format),qi(i,s,h)},logarithmic(i,t,e){if(i===0)return"0";const s=e[t].significand||i/Math.pow(10,Math.floor(le(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?ec.numeric.call(this,i,t,e):""}};function vg(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var cn={formatters:ec};function xg(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Fe=Object.create(null),xr=Object.create(null);function Ni(i,t){if(!t)return i;const e=t.split(".");for(let s=0,n=e.length;s<n;++s){const r=e[s];i=i[r]||(i[r]=Object.create(null))}return i}function Rn(i,t,e){return typeof t=="string"?Vi(Ni(i,t),e):Vi(Ni(i,""),t)}class wg{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>Tn(n.backgroundColor),this.hoverBorderColor=(s,n)=>Tn(n.borderColor),this.hoverColor=(s,n)=>Tn(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Rn(this,t,e)}get(t){return Ni(this,t)}describe(t,e){return Rn(xr,t,e)}override(t,e){return Rn(Fe,t,e)}route(t,e,s,n){const r=Ni(this,t),o=Ni(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[a],l=o[n];return V(h)?Object.assign({},l,h):z(h,l)},set(h){this[a]=h}}})}apply(t){t.forEach(e=>e(this))}}var tt=new wg({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pg,mg,xg]);function _g(i){return!i||B(i.size)||B(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Ys(i,t,e,s,n){let r=t[n];return r||(r=t[n]=i.measureText(n).width,e.push(n)),r>s&&(s=r),s}function yg(i,t,e,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let o=0;const a=e.length;let h,l,c,u,f;for(h=0;h<a;h++)if(u=e[h],u!=null&&!Z(u))o=Ys(i,n,r,o,u);else if(Z(u))for(l=0,c=u.length;l<c;l++)f=u[l],f!=null&&!Z(f)&&(o=Ys(i,n,r,o,f));i.restore();const d=r.length/2;if(d>e.length){for(h=0;h<d;h++)delete n[r[h]];r.splice(0,d)}return o}function Me(i,t,e){const s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function ea(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function wr(i,t,e,s){ic(i,t,e,s,null)}function ic(i,t,e,s,n){let r,o,a,h,l,c,u,f;const d=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*ig;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(m),i.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),i.restore();return}if(!(isNaN(p)||p<=0)){switch(i.beginPath(),d){default:n?i.ellipse(e,s,n/2,p,0,0,Q):i.arc(e,s,p,0,Q),i.closePath();break;case"triangle":c=n?n/2:p,i.moveTo(e+Math.sin(m)*c,s-Math.cos(m)*p),m+=Ko,i.lineTo(e+Math.sin(m)*c,s-Math.cos(m)*p),m+=Ko,i.lineTo(e+Math.sin(m)*c,s-Math.cos(m)*p),i.closePath();break;case"rectRounded":l=p*.516,h=p-l,o=Math.cos(m+ye)*h,u=Math.cos(m+ye)*(n?n/2-l:h),a=Math.sin(m+ye)*h,f=Math.sin(m+ye)*(n?n/2-l:h),i.arc(e-u,s-a,l,m-W,m-rt),i.arc(e+f,s-o,l,m-rt,m),i.arc(e+u,s+a,l,m,m+rt),i.arc(e-f,s+o,l,m+rt,m+W),i.closePath();break;case"rect":if(!g){h=Math.SQRT1_2*p,c=n?n/2:h,i.rect(e-c,s-h,2*c,2*h);break}m+=ye;case"rectRot":u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(n?n/2:p),i.moveTo(e-u,s-a),i.lineTo(e+f,s-o),i.lineTo(e+u,s+a),i.lineTo(e-f,s+o),i.closePath();break;case"crossRot":m+=ye;case"cross":u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(n?n/2:p),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+f,s-o),i.lineTo(e-f,s+o);break;case"star":u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(n?n/2:p),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+f,s-o),i.lineTo(e-f,s+o),m+=ye,u=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(n?n/2:p),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+f,s-o),i.lineTo(e-f,s+o);break;case"line":o=n?n/2:Math.cos(m)*p,a=Math.sin(m)*p,i.moveTo(e-o,s-a),i.lineTo(e+o,s+a);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(m)*(n?n/2:p),s+Math.sin(m)*p);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Zt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function un(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function fn(i){i.restore()}function Mg(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){const r=(t.x+e.x)/2;i.lineTo(r,t.y),i.lineTo(r,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Sg(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Pg(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),B(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function Cg(i,t,e,s,n){if(n.strikethrough||n.underline){const r=i.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,h=e-r.actualBoundingBoxAscent,l=e+r.actualBoundingBoxDescent,c=n.strikethrough?(h+l)/2:l;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(o,c),i.lineTo(a,c),i.stroke()}}function kg(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Ie(i,t,e,s,n,r={}){const o=Z(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let h,l;for(i.save(),i.font=n.string,Pg(i,r),h=0;h<o.length;++h)l=o[h],r.backdrop&&kg(i,r.backdrop),a&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),B(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(l,e,s,r.maxWidth)),i.fillText(l,e,s,r.maxWidth),Cg(i,e,s,l,r),s+=Number(n.lineHeight);i.restore()}function $i(i,t){const{x:e,y:s,w:n,h:r,radius:o}=t;i.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*W,W,!0),i.lineTo(e,s+r-o.bottomLeft),i.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,W,rt,!0),i.lineTo(e+n-o.bottomRight,s+r),i.arc(e+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,rt,0,!0),i.lineTo(e+n,s+o.topRight),i.arc(e+n-o.topRight,s+o.topRight,o.topRight,0,-rt,!0),i.lineTo(e+o.topLeft,s)}const Eg=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Lg=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tg(i,t){const e=(""+i).match(Eg);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const Rg=i=>+i||0;function eo(i,t){const e={},s=V(t),n=s?Object.keys(t):t,r=V(i)?s?o=>z(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of n)e[o]=Rg(r(o));return e}function sc(i){return eo(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Ne(i){return eo(i,["topLeft","topRight","bottomLeft","bottomRight"])}function yt(i){const t=sc(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ct(i,t){i=i||{},t=t||tt.font;let e=z(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=z(i.style,t.style);s&&!(""+s).match(Lg)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:z(i.family,t.family),lineHeight:Tg(z(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:z(i.weight,t.weight),string:""};return n.string=_g(n),n}function Pi(i,t,e,s){let n,r,o;for(n=0,r=i.length;n<r;++n)if(o=i[n],o!==void 0&&o!==void 0)return o}function Ng(i,t,e){const{min:s,max:n}=i,r=Yl(t,(n-s)/2),o=(a,h)=>e&&a===0?0:a+h;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function ve(i,t){return Object.assign(Object.create(i),t)}function io(i,t=[""],e,s,n=()=>i[0]){const r=e||i;typeof s>"u"&&(s=ac("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:s,_getTarget:n,override:a=>io([a,...i],t,r,s)};return new Proxy(o,{deleteProperty(a,h){return delete a[h],delete a._keys,delete i[0][h],!0},get(a,h){return rc(a,h,()=>jg(h,t,i,a))},getOwnPropertyDescriptor(a,h){return Reflect.getOwnPropertyDescriptor(a._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,h){return sa(a).includes(h)},ownKeys(a){return sa(a)},set(a,h,l){const c=a._storage||(a._storage=n());return a[h]=c[h]=l,delete a._keys,!0}})}function ai(i,t,e,s){const n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:nc(i,s),setContext:r=>ai(i,r,e,s),override:r=>ai(i.override(r),t,e,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete i[o],!0},get(r,o,a){return rc(r,o,()=>Dg(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(r,o,a){return i[o]=a,delete r[o],!0}})}function nc(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:me(e)?e:()=>e,isIndexable:me(s)?s:()=>s}}const Ag=(i,t)=>i?i+Jr(t):t,so=(i,t)=>V(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rc(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const s=e();return i[t]=s,s}function Dg(i,t,e){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=i;let a=s[t];return me(a)&&o.isScriptable(t)&&(a=Og(t,a,i,e)),Z(a)&&a.length&&(a=Fg(t,a,i,o.isIndexable)),so(t,a)&&(a=ai(a,n,r&&r[t],o)),a}function Og(i,t,e,s){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let h=t(r,o||s);return a.delete(i),so(i,h)&&(h=no(n._scopes,n,i,h)),h}function Fg(i,t,e,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&s(i))return t[r.index%t.length];if(V(t[0])){const h=t,l=n._scopes.filter(c=>c!==h);t=[];for(const c of h){const u=no(l,n,i,c);t.push(ai(u,r,o&&o[i],a))}}return t}function oc(i,t,e){return me(i)?i(t,e):i}const Ig=(i,t)=>i===!0?t:typeof i=="string"?pe(t,i):void 0;function zg(i,t,e,s,n){for(const r of t){const o=Ig(e,r);if(o){i.add(o);const a=oc(o._fallback,e,n);if(typeof a<"u"&&a!==e&&a!==s)return a}else if(o===!1&&typeof s<"u"&&e!==s)return null}return!1}function no(i,t,e,s){const n=t._rootScopes,r=oc(t._fallback,e,s),o=[...i,...n],a=new Set;a.add(s);let h=ia(a,o,e,r||e,s);return h===null||typeof r<"u"&&r!==e&&(h=ia(a,o,r,h,s),h===null)?!1:io(Array.from(a),[""],n,r,()=>Bg(t,e,s))}function ia(i,t,e,s,n){for(;e;)e=zg(i,t,e,s,n);return e}function Bg(i,t,e){const s=i._getTarget();t in s||(s[t]={});const n=s[t];return Z(n)&&V(e)?e:n||{}}function jg(i,t,e,s){let n;for(const r of t)if(n=ac(Ag(r,i),e),typeof n<"u")return so(i,n)?no(e,s,i,n):n}function ac(i,t){for(const e of t){if(!e)continue;const s=e[i];if(typeof s<"u")return s}}function sa(i){let t=i._keys;return t||(t=i._keys=Vg(i._scopes)),t}function Vg(i){const t=new Set;for(const e of i)for(const s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function hc(i,t,e,s){const{iScale:n}=i,{key:r="r"}=this._parsing,o=new Array(s);let a,h,l,c;for(a=0,h=s;a<h;++a)l=a+e,c=t[l],o[a]={r:n.parse(pe(c,r),l)};return o}const Wg=Number.EPSILON||1e-14,hi=(i,t)=>t<i.length&&!i[t].skip&&i[t],lc=i=>i==="x"?"y":"x";function Hg(i,t,e,s){const n=i.skip?t:i,r=t,o=e.skip?t:e,a=vr(r,n),h=vr(o,r);let l=a/(a+h),c=h/(a+h);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=s*l,f=s*c;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+f*(o.x-n.x),y:r.y+f*(o.y-n.y)}}}function $g(i,t,e){const s=i.length;let n,r,o,a,h,l=hi(i,0);for(let c=0;c<s-1;++c)if(h=l,l=hi(i,c+1),!(!h||!l)){if(Ti(t[c],0,Wg)){e[c]=e[c+1]=0;continue}n=e[c]/t[c],r=e[c+1]/t[c],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[c]=n*o*t[c],e[c+1]=r*o*t[c])}}function Yg(i,t,e="x"){const s=lc(e),n=i.length;let r,o,a,h=hi(i,0);for(let l=0;l<n;++l){if(o=a,a=h,h=hi(i,l+1),!a)continue;const c=a[e],u=a[s];o&&(r=(c-o[e])/3,a[`cp1${e}`]=c-r,a[`cp1${s}`]=u-r*t[l]),h&&(r=(h[e]-c)/3,a[`cp2${e}`]=c+r,a[`cp2${s}`]=u+r*t[l])}}function Ug(i,t="x"){const e=lc(t),s=i.length,n=Array(s).fill(0),r=Array(s);let o,a,h,l=hi(i,0);for(o=0;o<s;++o)if(a=h,h=l,l=hi(i,o+1),!!h){if(l){const c=l[t]-h[t];n[o]=c!==0?(l[e]-h[e])/c:0}r[o]=a?l?$t(n[o-1])!==$t(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}$g(i,n,r),Yg(i,r,t)}function rs(i,t,e){return Math.max(Math.min(i,e),t)}function Kg(i,t){let e,s,n,r,o,a=Zt(i[0],t);for(e=0,s=i.length;e<s;++e)o=r,r=a,a=e<s-1&&Zt(i[e+1],t),r&&(n=i[e],o&&(n.cp1x=rs(n.cp1x,t.left,t.right),n.cp1y=rs(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=rs(n.cp2x,t.left,t.right),n.cp2y=rs(n.cp2y,t.top,t.bottom)))}function Xg(i,t,e,s,n){let r,o,a,h;if(t.spanGaps&&(i=i.filter(l=>!l.skip)),t.cubicInterpolationMode==="monotone")Ug(i,n);else{let l=s?i[i.length-1]:i[0];for(r=0,o=i.length;r<o;++r)a=i[r],h=Hg(l,a,i[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=h.previous.x,a.cp1y=h.previous.y,a.cp2x=h.next.x,a.cp2y=h.next.y,l=a}t.capBezierPoints&&Kg(i,e)}function ro(){return typeof window<"u"&&typeof document<"u"}function oo(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Us(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}const dn=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Gg(i,t){return dn(i).getPropertyValue(t)}const Jg=["top","right","bottom","left"];function Ae(i,t,e){const s={};e=e?"-"+e:"";for(let n=0;n<4;n++){const r=Jg[n];s[r]=parseFloat(i[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const qg=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Qg(i,t){const e=i.touches,s=e&&e.length?e[0]:i,{offsetX:n,offsetY:r}=s;let o=!1,a,h;if(qg(n,r,i.target))a=n,h=r;else{const l=t.getBoundingClientRect();a=s.clientX-l.left,h=s.clientY-l.top,o=!0}return{x:a,y:h,box:o}}function Ee(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:s}=t,n=dn(e),r=n.boxSizing==="border-box",o=Ae(n,"padding"),a=Ae(n,"border","width"),{x:h,y:l,box:c}=Qg(i,e),u=o.left+(c&&a.left),f=o.top+(c&&a.top);let{width:d,height:g}=t;return r&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((h-u)/d*e.width/s),y:Math.round((l-f)/g*e.height/s)}}function Zg(i,t,e){let s,n;if(t===void 0||e===void 0){const r=i&&oo(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{const o=r.getBoundingClientRect(),a=dn(r),h=Ae(a,"border","width"),l=Ae(a,"padding");t=o.width-l.width-h.width,e=o.height-l.height-h.height,s=Us(a.maxWidth,r,"clientWidth"),n=Us(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||$s,maxHeight:n||$s}}const ce=i=>Math.round(i*10)/10;function tp(i,t,e,s){const n=dn(i),r=Ae(n,"margin"),o=Us(n.maxWidth,i,"clientWidth")||$s,a=Us(n.maxHeight,i,"clientHeight")||$s,h=Zg(i,t,e);let{width:l,height:c}=h;if(n.boxSizing==="content-box"){const f=Ae(n,"border","width"),d=Ae(n,"padding");l-=d.width+f.width,c-=d.height+f.height}return l=Math.max(0,l-r.width),c=Math.max(0,s?l/s:c-r.height),l=ce(Math.min(l,o,h.maxWidth)),c=ce(Math.min(c,a,h.maxHeight)),l&&!c&&(c=ce(l/2)),(t!==void 0||e!==void 0)&&s&&h.height&&c>h.height&&(c=h.height,l=ce(Math.floor(c*s))),{width:l,height:c}}function na(i,t,e){const s=t||1,n=ce(i.height*s),r=ce(i.width*s);i.height=ce(i.height),i.width=ce(i.width);const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(i.currentDevicePixelRatio=s,o.height=n,o.width=r,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const ep=(function(){let i=!1;try{const t={get passive(){return i=!0,!1}};ro()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function ra(i,t){const e=Gg(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Le(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function ip(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function sp(i,t,e,s){const n={x:i.cp2x,y:i.cp2y},r={x:t.cp1x,y:t.cp1y},o=Le(i,n,e),a=Le(n,r,e),h=Le(r,t,e),l=Le(o,a,e),c=Le(a,h,e);return Le(l,c,e)}const np=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},rp=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function ti(i,t,e){return i?np(t,e):rp()}function cc(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function uc(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function fc(i){return i==="angle"?{between:Hi,compare:og,normalize:xt}:{between:qt,compare:(t,e)=>t-e,normalize:t=>t}}function oa({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:n}}function op(i,t,e){const{property:s,start:n,end:r}=e,{between:o,normalize:a}=fc(s),h=t.length;let{start:l,end:c,loop:u}=i,f,d;if(u){for(l+=h,c+=h,f=0,d=h;f<d&&o(a(t[l%h][s]),n,r);++f)l--,c--;l%=h,c%=h}return c<l&&(c+=h),{start:l,end:c,loop:u,style:i.style}}function dc(i,t,e){if(!e)return[i];const{property:s,start:n,end:r}=e,o=t.length,{compare:a,between:h,normalize:l}=fc(s),{start:c,end:u,loop:f,style:d}=op(i,t,e),g=[];let p=!1,m=null,b,v,x;const w=()=>h(n,x,b)&&a(n,x)!==0,_=()=>a(r,b)===0||h(r,x,b),S=()=>p||w(),y=()=>!p||_();for(let C=c,E=c;C<=u;++C)v=t[C%o],!v.skip&&(b=l(v[s]),b!==x&&(p=h(b,n,r),m===null&&S()&&(m=a(b,n)===0?C:E),m!==null&&y()&&(g.push(oa({start:m,end:C,loop:f,count:o,style:d})),m=null),E=C,x=b));return m!==null&&g.push(oa({start:m,end:u,loop:f,count:o,style:d})),g}function gc(i,t){const e=[],s=i.segments;for(let n=0;n<s.length;n++){const r=dc(s[n],i.points,t);r.length&&e.push(...r)}return e}function ap(i,t,e,s){let n=0,r=t-1;if(e&&!s)for(;n<t&&!i[n].skip;)n++;for(;n<t&&i[n].skip;)n++;for(n%=t,e&&(r+=n);r>n&&i[r%t].skip;)r--;return r%=t,{start:n,end:r}}function hp(i,t,e,s){const n=i.length,r=[];let o=t,a=i[t],h;for(h=t+1;h<=e;++h){const l=i[h%n];l.skip||l.stop?a.skip||(s=!1,r.push({start:t%n,end:(h-1)%n,loop:s}),t=o=l.stop?h:null):(o=h,a.skip&&(t=h)),a=l}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function lp(i,t){const e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];const r=!!i._loop,{start:o,end:a}=ap(e,n,r,s);if(s===!0)return aa(i,[{start:o,end:a,loop:r}],e,t);const h=a<o?a+n:a,l=!!i._fullLoop&&o===0&&a===n-1;return aa(i,hp(e,o,h,l),e,t)}function aa(i,t,e,s){return!s||!s.setContext||!e?t:cp(i,t,e,s)}function cp(i,t,e,s){const n=i._chart.getContext(),r=ha(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,h=e.length,l=[];let c=r,u=t[0].start,f=u;function d(g,p,m,b){const v=a?-1:1;if(g!==p){for(g+=h;e[g%h].skip;)g-=v;for(;e[p%h].skip;)p+=v;g%h!==p%h&&(l.push({start:g%h,end:p%h,loop:m,style:b}),c=b,u=p%h)}}for(const g of t){u=a?u:g.start;let p=e[u%h],m;for(f=u+1;f<=g.end;f++){const b=e[f%h];m=ha(s.setContext(ve(n,{type:"segment",p0:p,p1:b,p0DataIndex:(f-1)%h,p1DataIndex:f%h,datasetIndex:o}))),up(m,c)&&d(u,f-1,g.loop,c),p=b,c=m}u<f-1&&d(u,f-1,g.loop,c)}return l}function ha(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function up(i,t){if(!t)return!1;const e=[],s=function(n,r){return to(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(i,s)!==JSON.stringify(t,s)}function os(i,t,e){return i.options.clip?i[e]:t[e]}function fp(i,t){const{xScale:e,yScale:s}=i;return e&&s?{left:os(e,t,"left"),right:os(e,t,"right"),top:os(s,t,"top"),bottom:os(s,t,"bottom")}:t}function pc(i,t){const e=t._clip;if(e.disabled)return!1;const s=fp(t,i.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:s.bottom+(e.bottom===!0?0:e.bottom)}}class dp{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){const r=e.listeners[n],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ql.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,h;for(;o>=0;--o)h=r[o],h._active?(h._total>s.duration&&(s.duration=h._total),h.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Kt=new dp;const la="transparent",gp={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const s=Zo(i||la),n=s.valid&&Zo(t||la);return n&&n.valid?n.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class pp{constructor(t,e,s,n){const r=e[s];n=Pi([t.to,n,r,t.from]);const o=Pi([t.from,r,n]);this._active=!0,this._fn=t.fn||gp[t.type||typeof o],this._easing=Ri[t.easing]||Ri.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Pi([t.to,e,n,t.from]),this._from=Pi([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let h;if(this._active=r!==a&&(o||e<s),!this._active){this._target[n]=a,this._notify(!0);return}if(e<0){this._target[n]=r;return}h=e/s%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[n]=this._fn(r,a,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}}class mc{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!V(t))return;const e=Object.keys(tt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!V(r))return;const o={};for(const a of e)o[a]=r[a];(Z(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){const s=e.options,n=bp(t,s);if(!n)return[];const r=this._createAnimations(n,s);return s.$shared&&mp(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){const s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let h;for(h=o.length-1;h>=0;--h){const l=o[h];if(l.charAt(0)==="$")continue;if(l==="options"){n.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const f=s.get(l);if(u)if(f&&u.active()){u.update(f,c,a);continue}else u.cancel();if(!f||!f.duration){t[l]=c;continue}r[l]=u=new pp(f,t,l,c),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return Kt.add(this._chart,s),!0}}function mp(i,t){const e=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const r=i[s[n]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function bp(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function ca(i,t){const e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function vp(i,t,e){if(e===!1)return!1;const s=ca(i,e),n=ca(t,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function xp(i){let t,e,s,n;return V(i)?(t=i.top,e=i.right,s=i.bottom,n=i.left):t=e=s=n=i,{top:t,right:e,bottom:s,left:n,disabled:i===!1}}function bc(i,t){const e=[],s=i._getSortedDatasetMetas(t);let n,r;for(n=0,r=s.length;n<r;++n)e.push(s[n].index);return e}function ua(i,t,e,s={}){const n=i.keys,r=s.mode==="single";let o,a,h,l;if(t===null)return;let c=!1;for(o=0,a=n.length;o<a;++o){if(h=+n[o],h===e){if(c=!0,s.all)continue;break}l=i.values[h],nt(l)&&(r||t===0||$t(t)===$t(l))&&(t+=l)}return!c&&!s.all?0:t}function wp(i,t){const{iScale:e,vScale:s}=t,n=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(i),a=new Array(o.length);let h,l,c;for(h=0,l=o.length;h<l;++h)c=o[h],a[h]={[n]:c,[r]:i[c]};return a}function Nn(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function _p(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function yp(i){const{min:t,max:e,minDefined:s,maxDefined:n}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function Mp(i,t,e){const s=i[t]||(i[t]={});return s[e]||(s[e]={})}function fa(i,t,e,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const r=i[n.index];if(e&&r>0||!e&&r<0)return n.index}return null}function da(i,t){const{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,h=r.axis,l=o.axis,c=_p(r,o,s),u=t.length;let f;for(let d=0;d<u;++d){const g=t[d],{[h]:p,[l]:m}=g,b=g._stacks||(g._stacks={});f=b[l]=Mp(n,c,p),f[a]=m,f._top=fa(f,o,!0,s.type),f._bottom=fa(f,o,!1,s.type);const v=f._visualValues||(f._visualValues={});v[a]=m}}function An(i,t){const e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function Sp(i,t){return ve(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Pp(i,t,e){return ve(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function bi(i,t){const e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(const n of t){const r=n._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}const Dn=i=>i==="reset"||i==="none",ga=(i,t)=>t?i:Object.assign({},i),Cp=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:bc(e,!0),values:null};class xe{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Nn(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&bi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),n=(u,f,d,g)=>u==="x"?f:u==="r"?g:d,r=e.xAxisID=z(s.xAxisID,An(t,"x")),o=e.yAxisID=z(s.yAxisID,An(t,"y")),a=e.rAxisID=z(s.rAxisID,An(t,"r")),h=e.indexAxis,l=e.iAxisID=n(h,r,o,a),c=e.vAxisID=n(h,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Jo(this._data,this),t._stacked&&bi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(V(e)){const n=this._cachedMeta;this._data=wp(e,n)}else if(s!==e){if(s){Jo(s,this);const n=this._cachedMeta;bi(n),n._parsed=[]}e&&Object.isExtensible(e)&&cg(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const r=e._stacked;e._stacked=Nn(e.vScale,e),e.stack!==s.stack&&(n=!0,bi(e),e.stack=s.stack),this._resyncElements(t),(n||r!==e._stacked)&&(da(this,e._parsed),e._stacked=Nn(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:n}=this,{iScale:r,_stacked:o}=s,a=r.axis;let h=t===0&&e===n.length?!0:s._sorted,l=t>0&&s._parsed[t-1],c,u,f;if(this._parsing===!1)s._parsed=n,s._sorted=!0,f=n;else{Z(n[t])?f=this.parseArrayData(s,n,t,e):V(n[t])?f=this.parseObjectData(s,n,t,e):f=this.parsePrimitiveData(s,n,t,e);const d=()=>u[a]===null||l&&u[a]<l[a];for(c=0;c<e;++c)s._parsed[c+t]=u=f[c],h&&(d()&&(h=!1),l=u);s._sorted=h}o&&da(this,f)}parsePrimitiveData(t,e,s,n){const{iScale:r,vScale:o}=t,a=r.axis,h=o.axis,l=r.getLabels(),c=r===o,u=new Array(n);let f,d,g;for(f=0,d=n;f<d;++f)g=f+s,u[f]={[a]:c||r.parse(l[g],g),[h]:o.parse(e[g],g)};return u}parseArrayData(t,e,s,n){const{xScale:r,yScale:o}=t,a=new Array(n);let h,l,c,u;for(h=0,l=n;h<l;++h)c=h+s,u=e[c],a[h]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,e,s,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:h="y"}=this._parsing,l=new Array(n);let c,u,f,d;for(c=0,u=n;c<u;++c)f=c+s,d=e[f],l[c]={x:r.parse(pe(d,a),f),y:o.parse(pe(d,h),f)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const n=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:bc(n,!0),values:e._stacks[t.axis]._visualValues};return ua(a,o,r.index,{mode:s})}updateRangeFromParsed(t,e,s,n){const r=s[e.axis];let o=r===null?NaN:r;const a=n&&s._stacks[e.axis];n&&a&&(n.values=a,o=ua(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const s=this._cachedMeta,n=s._parsed,r=s._sorted&&t===s.iScale,o=n.length,a=this._getOtherScale(t),h=Cp(e,s,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=yp(a);let f,d;function g(){d=n[f];const p=d[a.axis];return!nt(d[t.axis])||c>p||u<p}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(l,t,d,h),r));++f);if(r){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(l,t,d,h);break}}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let n,r,o;for(n=0,r=e.length;n<r;++n)o=e[n][t.axis],nt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,n=e.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=xp(z(this.options.clip,vp(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,n=s.data||[],r=e.chartArea,o=[],a=this._drawStart||0,h=this._drawCount||n.length-a,l=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,h),c=a;c<a+h;++c){const u=n[c];u.hidden||(u.active&&l?o.push(u):u.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Pp(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Sp(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const n=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],h=this.enableOptionSharing&&Wi(s);if(a)return ga(a,h);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],f=l.getOptionScopes(this.getDataset(),c),d=Object.keys(tt.elements[t]),g=()=>this.getContext(s,n,e),p=l.resolveNamedOptions(f,d,g,u);return p.$shared&&(p.$shared=h,r[o]=Object.freeze(ga(p,h))),p}_resolveAnimations(t,e,s){const n=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let h;if(n.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,e),f=c.getOptionScopes(this.getDataset(),u);h=c.createResolver(f,this.getContext(t,s,e))}const l=new mc(n,h&&h.animations);return h&&h._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Dn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),n=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(e,r)||r!==n;return this.updateSharedOptions(r,e,s),{sharedOptions:r,includeOptions:o}}updateElement(t,e,s,n){Dn(n)?Object.assign(t,s):this._resolveAnimations(e,n).update(t,s)}updateSharedOptions(t,e,s){t&&!Dn(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,n){t.active=n;const r=this.getStyle(e,n);this._resolveAnimations(e,s,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[a,h,l]of this._syncList)this[a](h,l);this._syncList=[];const n=s.length,r=e.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,e,s=!0){const n=this._cachedMeta,r=n.data,o=t+e;let a;const h=l=>{for(l.length+=e,a=l.length-1;a>=o;a--)l[a]=l[a-e]};for(h(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&h(n._parsed),this.parse(t,e),s&&this.updateElements(r,t,e,"reset")}updateElements(t,e,s,n){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,e);s._stacked&&bi(s,n)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,n]=t;this[e](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function kp(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let s=[];for(let n=0,r=e.length;n<r;n++)s=s.concat(e[n].controller.getAllParsedValues(i));i._cache.$bar=Jl(s.sort((n,r)=>n-r))}return i._cache.$bar}function Ep(i){const t=i.iScale,e=kp(t,i.type);let s=t._length,n,r,o,a;const h=()=>{o===32767||o===-32768||(Wi(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=e.length;n<r;++n)o=t.getPixelForValue(e[n]),h();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),h();return s}function Lp(i,t,e,s){const n=e.barThickness;let r,o;return B(n)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[i]-r/2}}function Tp(i,t,e,s){const n=t.pixels,r=n[i];let o=i>0?n[i-1]:null,a=i<n.length-1?n[i+1]:null;const h=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const l=r-(r-Math.min(o,a))/2*h;return{chunk:Math.abs(a-o)/2*h/s,ratio:e.barPercentage,start:l}}function Rp(i,t,e,s){const n=e.parse(i[0],s),r=e.parse(i[1],s),o=Math.min(n,r),a=Math.max(n,r);let h=o,l=a;Math.abs(o)>Math.abs(a)&&(h=a,l=o),t[e.axis]=l,t._custom={barStart:h,barEnd:l,start:n,end:r,min:o,max:a}}function vc(i,t,e,s){return Z(i)?Rp(i,t,e,s):t[e.axis]=e.parse(i,s),t}function pa(i,t,e,s){const n=i.iScale,r=i.vScale,o=n.getLabels(),a=n===r,h=[];let l,c,u,f;for(l=e,c=e+s;l<c;++l)f=t[l],u={},u[n.axis]=a||n.parse(o[l],l),h.push(vc(f,u,r,l));return h}function On(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Np(i,t,e){return i!==0?$t(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Ap(i){let t,e,s,n,r;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:e,end:s,reverse:t,top:n,bottom:r}}function Dp(i,t,e,s){let n=t.borderSkipped;const r={};if(!n){i.borderSkipped=r;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:h,top:l,bottom:c}=Ap(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=l:(e._bottom||0)===s?n=c:(r[ma(c,o,a,h)]=!0,n=l)),r[ma(n,o,a,h)]=!0,i.borderSkipped=r}function ma(i,t,e,s){return s?(i=Op(i,t,e),i=ba(i,e,t)):i=ba(i,t,e),i}function Op(i,t,e){return i===t?e:i===e?t:i}function ba(i,t,e){return i==="start"?t:i==="end"?e:i}function Fp(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class Ip extends xe{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,s,n){return pa(t,e,s,n)}parseArrayData(t,e,s,n){return pa(t,e,s,n)}parseObjectData(t,e,s,n){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:h="y"}=this._parsing,l=r.axis==="x"?a:h,c=o.axis==="x"?a:h,u=[];let f,d,g,p;for(f=s,d=s+n;f<d;++f)p=e[f],g={},g[r.axis]=r.parse(pe(p,l),f),u.push(vc(pe(p,c),g,o,f));return u}updateRangeFromParsed(t,e,s,n){super.updateRangeFromParsed(t,e,s,n);const r=s._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:n}=e,r=this.getParsed(t),o=r._custom,a=On(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,h=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:f}=this._getSharedOptions(e,n);for(let d=e;d<e+s;d++){const g=this.getParsed(d),p=r||B(g[a.axis])?{base:h,head:h}:this._calculateBarValuePixels(d),m=this._calculateBarIndexPixels(d,c),b=(g._stacks||{})[a.axis],v={horizontal:l,base:p.base,enableBorderRadius:!b||On(g._custom)||o===b._top||o===b._bottom,x:l?p.head:m.center,y:l?m.center:p.head,height:l?m.size:Math.abs(p.size),width:l?Math.abs(p.size):m.size};f&&(v.options=u||this.resolveDataElementOptions(d,t[d].active?"active":n));const x=v.options||t[d].options;Dp(v,x,b,o),Fp(v,x,c.ratio),this.updateElement(t[d],d,v,n)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),r=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),h=a&&a[s.axis],l=c=>{const u=c._parsed.find(d=>d[s.axis]===h),f=u&&u[c.vScale.axis];if(B(f)||isNaN(f))return!0};for(const c of n)if(!(e!==void 0&&l(c))&&((r===!1||o.indexOf(c.stack)===-1||r===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[z(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const n=this._getStacks(t,s),r=e!==void 0?n.indexOf(e):-1;return r===-1?n.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,n=[];let r,o;for(r=0,o=e.data.length;r<o;++r)n.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||Ep(e),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,h=this.getParsed(t),l=h._custom,c=On(l);let u=h[e.axis],f=0,d=s?this.applyStack(e,h,s):u,g,p;d!==u&&(f=d-u,d=u),c&&(u=l.barStart,d=l.barEnd-l.barStart,u!==0&&$t(u)!==$t(l.barEnd)&&(f=0),f+=u);const m=!B(r)&&!c?r:f;let b=e.getPixelForValue(m);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(f+d):g=b,p=g-b,Math.abs(p)<o){p=Np(p,e,a)*o,u===a&&(b-=p/2);const v=e.getPixelForDecimal(0),x=e.getPixelForDecimal(1),w=Math.min(v,x),_=Math.max(v,x);b=Math.max(Math.min(b,_),w),g=b+p,s&&!c&&(h._stacks[e.axis]._visualValues[n]=e.getValueForPixel(g)-e.getValueForPixel(b))}if(b===e.getPixelForValue(a)){const v=$t(p)*e.getLineWidthForValue(a)/2;b+=v,p-=v}return{size:p,base:b,head:g,center:g+p/2}}_calculateBarIndexPixels(t,e){const s=e.scale,n=this.options,r=n.skipNull,o=z(n.maxBarThickness,1/0);let a,h;const l=this._getAxisCount();if(e.grouped){const c=r?this._getStackCount(t):e.stackCount,u=n.barThickness==="flex"?Tp(t,e,n,c*l):Lp(t,e,n,c*l),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(z(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+d;a=u.start+u.chunk*g+u.chunk/2,h=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),h=Math.min(o,e.min*e.ratio);return{base:a-h/2,head:a+h/2,center:a,size:h}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,n=s.length;let r=0;for(;r<n;++r)this.getParsed(r)[e.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}class zp extends xe{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,n){const r=super.parsePrimitiveData(t,e,s,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,e,s,n){const r=super.parseArrayData(t,e,s,n);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=z(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,e,s,n){const r=super.parseObjectData(t,e,s,n);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=z(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),a=n.getLabelForValue(o.x),h=r.getLabelForValue(o.y),l=o._custom;return{label:s[t]||"",value:"("+a+", "+h+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,n){const r=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:h,includeOptions:l}=this._getSharedOptions(e,n),c=o.axis,u=a.axis;for(let f=e;f<e+s;f++){const d=t[f],g=!r&&this.getParsed(f),p={},m=p[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[c]),b=p[u]=r?a.getBasePixel():a.getPixelForValue(g[u]);p.skip=isNaN(m)||isNaN(b),l&&(p.options=h||this.resolveDataElementOptions(f,d.active?"active":n),r&&(p.options.radius=0)),this.updateElement(d,f,p,n)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return e!=="active"&&(n.radius=0),n.radius+=z(s&&s._custom,r),n}}function Bp(i,t,e){let s=1,n=1,r=0,o=0;if(t<Q){const a=i,h=a+t,l=Math.cos(a),c=Math.sin(a),u=Math.cos(h),f=Math.sin(h),d=(x,w,_)=>Hi(x,a,h,!0)?1:Math.max(w,w*e,_,_*e),g=(x,w,_)=>Hi(x,a,h,!0)?-1:Math.min(w,w*e,_,_*e),p=d(0,l,u),m=d(rt,c,f),b=g(W,l,u),v=g(W+rt,c,f);s=(p-b)/2,n=(m-v)/2,r=-(p+b)/2,o=-(m+v)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}class ao extends xe{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((h,l)=>{const u=t.getDatasetMeta(0).controller.getStyle(l);return{text:h,fillStyle:u.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(l),lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:u.borderWidth,strokeStyle:u.borderColor,textAlign:n,pointStyle:s,borderRadius:o&&(a||u.borderRadius),index:l}}):[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let r=h=>+s[h];if(V(s[t])){const{key:h="value"}=this._parsing;r=l=>+pe(s[l],h)}let o,a;for(o=t,a=t+e;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return Dt(this.options.rotation-90)}_getCircumference(){return Dt(this.options.circumference)}_getRotationExtents(){let t=Q,e=-Q;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),h=Math.min(Gd(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:d,offsetX:g,offsetY:p}=Bp(u,c,h),m=(s.width-o)/f,b=(s.height-o)/d,v=Math.max(Math.min(m,b)/2,0),x=Yl(this.options.radius,v),w=Math.max(x*h,0),_=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=p*x,n.total=this.calculateTotal(),this.outerRadius=x-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*l,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const s=this.options,n=this._cachedMeta,r=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/Q)}updateElements(t,e,s,n){const r=n==="reset",o=this.chart,a=o.chartArea,l=o.options.animation,c=(a.left+a.right)/2,u=(a.top+a.bottom)/2,f=r&&l.animateScale,d=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,n);let b=this._getRotation(),v;for(v=0;v<e;++v)b+=this._circumference(v,r);for(v=e;v<e+s;++v){const x=this._circumference(v,r),w=t[v],_={x:c+this.offsetX,y:u+this.offsetY,startAngle:b,endAngle:b+x,circumference:x,outerRadius:g,innerRadius:d};m&&(_.options=p||this.resolveDataElementOptions(v,w.active?"active":n)),b+=x,this.updateElement(w,v,_,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,n;for(n=0;n<e.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!e[n].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Q*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=qi(e._parsed[t],s.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const s=this.chart;let n,r,o,a,h;if(!t){for(n=0,r=s.data.datasets.length;n<r;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)h=a.resolveDataElementOptions(n),h.borderAlign!=="inner"&&(e=Math.max(e,h.borderWidth||0,h.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,n=t.length;s<n;++s){const r=this.resolveDataElementOptions(s);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(z(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class jp extends xe{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:n=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:h}=Zl(e,n,o);this._drawStart=a,this._drawCount=h,tc(e)&&(a=0,h=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:l},t),this.updateElements(n,a,h,t)}updateElements(t,e,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:h,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,n),f=o.axis,d=a.axis,{spanGaps:g,segment:p}=this.options,m=oi(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||n==="none",v=e+s,x=t.length;let w=e>0&&this.getParsed(e-1);for(let _=0;_<x;++_){const S=t[_],y=b?S:{};if(_<e||_>=v){y.skip=!0;continue}const C=this.getParsed(_),E=B(C[d]),L=y[f]=o.getPixelForValue(C[f],_),T=y[d]=r||E?a.getBasePixel():a.getPixelForValue(h?this.applyStack(a,C,h):C[d],_);y.skip=isNaN(L)||isNaN(T)||E,y.stop=_>0&&Math.abs(C[f]-w[f])>m,p&&(y.parsed=C,y.raw=l.data[_]),u&&(y.options=c||this.resolveDataElementOptions(_,S.active?"active":n)),b||this.updateElement(S,_,y,n),w=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class xc extends xe{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((r,o)=>{const h=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:n,lineWidth:h.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=qi(e._parsed[t].r,s.options.locale);return{label:n[t]||"",value:r}}parseObjectData(t,e,s,n){return hc.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(n/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,s,n){const r=n==="reset",o=this.chart,h=o.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,u=l.yCenter,f=l.getIndexAngle(0)-.5*W;let d=f,g;const p=360/this.countVisibleElements();for(g=0;g<e;++g)d+=this._computeAngle(g,n,p);for(g=e;g<e+s;g++){const m=t[g];let b=d,v=d+this._computeAngle(g,n,p),x=o.getDataVisibility(g)?l.getDistanceFromCenterForValue(this.getParsed(g).r):0;d=v,r&&(h.animateScale&&(x=0),h.animateRotate&&(b=v=f));const w={x:c,y:u,innerRadius:0,outerRadius:x,startAngle:b,endAngle:v,options:this.resolveDataElementOptions(g,m.active?"active":n)};this.updateElement(m,g,w,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?Dt(this.resolveDataElementOptions(t,e).angle||s):0}}class Vp extends ao{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Wp extends xe{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,n){return hc.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta,s=e.dataset,n=e.data||[],r=e.iScale.getLabels();if(s.points=n,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,s,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let a=e;a<e+s;a++){const h=t[a],l=this.resolveDataElementOptions(a,h.active?"active":n),c=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:c.x,f=o?r.yCenter:c.y,d={x:u,y:f,angle:c.angle,skip:isNaN(u)||isNaN(f),options:l};this.updateElement(h,a,d,n)}}}class Hp extends xe{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),a=n.getLabelForValue(o.x),h=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+h+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,n=this.chart._animationsDisabled;let{start:r,count:o}=Zl(e,s,n);if(this._drawStart=r,this._drawCount=o,tc(e)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:h}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!h._decimated,a.points=s;const l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:l},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:h,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,n),u=this.getSharedOptions(c),f=this.includeOptions(n,u),d=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,b=oi(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||n==="none";let x=e>0&&this.getParsed(e-1);for(let w=e;w<e+s;++w){const _=t[w],S=this.getParsed(w),y=v?_:{},C=B(S[g]),E=y[d]=o.getPixelForValue(S[d],w),L=y[g]=r||C?a.getBasePixel():a.getPixelForValue(h?this.applyStack(a,S,h):S[g],w);y.skip=isNaN(E)||isNaN(L)||C,y.stop=w>0&&Math.abs(S[d]-x[d])>b,m&&(y.parsed=S,y.raw=l.data[w]),f&&(y.options=u||this.resolveDataElementOptions(w,_.active?"active":n)),v||this.updateElement(_,w,y,n),x=S}this.updateSharedOptions(u,n,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let h=e.length-1;h>=0;--h)a=Math.max(a,e[h].size(this.resolveDataElementOptions(h))/2);return a>0&&a}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!e.length)return n;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,r,o)/2}}var $p=Object.freeze({__proto__:null,BarController:Ip,BubbleController:zp,DoughnutController:ao,LineController:jp,PieController:Vp,PolarAreaController:xc,RadarController:Wp,ScatterController:Hp});function Se(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ho{static override(t){Object.assign(ho.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Se()}parse(){return Se()}format(){return Se()}add(){return Se()}diff(){return Se()}startOf(){return Se()}endOf(){return Se()}}var Yp={_date:ho};function Up(i,t,e,s){const{controller:n,data:r,_sorted:o}=i,a=n._cachedMeta.iScale,h=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?hg:Qt;if(s){if(n._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const f=l(r,t,e-u),d=l(r,t,e+u);return{lo:f.lo,hi:d.hi}}}}else{const c=l(r,t,e);if(h){const{vScale:u}=n._cachedMeta,{_parsed:f}=i,d=f.slice(0,c.lo+1).reverse().findIndex(p=>!B(p[u.axis]));c.lo-=Math.max(0,d);const g=f.slice(c.hi).findIndex(p=>!B(p[u.axis]));c.hi+=Math.max(0,g)}return c}}return{lo:0,hi:r.length-1}}function gn(i,t,e,s,n){const r=i.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,h=r.length;a<h;++a){const{index:l,data:c}=r[a],{lo:u,hi:f}=Up(r[a],t,o,n);for(let d=u;d<=f;++d){const g=c[d];g.skip||s(g,l,d)}}}function Kp(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,n){const r=t?Math.abs(s.x-n.x):0,o=e?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Fn(i,t,e,s,n){const r=[];return!n&&!i.isPointInArea(t)||gn(i,e,t,function(a,h,l){!n&&!Zt(a,i.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:h,index:l})},!0),r}function Xp(i,t,e,s){let n=[];function r(o,a,h){const{startAngle:l,endAngle:c}=o.getProps(["startAngle","endAngle"],s),{angle:u}=Xl(o,{x:t.x,y:t.y});Hi(u,l,c)&&n.push({element:o,datasetIndex:a,index:h})}return gn(i,e,t,r),n}function Gp(i,t,e,s,n,r){let o=[];const a=Kp(e);let h=Number.POSITIVE_INFINITY;function l(c,u,f){const d=c.inRange(t.x,t.y,n);if(s&&!d)return;const g=c.getCenterPoint(n);if(!(!!r||i.isPointInArea(g))&&!d)return;const m=a(t,g);m<h?(o=[{element:c,datasetIndex:u,index:f}],h=m):m===h&&o.push({element:c,datasetIndex:u,index:f})}return gn(i,e,t,l),o}function In(i,t,e,s,n,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!s?Xp(i,t,e,n):Gp(i,t,e,s,n,r)}function va(i,t,e,s,n){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return gn(i,e,t,(h,l,c)=>{h[o]&&h[o](t[e],n)&&(r.push({element:h,datasetIndex:l,index:c}),a=a||h.inRange(t.x,t.y,n))}),s&&!a?[]:r}var Jp={modes:{index(i,t,e,s){const n=Ee(t,i),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Fn(i,n,r,s,o):In(i,n,r,!1,s,o),h=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(l=>{const c=a[0].index,u=l.data[c];u&&!u.skip&&h.push({element:u,datasetIndex:l.index,index:c})}),h):[]},dataset(i,t,e,s){const n=Ee(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?Fn(i,n,r,s,o):In(i,n,r,!1,s,o);if(a.length>0){const h=a[0].datasetIndex,l=i.getDatasetMeta(h).data;a=[];for(let c=0;c<l.length;++c)a.push({element:l[c],datasetIndex:h,index:c})}return a},point(i,t,e,s){const n=Ee(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return Fn(i,n,r,s,o)},nearest(i,t,e,s){const n=Ee(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return In(i,n,r,e.intersect,s,o)},x(i,t,e,s){const n=Ee(t,i);return va(i,n,"x",e.intersect,s)},y(i,t,e,s){const n=Ee(t,i);return va(i,n,"y",e.intersect,s)}}};const wc=["left","top","right","bottom"];function vi(i,t){return i.filter(e=>e.pos===t)}function xa(i,t){return i.filter(e=>wc.indexOf(e.pos)===-1&&e.box.axis===t)}function xi(i,t){return i.sort((e,s)=>{const n=t?s:e,r=t?e:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function qp(i){const t=[];let e,s,n,r,o,a;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:e,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function Qp(i){const t={};for(const e of i){const{stack:s,pos:n,stackWeight:r}=e;if(!s||!wc.includes(n))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Zp(i,t){const e=Qp(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=i.length;r<o;++r){a=i[r];const{fullSize:h}=a.box,l=e[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*s:h&&t.availableWidth,a.height=n):(a.width=s,a.height=c?c*n:h&&t.availableHeight)}return e}function tm(i){const t=qp(i),e=xi(t.filter(l=>l.box.fullSize),!0),s=xi(vi(t,"left"),!0),n=xi(vi(t,"right")),r=xi(vi(t,"top"),!0),o=xi(vi(t,"bottom")),a=xa(t,"x"),h=xa(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:n.concat(h).concat(o).concat(a),chartArea:vi(t,"chartArea"),vertical:s.concat(n).concat(h),horizontal:r.concat(o).concat(a)}}function wa(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function _c(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function em(i,t,e,s){const{pos:n,box:r}=e,o=i.maxPadding;if(!V(n)){e.size&&(i[n]-=e.size);const u=s[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,i[n]+=e.size}r.getPadding&&_c(o,r.getPadding());const a=Math.max(0,t.outerWidth-wa(o,i,"left","right")),h=Math.max(0,t.outerHeight-wa(o,i,"top","bottom")),l=a!==i.w,c=h!==i.h;return i.w=a,i.h=h,e.horizontal?{same:l,other:c}:{same:c,other:l}}function im(i){const t=i.maxPadding;function e(s){const n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function sm(i,t){const e=t.maxPadding;function s(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(i?["left","right"]:["top","bottom"])}function Ci(i,t,e,s){const n=[];let r,o,a,h,l,c;for(r=0,o=i.length,l=0;r<o;++r){a=i[r],h=a.box,h.update(a.width||t.w,a.height||t.h,sm(a.horizontal,t));const{same:u,other:f}=em(t,e,a,s);l|=u&&n.length,c=c||f,h.fullSize||n.push(a)}return l&&Ci(n,t,e,s)||c}function as(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function _a(i,t,e,s){const n=e.padding;let{x:r,y:o}=t;for(const a of i){const h=a.box,l=s[a.stack]||{placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const u=t.w*c,f=l.size||h.height;Wi(l.start)&&(o=l.start),h.fullSize?as(h,n.left,o,e.outerWidth-n.right-n.left,f):as(h,t.left+l.placed,o,u,f),l.start=o,l.placed+=u,o=h.bottom}else{const u=t.h*c,f=l.size||h.width;Wi(l.start)&&(r=l.start),h.fullSize?as(h,r,n.top,f,e.outerHeight-n.bottom-n.top):as(h,r,t.top+l.placed,f,u),l.start=r,l.placed+=u,r=h.right}}t.x=r,t.y=o}var wt={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;const n=yt(i.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(e-n.height,0),a=tm(i.boxes),h=a.vertical,l=a.horizontal;Y(i.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const c=h.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/c,hBoxMaxHeight:o/2}),f=Object.assign({},n);_c(f,yt(s));const d=Object.assign({maxPadding:f,w:r,h:o,x:n.left,y:n.top},n),g=Zp(h.concat(l),u);Ci(a.fullSize,d,u,g),Ci(h,d,u,g),Ci(l,d,u,g)&&Ci(h,d,u,g),im(d),_a(a.leftAndTop,d,u,g),d.x+=d.w,d.y+=d.h,_a(a.rightAndBottom,d,u,g),i.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Y(a.chartArea,p=>{const m=p.box;Object.assign(m,i.chartArea),m.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class yc{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}}class nm extends yc{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ls="$chartjs",rm={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ya=i=>i===null||i==="";function om(i,t){const e=i.style,s=i.getAttribute("height"),n=i.getAttribute("width");if(i[Ls]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ya(n)){const r=ra(i,"width");r!==void 0&&(i.width=r)}if(ya(s))if(i.style.height==="")i.height=i.width/(t||2);else{const r=ra(i,"height");r!==void 0&&(i.height=r)}return i}const Mc=ep?{passive:!0}:!1;function am(i,t,e){i&&i.addEventListener(t,e,Mc)}function hm(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,Mc)}function lm(i,t){const e=rm[i.type]||i.type,{x:s,y:n}=Ee(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:n!==void 0?n:null}}function Ks(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function cm(i,t,e){const s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Ks(a.addedNodes,s),o=o&&!Ks(a.removedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function um(i,t,e){const s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Ks(a.removedNodes,s),o=o&&!Ks(a.addedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Yi=new Map;let Ma=0;function Sc(){const i=window.devicePixelRatio;i!==Ma&&(Ma=i,Yi.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function fm(i,t){Yi.size||window.addEventListener("resize",Sc),Yi.set(i,t)}function dm(i){Yi.delete(i),Yi.size||window.removeEventListener("resize",Sc)}function gm(i,t,e){const s=i.canvas,n=s&&oo(s);if(!n)return;const r=Ql((a,h)=>{const l=n.clientWidth;e(a,h),l<n.clientWidth&&e()},window),o=new ResizeObserver(a=>{const h=a[0],l=h.contentRect.width,c=h.contentRect.height;l===0&&c===0||r(l,c)});return o.observe(n),fm(i,r),o}function zn(i,t,e){e&&e.disconnect(),t==="resize"&&dm(i)}function pm(i,t,e){const s=i.canvas,n=Ql(r=>{i.ctx!==null&&e(lm(r,i))},i);return am(s,t,n),n}class mm extends yc{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(om(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[Ls])return!1;const s=e[Ls].initial;["height","width"].forEach(r=>{const o=s[r];B(o)?e.removeAttribute(r):e.setAttribute(r,o)});const n=s.style||{};return Object.keys(n).forEach(r=>{e.style[r]=n[r]}),e.width=e.width,delete e[Ls],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:cm,detach:um,resize:gm}[e]||pm;n[e]=o(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),n=s[e];if(!n)return;({attach:zn,detach:zn,resize:zn}[e]||hm)(t,e,n),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return tp(t,e,s,n)}isAttached(t){const e=t&&oo(t);return!!(e&&e.isConnected)}}function bm(i){return!ro()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?nm:mm}class se{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return oi(this.x)&&oi(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}}function vm(i,t){const e=i.options.ticks,s=xm(i),n=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?_m(t):[],o=r.length,a=r[0],h=r[o-1],l=[];if(o>n)return ym(t,l,r,o/n),l;const c=wm(r,t,n);if(o>0){let u,f;const d=o>1?Math.round((h-a)/(o-1)):null;for(hs(t,l,c,B(d)?0:a-d,a),u=0,f=o-1;u<f;u++)hs(t,l,c,r[u],r[u+1]);return hs(t,l,c,h,B(d)?t.length:h+d),l}return hs(t,l,c),l}function xm(i){const t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),n=i._maxLength/e;return Math.floor(Math.min(s,n))}function wm(i,t,e){const s=Mm(i),n=t.length/e;if(!s)return Math.max(n,1);const r=sg(s);for(let o=0,a=r.length-1;o<a;o++){const h=r[o];if(h>n)return h}return Math.max(n,1)}function _m(i){const t=[];let e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function ym(i,t,e,s){let n=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<i.length;o++)o===r&&(t.push(i[o]),n++,r=e[n*s])}function hs(i,t,e,s,n){const r=z(s,0),o=Math.min(z(n,i.length),i.length);let a=0,h,l,c;for(e=Math.ceil(e),n&&(h=n-s,e=h/Math.floor(h/e)),c=r;c<0;)a++,c=Math.round(r+a*e);for(l=Math.max(r,0);l<o;l++)l===c&&(t.push(i[l]),a++,c=Math.round(r+a*e))}function Mm(i){const t=i.length;let e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}const Sm=i=>i==="left"?"right":i==="right"?"left":i,Sa=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Pa=(i,t)=>Math.min(t||i,i);function Ca(i,t){const e=[],s=i.length/t,n=i.length;let r=0;for(;r<n;r+=s)e.push(i[Math.floor(r)]);return e}function Pm(i,t,e){const s=i.ticks.length,n=Math.min(t,s-1),r=i._startPixel,o=i._endPixel,a=1e-6;let h=i.getPixelForTick(n),l;if(!(e&&(s===1?l=Math.max(h-r,o-h):t===0?l=(i.getPixelForTick(1)-h)/2:l=(h-i.getPixelForTick(n-1))/2,h+=n<t?l:-l,h<r-a||h>o+a)))return h}function Cm(i,t){Y(i,e=>{const s=e.gc,n=s.length/2;let r;if(n>t){for(r=0;r<n;++r)delete e.data[s[r]];s.splice(0,n)}})}function wi(i){return i.drawTicks?i.tickLength:0}function ka(i,t){if(!i.display)return 0;const e=ct(i.font,t),s=yt(i.padding);return(Z(i.text)?i.text.length:1)*e.lineHeight+s.height}function km(i,t){return ve(i,{scale:t,type:"scale"})}function Em(i,t,e){return ve(i,{tick:e,index:t,type:"tick"})}function Lm(i,t,e){let s=Zr(i);return(e&&t!=="right"||!e&&t==="right")&&(s=Sm(s)),s}function Tm(i,t,e,s){const{top:n,left:r,bottom:o,right:a,chart:h}=i,{chartArea:l,scales:c}=h;let u=0,f,d,g;const p=o-n,m=a-r;if(i.isHorizontal()){if(d=vt(s,r,a),V(e)){const b=Object.keys(e)[0],v=e[b];g=c[b].getPixelForValue(v)+p-t}else e==="center"?g=(l.bottom+l.top)/2+p-t:g=Sa(i,e,t);f=a-r}else{if(V(e)){const b=Object.keys(e)[0],v=e[b];d=c[b].getPixelForValue(v)-m+t}else e==="center"?d=(l.left+l.right)/2-m+t:d=Sa(i,e,t);g=vt(s,o,n),u=e==="left"?-rt:rt}return{titleX:d,titleY:g,maxWidth:f,rotation:u}}class He extends se{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=Tt(t,Number.POSITIVE_INFINITY),e=Tt(e,Number.NEGATIVE_INFINITY),s=Tt(s,Number.POSITIVE_INFINITY),n=Tt(n,Number.NEGATIVE_INFINITY),{min:Tt(t,s),max:Tt(e,n),minDefined:nt(t),maxDefined:nt(e)}}getMinMax(t){let{min:e,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:e,max:s};const a=this.getMatchingVisibleMetas();for(let h=0,l=a.length;h<l;++h)o=a[h].controller.getMinMax(this,t),n||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=n&&e>s?e:s,{min:Tt(e,Tt(s,e)),max:Tt(s,Tt(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){q(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ng(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=a<this.ticks.length;this._convertTicksToLabels(h?Ca(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=vm(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){q(this.options.afterUpdate,[this])}beforeSetDimensions(){q(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){q(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),q(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){q(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=q(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){q(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){q(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=Pa(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,r=e.maxRotation;let o=n,a,h,l;if(!this._isVisible()||!e.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const c=this._getLabelSizes(),u=c.widest.width,f=c.highest.height,d=ut(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:d/(s-1),u+6>a&&(a=d/(s-(t.offset?.5:1)),h=this.maxHeight-wi(t.grid)-e.padding-ka(t.title,this.chart.options.font),l=Math.sqrt(u*u+f*f),o=qr(Math.min(Math.asin(ut((c.highest.height+6)/a,-1,1)),Math.asin(ut(h/l,-1,1))-Math.asin(ut(f/l,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){q(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){q(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const h=ka(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=wi(r)+h):(t.height=this.maxHeight,t.width=wi(r)+h),s.display&&this.ticks.length){const{first:l,last:c,widest:u,highest:f}=this._getLabelSizes(),d=s.padding*2,g=Dt(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const b=s.mirror?0:m*u.width+p*f.height;t.height=Math.min(this.maxHeight,t.height+b+d)}else{const b=s.mirror?0:p*u.width+m*f.height;t.width=Math.min(this.maxWidth,t.width+b+d)}this._calculatePadding(l,c,m,p)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){const{ticks:{align:r,padding:o},position:a}=this.options,h=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;h?l?(f=n*t.width,d=s*e.height):(f=s*t.height,d=n*e.width):r==="start"?d=e.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,d=e.width/2),this.paddingLeft=Math.max((f-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-u+o)*this.width/(this.width-u),0)}else{let c=e.height/2,u=t.height/2;r==="start"?(c=0,u=t.height):r==="end"&&(c=e.height,u=0),this.paddingTop=c+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){q(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)B(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=Ca(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],h=Math.floor(e/Pa(e,s));let l=0,c=0,u,f,d,g,p,m,b,v,x,w,_;for(u=0;u<e;u+=h){if(g=t[u].label,p=this._resolveTickFontOptions(u),n.font=m=p.string,b=r[m]=r[m]||{data:{},gc:[]},v=p.lineHeight,x=w=0,!B(g)&&!Z(g))x=Ys(n,b.data,b.gc,x,g),w=v;else if(Z(g))for(f=0,d=g.length;f<d;++f)_=g[f],!B(_)&&!Z(_)&&(x=Ys(n,b.data,b.gc,x,_),w+=v);o.push(x),a.push(w),l=Math.max(x,l),c=Math.max(w,c)}Cm(r,e);const S=o.indexOf(l),y=a.indexOf(c),C=E=>({width:o[E]||0,height:a[E]||0});return{first:C(0),last:C(e-1),widest:C(S),highest:C(y),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return ag(this._alignToPixels?Me(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=Em(this.getContext(),t,s))}return this.$context||(this.$context=km(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Dt(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,h=r?r.highest.height+o:0;return this.isHorizontal()?h*s>a*n?a/s:h/n:h*n<a*s?h/s:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,h=r.offset,l=this.isHorizontal(),u=this.ticks.length+(h?1:0),f=wi(r),d=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,b=function(N){return Me(s,N,p)};let v,x,w,_,S,y,C,E,L,T,F,j;if(o==="top")v=b(this.bottom),y=this.bottom-f,E=v-m,T=b(t.top)+m,j=t.bottom;else if(o==="bottom")v=b(this.top),T=t.top,j=b(t.bottom)-m,y=v+m,E=this.top+f;else if(o==="left")v=b(this.right),S=this.right-f,C=v-m,L=b(t.left)+m,F=t.right;else if(o==="right")v=b(this.left),L=t.left,F=b(t.right)-m,S=v+m,C=this.left+f;else if(e==="x"){if(o==="center")v=b((t.top+t.bottom)/2+.5);else if(V(o)){const N=Object.keys(o)[0],X=o[N];v=b(this.chart.scales[N].getPixelForValue(X))}T=t.top,j=t.bottom,y=v+m,E=y+f}else if(e==="y"){if(o==="center")v=b((t.left+t.right)/2);else if(V(o)){const N=Object.keys(o)[0],X=o[N];v=b(this.chart.scales[N].getPixelForValue(X))}S=v-m,C=S-f,L=t.left,F=t.right}const et=z(n.ticks.maxTicksLimit,u),D=Math.max(1,Math.ceil(u/et));for(x=0;x<u;x+=D){const N=this.getContext(x),X=r.setContext(N),Mt=a.setContext(N),at=X.lineWidth,Ft=X.color,Zi=Mt.dash||[],Ye=Mt.dashOffset,di=X.tickWidth,we=X.tickColor,gi=X.tickBorderDash||[],_e=X.tickBorderDashOffset;w=Pm(this,x,h),w!==void 0&&(_=Me(s,w,at),l?S=C=L=F=_:y=E=T=j=_,d.push({tx1:S,ty1:y,tx2:C,ty2:E,x1:L,y1:T,x2:F,y2:j,width:at,color:Ft,borderDash:Zi,borderDashOffset:Ye,tickWidth:di,tickColor:we,tickBorderDash:gi,tickBorderDashOffset:_e}))}return this._ticksLength=u,this._borderValue=v,d}_computeLabelItems(t){const e=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:h,crossAlign:l,padding:c,mirror:u}=r,f=wi(s.grid),d=f+c,g=u?-c:d,p=-Dt(this.labelRotation),m=[];let b,v,x,w,_,S,y,C,E,L,T,F,j="middle";if(n==="top")S=this.bottom-g,y=this._getXAxisLabelAlignment();else if(n==="bottom")S=this.top+g,y=this._getXAxisLabelAlignment();else if(n==="left"){const D=this._getYAxisLabelAlignment(f);y=D.textAlign,_=D.x}else if(n==="right"){const D=this._getYAxisLabelAlignment(f);y=D.textAlign,_=D.x}else if(e==="x"){if(n==="center")S=(t.top+t.bottom)/2+d;else if(V(n)){const D=Object.keys(n)[0],N=n[D];S=this.chart.scales[D].getPixelForValue(N)+d}y=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")_=(t.left+t.right)/2-d;else if(V(n)){const D=Object.keys(n)[0],N=n[D];_=this.chart.scales[D].getPixelForValue(N)}y=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(h==="start"?j="top":h==="end"&&(j="bottom"));const et=this._getLabelSizes();for(b=0,v=a.length;b<v;++b){x=a[b],w=x.label;const D=r.setContext(this.getContext(b));C=this.getPixelForTick(b)+r.labelOffset,E=this._resolveTickFontOptions(b),L=E.lineHeight,T=Z(w)?w.length:1;const N=T/2,X=D.color,Mt=D.textStrokeColor,at=D.textStrokeWidth;let Ft=y;o?(_=C,y==="inner"&&(b===v-1?Ft=this.options.reverse?"left":"right":b===0?Ft=this.options.reverse?"right":"left":Ft="center"),n==="top"?l==="near"||p!==0?F=-T*L+L/2:l==="center"?F=-et.highest.height/2-N*L+L:F=-et.highest.height+L/2:l==="near"||p!==0?F=L/2:l==="center"?F=et.highest.height/2-N*L:F=et.highest.height-T*L,u&&(F*=-1),p!==0&&!D.showLabelBackdrop&&(_+=L/2*Math.sin(p))):(S=C,F=(1-T)*L/2);let Zi;if(D.showLabelBackdrop){const Ye=yt(D.backdropPadding),di=et.heights[b],we=et.widths[b];let gi=F-Ye.top,_e=0-Ye.left;switch(j){case"middle":gi-=di/2;break;case"bottom":gi-=di;break}switch(y){case"center":_e-=we/2;break;case"right":_e-=we;break;case"inner":b===v-1?_e-=we:b>0&&(_e-=we/2);break}Zi={left:_e,top:gi,width:we+Ye.width,height:di+Ye.height,color:D.backdropColor}}m.push({label:w,font:E,textOffset:F,options:{rotation:p,color:X,strokeColor:Mt,strokeWidth:at,textAlign:Ft,textBaseline:j,translation:[_,S],backdrop:Zi}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Dt(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,h=o.widest.width;let l,c;return e==="left"?n?(c=this.right+r,s==="near"?l="left":s==="center"?(l="center",c+=h/2):(l="right",c+=h)):(c=this.right-a,s==="near"?l="right":s==="center"?(l="center",c-=h/2):(l="left",c=this.left)):e==="right"?n?(c=this.left+r,s==="near"?l="right":s==="center"?(l="center",c-=h/2):(l="left",c-=h)):(c=this.left+a,s==="near"?l="left":s==="center"?(l="center",c+=h/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:n,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(h,l,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(h.x,h.y),s.lineTo(l.x,l.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=n.length;r<o;++r){const h=n[r];e.drawOnChartArea&&a({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&a({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let l,c,u,f;this.isHorizontal()?(l=Me(t,this.left,o)-o/2,c=Me(t,this.right,a)+a/2,u=f=h):(u=Me(t,this.top,o)-o/2,f=Me(t,this.bottom,a)+a/2,l=c=h),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&un(s,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,h=o.font,l=o.label,c=o.textOffset;Ie(s,l,0,c,h,a)}n&&fn(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;const r=ct(s.font),o=yt(s.padding),a=s.align;let h=r.lineHeight/2;e==="bottom"||e==="center"||V(e)?(h+=o.bottom,Z(s.text)&&(h+=r.lineHeight*(s.text.length-1))):h+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:f}=Tm(this,h,e,a);Ie(t,s.text,0,0,r,{color:s.color,maxWidth:u,rotation:f,textAlign:Lm(a,e,n),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=z(t.grid&&t.grid.z,-1),n=z(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==He.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return ct(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ls{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;Am(e)&&(s=this.register(e));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,Rm(t,o,s),this.override&&tt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in tt[n]&&(delete tt[n][s],this.override&&delete Fe[s])}}function Rm(i,t,e){const s=Vi(Object.create(null),[e?tt.get(e):{},tt.get(t),i.defaults]);tt.set(t,s),i.defaultRoutes&&Nm(t,i.defaultRoutes),i.descriptors&&tt.describe(t,i.descriptors)}function Nm(i,t){Object.keys(t).forEach(e=>{const s=e.split("."),n=s.pop(),r=[i].concat(s).join("."),o=t[e].split("."),a=o.pop(),h=o.join(".");tt.route(r,n,h,a)})}function Am(i){return"id"in i&&"defaults"in i}class Dm{constructor(){this.controllers=new ls(xe,"datasets",!0),this.elements=new ls(se,"elements"),this.plugins=new ls(Object,"plugins"),this.scales=new ls(He,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{const r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):Y(n,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){const n=Jr(t);q(s["before"+n],[],s),e[t](s),q(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var Bt=new Dm;class Om{constructor(){this._init=void 0}notify(t,e,s,n){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,s,n){n=n||{};for(const r of t){const o=r.plugin,a=o[s],h=[e,n,r.options];if(q(a,h,o)===!1&&n.cancelable)return!1}return!0}invalidate(){B(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,n=z(s.options&&s.options.plugins,{}),r=Fm(s);return n===!1&&!e?[]:zm(t,r,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(h=>a.plugin.id===h.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}}function Fm(i){const t={},e=[],s=Object.keys(Bt.plugins.items);for(let r=0;r<s.length;r++)e.push(Bt.getPlugin(s[r]));const n=i.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Im(i,t){return!t&&i===!1?null:i===!0?{}:i}function zm(i,{plugins:t,localIds:e},s,n){const r=[],o=i.getContext();for(const a of t){const h=a.id,l=Im(s[h],n);l!==null&&r.push({plugin:a,options:Bm(i.config,{plugin:a,local:e[h]},l,o)})}return r}function Bm(i,{plugin:t,local:e},s,n){const r=i.pluginScopeKeys(t),o=i.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _r(i,t){const e=tt.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function jm(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Vm(i,t){return i===t?"_index_":"_value_"}function Ea(i){if(i==="x"||i==="y"||i==="r")return i}function Wm(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function yr(i,...t){if(Ea(i))return i;for(const e of t){const s=e.axis||Wm(e.position)||i.length>1&&Ea(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function La(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Hm(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(e.length)return La(i,"x",e[0])||La(i,"y",e[0])}return{}}function $m(i,t){const e=Fe[i.type]||{scales:{}},s=t.scales||{},n=_r(i.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!V(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=yr(o,a,Hm(o,i),tt.scales[a.type]),l=Vm(h,n),c=e.scales||{};r[o]=Li(Object.create(null),[{axis:h},a,c[h],c[l]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,h=o.indexAxis||_r(a,t),c=(Fe[a]||{}).scales||{};Object.keys(c).forEach(u=>{const f=jm(u,h),d=o[f+"AxisID"]||f;r[d]=r[d]||Object.create(null),Li(r[d],[{axis:f},s[d],c[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];Li(a,[tt.scales[a.type],tt.scale])}),r}function Pc(i){const t=i.options||(i.options={});t.plugins=z(t.plugins,{}),t.scales=$m(i,t)}function Cc(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Ym(i){return i=i||{},i.data=Cc(i.data),Pc(i),i}const Ta=new Map,kc=new Set;function cs(i,t){let e=Ta.get(i);return e||(e=t(),Ta.set(i,e),kc.add(e)),e}const _i=(i,t,e)=>{const s=pe(t,e);s!==void 0&&i.add(s)};class Um{constructor(t){this._config=Ym(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Cc(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Pc(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return cs(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return cs(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return cs(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return cs(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let n=s.get(t);return(!n||e)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){const{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;const h=new Set;e.forEach(c=>{t&&(h.add(t),c.forEach(u=>_i(h,t,u))),c.forEach(u=>_i(h,n,u)),c.forEach(u=>_i(h,Fe[r]||{},u)),c.forEach(u=>_i(h,tt,u)),c.forEach(u=>_i(h,xr,u))});const l=Array.from(h);return l.length===0&&l.push(Object.create(null)),kc.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Fe[e]||{},tt.datasets[e]||{},{type:e},tt,xr]}resolveNamedOptions(t,e,s,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ra(this._resolverCache,t,n);let h=o;if(Xm(o,e)){r.$shared=!1,s=me(s)?s():s;const l=this.createResolver(t,s,a);h=ai(o,s,l)}for(const l of e)r[l]=h[l];return r}createResolver(t,e,s=[""],n){const{resolver:r}=Ra(this._resolverCache,t,s);return V(e)?ai(r,e,void 0,n):r}}function Ra(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));const n=e.join();let r=s.get(n);return r||(r={resolver:io(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}const Km=i=>V(i)&&Object.getOwnPropertyNames(i).some(t=>me(i[t]));function Xm(i,t){const{isScriptable:e,isIndexable:s}=nc(i);for(const n of t){const r=e(n),o=s(n),a=(o||r)&&i[n];if(r&&(me(a)||Km(a))||o&&Z(a))return!0}return!1}var Gm="4.5.1";const Jm=["top","bottom","left","right","chartArea"];function Na(i,t){return i==="top"||i==="bottom"||Jm.indexOf(i)===-1&&t==="x"}function Aa(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function Da(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),q(e&&e.onComplete,[i],t)}function qm(i){const t=i.chart,e=t.options.animation;q(e&&e.onProgress,[i],t)}function Ec(i){return ro()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Ts={},Oa=i=>{const t=Ec(i);return Object.values(Ts).filter(e=>e.canvas===t).pop()};function Qm(i,t,e){const s=Object.keys(i);for(const n of s){const r=+n;if(r>=t){const o=i[n];delete i[n],(e>0||r>t)&&(i[r+e]=o)}}}function Zm(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}class Xs{static defaults=tt;static instances=Ts;static overrides=Fe;static registry=Bt;static version=Gm;static getChart=Oa;static register(...t){Bt.add(...t),Fa()}static unregister(...t){Bt.remove(...t),Fa()}constructor(t,e){const s=this.config=new Um(e),n=Ec(t),r=Oa(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||bm(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,o.aspectRatio),h=a&&a.canvas,l=h&&h.height,c=h&&h.width;if(this.id=Xd(),this.ctx=a,this.canvas=h,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Om,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ug(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Ts[this.id]=this,!a||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Kt.listen(this,"complete",Da),Kt.listen(this,"progress",qm),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:n,_aspectRatio:r}=this;return B(t)?e&&r?r:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Bt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():na(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ea(this.canvas,this.ctx),this}stop(){return Kt.stop(this),this}resize(t,e){Kt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,n=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,e,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,na(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),q(s.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Y(e,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,n=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],h=yr(o,a),l=h==="r",c=h==="x";return{options:a,dposition:l?"chartArea":c?"bottom":"left",dtype:l?"radialLinear":c?"category":"linear"}}))),Y(r,o=>{const a=o.options,h=a.id,l=yr(h,a),c=z(a.type,o.dtype);(a.position===void 0||Na(a.position,l)!==Na(o.dposition))&&(a.position=o.dposition),n[h]=!0;let u=null;if(h in s&&s[h].type===c)u=s[h];else{const f=Bt.getScale(c);u=new f({id:h,type:c,ctx:this.ctx,chart:this}),s[u.id]=u}u.init(a,t)}),Y(n,(o,a)=>{o||delete s[a]}),Y(s,o=>{wt.configure(this,o,o.options),wt.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((n,r)=>n.index-r.index),s>e){for(let n=e;n<s;++n)this._destroyDatasetMeta(n);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Aa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,n)=>{e.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=e.length;s<n;s++){const r=e[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||_r(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const h=Bt.getController(a),{datasetElementType:l,dataElementType:c}=tt.datasets[a];Object.assign(h,{dataElementType:Bt.getElement(c),datasetElementType:l&&Bt.getElement(l)}),o.controller=new h(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Y(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:u}=this.getDatasetMeta(l),f=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(f),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Y(r,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Aa("z","_idx"));const{_active:a,_lastEvent:h}=this;h?this._eventHandler(h,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Y(this.scales,t=>{wt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Uo(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:r}of e){const o=s==="_removeElements"?-r:r;Qm(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=s(0);for(let r=1;r<e;r++)if(!Uo(n,s(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wt.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],Y(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,me(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kt.has(this)?this.attached&&!Kt.running(this)&&Kt.start(this):(this.draw(),Da({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let n,r;for(n=0,r=e.length;n<r;++n){const o=e[n];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},n=pc(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&un(e,n),t.controller.draw(),n&&fn(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Zt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,n){const r=Jp.modes[e];return typeof r=="function"?r(this,t,s,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let n=s.filter(r=>r&&r._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=ve(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const n=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);Wi(e)?(r.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Kt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ea(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ts[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Y(this.options.events,r=>s(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(h,l)=>{e.addEventListener(this,h,l),t[h]=l},n=(h,l)=>{t[h]&&(e.removeEventListener(this,h,l),delete t[h])},r=(h,l)=>{this.canvas&&this.resize(h,l)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),s("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Y(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Y(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const n=s?"set":"remove";let r,o,a,h;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,h=t.length;a<h;++a){o=t[a];const l=o&&this.getDatasetMeta(o.datasetIndex).controller;l&&l[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ws(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const n=this.options.hover,r=(h,l)=>h.filter(c=>!l.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),o=r(e,t),a=s?t:r(t,e);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const r=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(r||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:n=[],options:r}=this,o=e,a=this._getActiveElements(t,n,s,o),h=tg(t),l=Zm(t,this._lastEvent,s,h);s&&(this._lastEvent=null,q(r.onHover,[t,a,this],this),h&&q(r.onClick,[t,a,this],this));const c=!Ws(a,n);return(c||e)&&(this._active=a,this._updateHoverStyles(a,n,e)),this._lastEvent=l,c}_getActiveElements(t,e,s,n){if(t.type==="mouseout")return[];if(!s)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}}function Fa(){return Y(Xs.instances,i=>i._plugins.invalidate())}function t0(i,t,e){const{startAngle:s,x:n,y:r,outerRadius:o,innerRadius:a,options:h}=t,{borderWidth:l,borderJoinStyle:c}=h,u=Math.min(l/o,xt(s-e));if(i.beginPath(),i.arc(n,r,o-l/2,s+u/2,e-u/2),a>0){const f=Math.min(l/a,xt(s-e));i.arc(n,r,a+l/2,e-f/2,s+f/2,!0)}else{const f=Math.min(l/2,o*xt(s-e));if(c==="round")i.arc(n,r,f,e-W/2,s+W/2,!0);else if(c==="bevel"){const d=2*f*f,g=-d*Math.cos(e+W/2)+n,p=-d*Math.sin(e+W/2)+r,m=d*Math.cos(s+W/2)+n,b=d*Math.sin(s+W/2)+r;i.lineTo(g,p),i.lineTo(m,b)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function e0(i,t,e){const{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:h}=t;let l=n/a;i.beginPath(),i.arc(r,o,a,s-l,e+l),h>n?(l=n/h,i.arc(r,o,h,e+l,s-l,!0)):i.arc(r,o,n,e+rt,s-rt),i.closePath(),i.clip()}function i0(i){return eo(i,["outerStart","outerEnd","innerStart","innerEnd"])}function s0(i,t,e,s){const n=i0(i.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=h=>{const l=(e-Math.min(r,h))*s/2;return ut(h,0,Math.min(r,l))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:ut(n.innerStart,0,o),innerEnd:ut(n.innerEnd,0,o)}}function Ke(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function Gs(i,t,e,s,n,r){const{x:o,y:a,startAngle:h,pixelMargin:l,innerRadius:c}=t,u=Math.max(t.outerRadius+s+e-l,0),f=c>0?c+s+e+l:0;let d=0;const g=n-h;if(s){const D=c>0?c-s:0,N=u>0?u-s:0,X=(D+N)/2,Mt=X!==0?g*X/(X+s):g;d=(g-Mt)/2}const p=Math.max(.001,g*u-e/W)/u,m=(g-p)/2,b=h+m+d,v=n-m-d,{outerStart:x,outerEnd:w,innerStart:_,innerEnd:S}=s0(t,f,u,v-b),y=u-x,C=u-w,E=b+x/y,L=v-w/C,T=f+_,F=f+S,j=b+_/T,et=v-S/F;if(i.beginPath(),r){const D=(E+L)/2;if(i.arc(o,a,u,E,D),i.arc(o,a,u,D,L),w>0){const at=Ke(C,L,o,a);i.arc(at.x,at.y,w,L,v+rt)}const N=Ke(F,v,o,a);if(i.lineTo(N.x,N.y),S>0){const at=Ke(F,et,o,a);i.arc(at.x,at.y,S,v+rt,et+Math.PI)}const X=(v-S/f+(b+_/f))/2;if(i.arc(o,a,f,v-S/f,X,!0),i.arc(o,a,f,X,b+_/f,!0),_>0){const at=Ke(T,j,o,a);i.arc(at.x,at.y,_,j+Math.PI,b-rt)}const Mt=Ke(y,b,o,a);if(i.lineTo(Mt.x,Mt.y),x>0){const at=Ke(y,E,o,a);i.arc(at.x,at.y,x,b-rt,E)}}else{i.moveTo(o,a);const D=Math.cos(E)*u+o,N=Math.sin(E)*u+a;i.lineTo(D,N);const X=Math.cos(L)*u+o,Mt=Math.sin(L)*u+a;i.lineTo(X,Mt)}i.closePath()}function n0(i,t,e,s,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let h=t.endAngle;if(r){Gs(i,t,e,s,h,n);for(let l=0;l<r;++l)i.fill();isNaN(a)||(h=o+(a%Q||Q))}return Gs(i,t,e,s,h,n),i.fill(),h}function r0(i,t,e,s,n){const{fullCircles:r,startAngle:o,circumference:a,options:h}=t,{borderWidth:l,borderJoinStyle:c,borderDash:u,borderDashOffset:f,borderRadius:d}=h,g=h.borderAlign==="inner";if(!l)return;i.setLineDash(u||[]),i.lineDashOffset=f,g?(i.lineWidth=l*2,i.lineJoin=c||"round"):(i.lineWidth=l,i.lineJoin=c||"bevel");let p=t.endAngle;if(r){Gs(i,t,e,s,p,n);for(let m=0;m<r;++m)i.stroke();isNaN(a)||(p=o+(a%Q||Q))}g&&e0(i,t,p),h.selfJoin&&p-o>=W&&d===0&&c!=="miter"&&t0(i,t,p),r||(Gs(i,t,e,s,p,n),i.stroke())}class o0 extends se{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){const n=this.getProps(["x","y"],s),{angle:r,distance:o}=Xl(n,{x:t,y:e}),{startAngle:a,endAngle:h,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,d=z(u,h-a),g=Hi(r,a,h)&&a!==h,p=d>=Q||g,m=qt(o,l+f,c+f);return p&&m}getCenterPoint(t){const{x:e,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:h,spacing:l}=this.options,c=(n+r)/2,u=(o+a+l+h)/2;return{x:e+Math.cos(c)*u,y:s+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:s}=this,n=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>Q?Math.floor(s/Q):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);const h=1-Math.sin(Math.min(W,s||0)),l=n*h;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,n0(t,this,l,r,o),r0(t,this,l,r,o),t.restore()}}function Lc(i,t,e=t){i.lineCap=z(e.borderCapStyle,t.borderCapStyle),i.setLineDash(z(e.borderDash,t.borderDash)),i.lineDashOffset=z(e.borderDashOffset,t.borderDashOffset),i.lineJoin=z(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=z(e.borderWidth,t.borderWidth),i.strokeStyle=z(e.borderColor,t.borderColor)}function a0(i,t,e){i.lineTo(e.x,e.y)}function h0(i){return i.stepped?Mg:i.tension||i.cubicInterpolationMode==="monotone"?Sg:a0}function Tc(i,t,e={}){const s=i.length,{start:n=0,end:r=s-1}=e,{start:o,end:a}=t,h=Math.max(n,o),l=Math.min(r,a),c=n<o&&r<o||n>a&&r>a;return{count:s,start:h,loop:t.loop,ilen:l<h&&!c?s+l-h:l-h}}function l0(i,t,e,s){const{points:n,options:r}=t,{count:o,start:a,loop:h,ilen:l}=Tc(n,e,s),c=h0(r);let{move:u=!0,reverse:f}=s||{},d,g,p;for(d=0;d<=l;++d)g=n[(a+(f?l-d:d))%o],!g.skip&&(u?(i.moveTo(g.x,g.y),u=!1):c(i,p,g,f,r.stepped),p=g);return h&&(g=n[(a+(f?l:0))%o],c(i,p,g,f,r.stepped)),!!h}function c0(i,t,e,s){const n=t.points,{count:r,start:o,ilen:a}=Tc(n,e,s),{move:h=!0,reverse:l}=s||{};let c=0,u=0,f,d,g,p,m,b;const v=w=>(o+(l?a-w:w))%r,x=()=>{p!==m&&(i.lineTo(c,m),i.lineTo(c,p),i.lineTo(c,b))};for(h&&(d=n[v(0)],i.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=n[v(f)],d.skip)continue;const w=d.x,_=d.y,S=w|0;S===g?(_<p?p=_:_>m&&(m=_),c=(u*c+w)/++u):(x(),i.lineTo(w,_),g=S,u=0,p=m=_),b=_}x()}function Mr(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?c0:l0}function u0(i){return i.stepped?ip:i.tension||i.cubicInterpolationMode==="monotone"?sp:Le}function f0(i,t,e,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,s)&&n.closePath()),Lc(i,t.options),i.stroke(n)}function d0(i,t,e,s){const{segments:n,options:r}=t,o=Mr(t);for(const a of n)Lc(i,r,a.style),i.beginPath(),o(i,t,a,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}const g0=typeof Path2D=="function";function p0(i,t,e,s){g0&&!t.options.segment?f0(i,t,e,s):d0(i,t,e,s)}class pn extends se{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;Xg(this._points,s,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lp(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,n=t[e],r=this.points,o=gc(this,{property:e,start:n,end:n});if(!o.length)return;const a=[],h=u0(s);let l,c;for(l=0,c=o.length;l<c;++l){const{start:u,end:f}=o[l],d=r[u],g=r[f];if(d===g){a.push(d);continue}const p=Math.abs((n-d[e])/(g[e]-d[e])),m=h(d,g,p,s.stepped);m[e]=t[e],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,e,s){return Mr(this)(t,this,e,s)}path(t,e,s){const n=this.segments,r=Mr(this);let o=this._loop;e=e||0,s=s||this.points.length-e;for(const a of n)o&=r(t,this,a,{start:e,end:e+s-1});return!!o}draw(t,e,s,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),p0(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ia(i,t,e,s){const n=i.options,{[e]:r}=i.getProps([e],s);return Math.abs(t-r)<n.radius+n.hitRadius}class m0 extends se{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,s){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return Ia(this,t,"x",e)}inYRange(t,e){return Ia(this,t,"y",e)}getCenterPoint(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const s=e&&t.borderWidth||0;return(e+s)*2}draw(t,e){const s=this.options;this.skip||s.radius<.1||!Zt(this,e,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,wr(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Rc(i,t){const{x:e,y:s,base:n,width:r,height:o}=i.getProps(["x","y","base","width","height"],t);let a,h,l,c,u;return i.horizontal?(u=o/2,a=Math.min(e,n),h=Math.max(e,n),l=s-u,c=s+u):(u=r/2,a=e-u,h=e+u,l=Math.min(s,n),c=Math.max(s,n)),{left:a,top:l,right:h,bottom:c}}function ue(i,t,e,s){return i?0:ut(t,e,s)}function b0(i,t,e){const s=i.options.borderWidth,n=i.borderSkipped,r=sc(s);return{t:ue(n.top,r.top,0,e),r:ue(n.right,r.right,0,t),b:ue(n.bottom,r.bottom,0,e),l:ue(n.left,r.left,0,t)}}function v0(i,t,e){const{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,r=Ne(n),o=Math.min(t,e),a=i.borderSkipped,h=s||V(n);return{topLeft:ue(!h||a.top||a.left,r.topLeft,0,o),topRight:ue(!h||a.top||a.right,r.topRight,0,o),bottomLeft:ue(!h||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ue(!h||a.bottom||a.right,r.bottomRight,0,o)}}function x0(i){const t=Rc(i),e=t.right-t.left,s=t.bottom-t.top,n=b0(i,e/2,s/2),r=v0(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Bn(i,t,e,s){const n=t===null,r=e===null,a=i&&!(n&&r)&&Rc(i,s);return a&&(n||qt(t,a.left,a.right))&&(r||qt(e,a.top,a.bottom))}function w0(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function _0(i,t){i.rect(t.x,t.y,t.w,t.h)}function jn(i,t,e={}){const s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-s,o=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+r,h:i.h+o,radius:i.radius}}class y0 extends se{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=x0(this),a=w0(o.radius)?$i:_0;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,jn(o,e,r)),t.clip(),a(t,jn(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,jn(r,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,s){return Bn(this,t,e,s)}inXRange(t,e){return Bn(this,t,null,e)}inYRange(t,e){return Bn(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+n)/2:e,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var M0=Object.freeze({__proto__:null,ArcElement:o0,BarElement:y0,LineElement:pn,PointElement:m0});const Sr=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],za=Sr.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function Nc(i){return Sr[i%Sr.length]}function Ac(i){return za[i%za.length]}function S0(i,t){return i.borderColor=Nc(t),i.backgroundColor=Ac(t),++t}function P0(i,t){return i.backgroundColor=i.data.map(()=>Nc(t++)),t}function C0(i,t){return i.backgroundColor=i.data.map(()=>Ac(t++)),t}function k0(i){let t=0;return(e,s)=>{const n=i.getDatasetMeta(s).controller;n instanceof ao?t=P0(e,t):n instanceof xc?t=C0(e,t):n&&(t=S0(e,t))}}function Ba(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function E0(i){return i&&(i.borderColor||i.backgroundColor)}function L0(){return tt.borderColor!=="rgba(0,0,0,0.1)"||tt.backgroundColor!=="rgba(0,0,0,0.1)"}var T0={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;const{data:{datasets:s},options:n}=i.config,{elements:r}=n,o=Ba(s)||E0(n)||r&&Ba(r)||L0();if(!e.forceOverride&&o)return;const a=k0(i);s.forEach(a)}};function R0(i,t,e,s,n){const r=n.samples||s;if(r>=e)return i.slice(t,t+e);const o=[],a=(e-2)/(r-2);let h=0;const l=t+e-1;let c=t,u,f,d,g,p;for(o[h++]=i[c],u=0;u<r-2;u++){let m=0,b=0,v;const x=Math.floor((u+1)*a)+1+t,w=Math.min(Math.floor((u+2)*a)+1,e)+t,_=w-x;for(v=x;v<w;v++)m+=i[v].x,b+=i[v].y;m/=_,b/=_;const S=Math.floor(u*a)+1+t,y=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:C,y:E}=i[c];for(d=g=-1,v=S;v<y;v++)g=.5*Math.abs((C-m)*(i[v].y-E)-(C-i[v].x)*(b-E)),g>d&&(d=g,f=i[v],p=v);o[h++]=f,c=p}return o[h++]=i[l],o}function N0(i,t,e,s){let n=0,r=0,o,a,h,l,c,u,f,d,g,p;const m=[],b=t+e-1,v=i[t].x,w=i[b].x-v;for(o=t;o<t+e;++o){a=i[o],h=(a.x-v)/w*s,l=a.y;const _=h|0;if(_===c)l<g?(g=l,u=o):l>p&&(p=l,f=o),n=(r*n+a.x)/++r;else{const S=o-1;if(!B(u)&&!B(f)){const y=Math.min(u,f),C=Math.max(u,f);y!==d&&y!==S&&m.push({...i[y],x:n}),C!==d&&C!==S&&m.push({...i[C],x:n})}o>0&&S!==d&&m.push(i[S]),m.push(a),c=_,r=0,g=p=l,u=f=d=o}}return m}function Dc(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function ja(i){i.data.datasets.forEach(t=>{Dc(t)})}function A0(i,t){const e=t.length;let s=0,n;const{iScale:r}=i,{min:o,max:a,minDefined:h,maxDefined:l}=r.getUserBounds();return h&&(s=ut(Qt(t,r.axis,o).lo,0,e-1)),l?n=ut(Qt(t,r.axis,a).hi+1,s,e)-s:n=e-s,{start:s,count:n}}var D0={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){ja(i);return}const s=i.width;i.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:a}=n,h=i.getDatasetMeta(r),l=o||n.data;if(Pi([a,i.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const c=i.scales[h.xAxisID];if(c.type!=="linear"&&c.type!=="time"||i.options.parsing)return;let{start:u,count:f}=A0(h,l);const d=e.threshold||4*s;if(f<=d){Dc(n);return}B(o)&&(n._data=l,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(e.algorithm){case"lttb":g=R0(l,u,f,s,e);break;case"min-max":g=N0(l,u,f,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=g})},destroy(i){ja(i)}};function O0(i,t,e){const s=i.segments,n=i.points,r=t.points,o=[];for(const a of s){let{start:h,end:l}=a;l=mn(h,l,n);const c=Pr(e,n[h],n[l],a.loop);if(!t.segments){o.push({source:a,target:c,start:n[h],end:n[l]});continue}const u=gc(t,c);for(const f of u){const d=Pr(e,r[f.start],r[f.end],f.loop),g=dc(a,n,d);for(const p of g)o.push({source:p,target:f,start:{[e]:Va(c,d,"start",Math.max)},end:{[e]:Va(c,d,"end",Math.min)}})}}return o}function Pr(i,t,e,s){if(s)return;let n=t[i],r=e[i];return i==="angle"&&(n=xt(n),r=xt(r)),{property:i,start:n,end:r}}function F0(i,t){const{x:e=null,y:s=null}=i||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=mn(o,a,n);const h=n[o],l=n[a];s!==null?(r.push({x:h.x,y:s}),r.push({x:l.x,y:s})):e!==null&&(r.push({x:e,y:h.y}),r.push({x:e,y:l.y}))}),r}function mn(i,t,e){for(;t>i;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Va(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function Oc(i,t){let e=[],s=!1;return Z(i)?(s=!0,e=i):e=F0(i,t),e.length?new pn({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function Wa(i){return i&&i.fill!==!1}function I0(i,t,e){let n=i[t].fill;const r=[t];let o;if(!e)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!nt(n))return n;if(o=i[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function z0(i,t,e){const s=W0(i);if(V(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return nt(n)&&Math.floor(n)===n?B0(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function B0(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function j0(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:V(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function V0(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:V(i)?s=i.value:s=t.getBaseValue(),s}function W0(i){const t=i.options,e=t.fill;let s=z(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function H0(i){const{scale:t,index:e,line:s}=i,n=[],r=s.segments,o=s.points,a=$0(t,e);a.push(Oc({x:null,y:t.bottom},s));for(let h=0;h<r.length;h++){const l=r[h];for(let c=l.start;c<=l.end;c++)Y0(n,o[c],a)}return new pn({points:n,options:{}})}function $0(i,t){const e=[],s=i.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const r=s[n];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function Y0(i,t,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n],{first:o,last:a,point:h}=U0(r,t,"x");if(!(!h||o&&a)){if(o)s.unshift(h);else if(i.push(h),!a)break}}i.push(...s)}function U0(i,t,e){const s=i.interpolate(t,e);if(!s)return{};const n=s[e],r=i.segments,o=i.points;let a=!1,h=!1;for(let l=0;l<r.length;l++){const c=r[l],u=o[c.start][e],f=o[c.end][e];if(qt(n,u,f)){a=n===u,h=n===f;break}}return{first:a,last:h,point:s}}class Fc{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:n,y:r,radius:o}=this;return e=e||{start:0,end:Q},t.arc(n,r,o,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:n}=this,r=t.angle;return{x:e+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}}function K0(i){const{chart:t,fill:e,line:s}=i;if(nt(e))return X0(t,e);if(e==="stack")return H0(i);if(e==="shape")return!0;const n=G0(i);return n instanceof Fc?n:Oc(n,s)}function X0(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function G0(i){return(i.scale||{}).getPointPositionForValue?q0(i):J0(i)}function J0(i){const{scale:t={},fill:e}=i,s=j0(e,t);if(nt(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function q0(i){const{scale:t,fill:e}=i,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=V0(e,t,r),a=[];if(s.grid.circular){const h=t.getPointPositionForValue(0,r);return new Fc({x:h.x,y:h.y,radius:t.getDistanceFromCenterForValue(o)})}for(let h=0;h<n;++h)a.push(t.getPointPositionForValue(h,o));return a}function Vn(i,t,e){const s=K0(t),{chart:n,index:r,line:o,scale:a,axis:h}=t,l=o.options,c=l.fill,u=l.backgroundColor,{above:f=u,below:d=u}=c||{},g=n.getDatasetMeta(r),p=pc(n,g);s&&o.points.length&&(un(i,e),Q0(i,{line:o,target:s,above:f,below:d,area:e,scale:a,axis:h,clip:p}),fn(i))}function Q0(i,t){const{line:e,target:s,above:n,below:r,area:o,scale:a,clip:h}=t,l=e._loop?"angle":t.axis;i.save();let c=r;r!==n&&(l==="x"?(Ha(i,s,o.top),Wn(i,{line:e,target:s,color:n,scale:a,property:l,clip:h}),i.restore(),i.save(),Ha(i,s,o.bottom)):l==="y"&&($a(i,s,o.left),Wn(i,{line:e,target:s,color:r,scale:a,property:l,clip:h}),i.restore(),i.save(),$a(i,s,o.right),c=n)),Wn(i,{line:e,target:s,color:c,scale:a,property:l,clip:h}),i.restore()}function Ha(i,t,e){const{segments:s,points:n}=t;let r=!0,o=!1;i.beginPath();for(const a of s){const{start:h,end:l}=a,c=n[h],u=n[mn(h,l,n)];r?(i.moveTo(c.x,c.y),r=!1):(i.lineTo(c.x,e),i.lineTo(c.x,c.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(u.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function $a(i,t,e){const{segments:s,points:n}=t;let r=!0,o=!1;i.beginPath();for(const a of s){const{start:h,end:l}=a,c=n[h],u=n[mn(h,l,n)];r?(i.moveTo(c.x,c.y),r=!1):(i.lineTo(e,c.y),i.lineTo(c.x,c.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(e,u.y)}i.lineTo(e,t.first().y),i.closePath(),i.clip()}function Wn(i,t){const{line:e,target:s,property:n,color:r,scale:o,clip:a}=t,h=O0(e,s,n);for(const{source:l,target:c,start:u,end:f}of h){const{style:{backgroundColor:d=r}={}}=l,g=s!==!0;i.save(),i.fillStyle=d,Z0(i,o,a,g&&Pr(n,u,f)),i.beginPath();const p=!!e.pathSegment(i,l);let m;if(g){p?i.closePath():Ya(i,s,f,n);const b=!!s.pathSegment(i,c,{move:p,reverse:!0});m=p&&b,m||Ya(i,s,u,n)}i.closePath(),i.fill(m?"evenodd":"nonzero"),i.restore()}}function Z0(i,t,e,s){const n=t.chart.chartArea,{property:r,start:o,end:a}=s||{};if(r==="x"||r==="y"){let h,l,c,u;r==="x"?(h=o,l=n.top,c=a,u=n.bottom):(h=n.left,l=o,c=n.right,u=a),i.beginPath(),e&&(h=Math.max(h,e.left),c=Math.min(c,e.right),l=Math.max(l,e.top),u=Math.min(u,e.bottom)),i.rect(h,l,c-h,u-l),i.clip()}}function Ya(i,t,e,s){const n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var tb={id:"filler",afterDatasetsUpdate(i,t,e){const s=(i.data.datasets||[]).length,n=[];let r,o,a,h;for(o=0;o<s;++o)r=i.getDatasetMeta(o),a=r.dataset,h=null,a&&a.options&&a instanceof pn&&(h={visible:i.isDatasetVisible(o),index:o,fill:z0(a,o,s),chart:i,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=h,n.push(h);for(o=0;o<s;++o)h=n[o],!(!h||h.fill===!1)&&(h.fill=I0(n,o,e.propagate))},beforeDraw(i,t,e){const s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),r=i.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Vn(i.ctx,a,r))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const r=s[n].$filler;Wa(r)&&Vn(i.ctx,r,i.chartArea)}},beforeDatasetDraw(i,t,e){const s=t.meta.$filler;!Wa(s)||e.drawTime!=="beforeDatasetDraw"||Vn(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ua=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},eb=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class Ka extends se{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=q(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=ct(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:h}=Ua(s,r);let l,c;e.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,r,a,h)+10):(c=this.maxHeight,l=this._fitCols(o,n,a,h)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,h=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+a;let u=t;r.textAlign="left",r.textBaseline="middle";let f=-1,d=-c;return this.legendItems.forEach((g,p)=>{const m=s+e/2+r.measureText(g.text).width;(p===0||l[l.length-1]+m+2*a>o)&&(u+=c,l[l.length-(p>0?0:1)]=0,d+=c,f++),h[p]={left:0,top:d,row:f,width:m,height:n},l[l.length-1]+=m+a}),u}_fitCols(t,e,s,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,h=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let u=a,f=0,d=0,g=0,p=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:v,itemHeight:x}=ib(s,e,r,m,n);b>0&&d+x+2*a>c&&(u+=f+a,l.push({width:f,height:d}),g+=f+a,p++,f=d=0),h[b]={left:g,top:d,col:p,width:v,height:x},f=Math.max(f,v),d+=x+a}),u+=f,l.push({width:f,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:r}}=this,o=ti(r,this.left,this.width);if(this.isHorizontal()){let a=0,h=vt(s,this.left+n,this.right-this.lineWidths[a]);for(const l of e)a!==l.row&&(a=l.row,h=vt(s,this.left+n,this.right-this.lineWidths[a])),l.top+=this.top+t+n,l.left=o.leftForLtr(o.x(h),l.width),h+=l.width+n}else{let a=0,h=vt(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const l of e)l.col!==a&&(a=l.col,h=vt(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),l.top=h,l.left+=this.left+n,l.left=o.leftForLtr(o.x(l.left),l.width),h+=l.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;un(t,this),this._draw(),fn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=tt.color,h=ti(t.rtl,this.left,this.width),l=ct(o.font),{padding:c}=o,u=l.size,f=u/2;let d;this.drawTitle(),n.textAlign=h.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=Ua(o,u),b=function(S,y,C){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;n.save();const E=z(C.lineWidth,1);if(n.fillStyle=z(C.fillStyle,a),n.lineCap=z(C.lineCap,"butt"),n.lineDashOffset=z(C.lineDashOffset,0),n.lineJoin=z(C.lineJoin,"miter"),n.lineWidth=E,n.strokeStyle=z(C.strokeStyle,a),n.setLineDash(z(C.lineDash,[])),o.usePointStyle){const L={radius:p*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},T=h.xPlus(S,g/2),F=y+f;ic(n,L,T,F,o.pointStyleWidth&&g)}else{const L=y+Math.max((u-p)/2,0),T=h.leftForLtr(S,g),F=Ne(C.borderRadius);n.beginPath(),Object.values(F).some(j=>j!==0)?$i(n,{x:T,y:L,w:g,h:p,radius:F}):n.rect(T,L,g,p),n.fill(),E!==0&&n.stroke()}n.restore()},v=function(S,y,C){Ie(n,C.text,S,y+m/2,l,{strikethrough:C.hidden,textAlign:h.textAlign(C.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?d={x:vt(r,this.left+c,this.right-s[0]),y:this.top+c+w,line:0}:d={x:this.left+c,y:vt(r,this.top+w+c,this.bottom-e[0].height),line:0},cc(this.ctx,t.textDirection);const _=m+c;this.legendItems.forEach((S,y)=>{n.strokeStyle=S.fontColor,n.fillStyle=S.fontColor;const C=n.measureText(S.text).width,E=h.textAlign(S.textAlign||(S.textAlign=o.textAlign)),L=g+f+C;let T=d.x,F=d.y;h.setWidth(this.width),x?y>0&&T+L+c>this.right&&(F=d.y+=_,d.line++,T=d.x=vt(r,this.left+c,this.right-s[d.line])):y>0&&F+_>this.bottom&&(T=d.x=T+e[d.line].width+c,d.line++,F=d.y=vt(r,this.top+w+c,this.bottom-e[d.line].height));const j=h.x(T);if(b(j,F,S),T=fg(E,T+g+f,x?T+L:this.right,t.rtl),v(h.x(T),F,S),x)d.x+=L+c;else if(typeof S.text!="string"){const et=l.lineHeight;d.y+=Ic(S,et)+c}else d.y+=_}),uc(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=ct(e.font),n=yt(e.padding);if(!e.display)return;const r=ti(t.rtl,this.left,this.width),o=this.ctx,a=e.position,h=s.size/2,l=n.top+h;let c,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+l,u=vt(t.align,u,this.right-f);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);c=l+vt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=vt(a,u,u+f);o.textAlign=r.textAlign(Zr(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,Ie(o,e.text,d,c,s)}_computeTitleHeight(){const t=this.options.title,e=ct(t.font),s=yt(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,r;if(qt(t,this.left,this.right)&&qt(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],qt(t,n.left,n.left+n.width)&&qt(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!rb(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=eb(n,s);n&&!r&&q(e.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&q(e.onHover,[t,s,this],this)}else s&&q(e.onClick,[t,s,this],this)}}function ib(i,t,e,s,n){const r=sb(s,i,t,e),o=nb(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function sb(i,t,e,s){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(n).width}function nb(i,t,e){let s=i;return typeof t.text!="string"&&(s=Ic(t,e)),s}function Ic(i,t){const e=i.text?i.text.length:0;return t*e}function rb(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var ob={id:"legend",_element:Ka,start(i,t,e){const s=i.legend=new Ka({ctx:i.ctx,options:e,chart:i});wt.configure(i,s,e),wt.addBox(i,s)},stop(i){wt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const s=i.legend;wt.configure(i,s,e),s.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(h=>{const l=h.controller.getStyle(e?0:void 0),c=yt(l.borderWidth);return{text:t[h.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!h.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:h.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class lo extends se{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=Z(s.text)?s.text.length:1;this._padding=yt(s.padding);const r=n*ct(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:n,right:r,options:o}=this,a=o.align;let h=0,l,c,u;return this.isHorizontal()?(c=vt(a,s,r),u=e+t,l=r-s):(o.position==="left"?(c=s+t,u=vt(a,n,e),h=W*-.5):(c=r-t,u=vt(a,e,n),h=W*.5),l=n-e),{titleX:c,titleY:u,maxWidth:l,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=ct(e.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:h,rotation:l}=this._drawArgs(r);Ie(t,e.text,0,0,s,{color:e.color,maxWidth:h,rotation:l,textAlign:Zr(e.align),textBaseline:"middle",translation:[o,a]})}}function ab(i,t){const e=new lo({ctx:i.ctx,options:t,chart:i});wt.configure(i,e,t),wt.addBox(i,e),i.titleBlock=e}var hb={id:"title",_element:lo,start(i,t,e){ab(i,e)},stop(i){const t=i.titleBlock;wt.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const s=i.titleBlock;wt.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const us=new WeakMap;var lb={id:"subtitle",start(i,t,e){const s=new lo({ctx:i.ctx,options:e,chart:i});wt.configure(i,s,e),wt.addBox(i,s),us.set(i,s)},stop(i){wt.removeBox(i,us.get(i)),us.delete(i)},beforeUpdate(i,t,e){const s=us.get(i);wt.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ki={average(i){if(!i.length)return!1;let t,e,s=new Set,n=0,r=0;for(t=0,e=i.length;t<e;++t){const a=i[t].element;if(a&&a.hasValue()){const h=a.tooltipPosition();s.add(h.x),n+=h.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,h)=>a+h)/s.size,y:n/r}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=i.length;r<o;++r){const h=i[r].element;if(h&&h.hasValue()){const l=h.getCenterPoint(),c=vr(t,l);c<n&&(n=c,a=h)}}if(a){const h=a.tooltipPosition();e=h.x,s=h.y}return{x:e,y:s}}};function zt(i,t){return t&&(Z(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function Xt(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function cb(i,t){const{element:e,datasetIndex:s,index:n}=t,r=i.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:i,label:o,parsed:r.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function Xa(i,t){const e=i.chart.ctx,{body:s,footer:n,title:r}=i,{boxWidth:o,boxHeight:a}=t,h=ct(t.bodyFont),l=ct(t.titleFont),c=ct(t.footerFont),u=r.length,f=n.length,d=s.length,g=yt(t.padding);let p=g.height,m=0,b=s.reduce((w,_)=>w+_.before.length+_.lines.length+_.after.length,0);if(b+=i.beforeBody.length+i.afterBody.length,u&&(p+=u*l.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),b){const w=t.displayColors?Math.max(a,h.lineHeight):h.lineHeight;p+=d*w+(b-d)*h.lineHeight+(b-1)*t.bodySpacing}f&&(p+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);let v=0;const x=function(w){m=Math.max(m,e.measureText(w).width+v)};return e.save(),e.font=l.string,Y(i.title,x),e.font=h.string,Y(i.beforeBody.concat(i.afterBody),x),v=t.displayColors?o+2+t.boxPadding:0,Y(s,w=>{Y(w.before,x),Y(w.lines,x),Y(w.after,x)}),v=0,e.font=c.string,Y(i.footer,x),e.restore(),m+=g.width,{width:m,height:p}}function ub(i,t){const{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function fb(i,t,e,s){const{x:n,width:r}=s,o=e.caretSize+e.caretPadding;if(i==="left"&&n+r+o>t.width||i==="right"&&n-r-o<0)return!0}function db(i,t,e,s){const{x:n,width:r}=e,{width:o,chartArea:{left:a,right:h}}=i;let l="center";return s==="center"?l=n<=(a+h)/2?"left":"right":n<=r/2?l="left":n>=o-r/2&&(l="right"),fb(l,i,t,e)&&(l="center"),l}function Ga(i,t,e){const s=e.yAlign||t.yAlign||ub(i,e);return{xAlign:e.xAlign||t.xAlign||db(i,t,e,s),yAlign:s}}function gb(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function pb(i,t,e){let{y:s,height:n}=i;return t==="top"?s+=e:t==="bottom"?s-=n+e:s-=n/2,s}function Ja(i,t,e,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=i,{xAlign:a,yAlign:h}=e,l=n+r,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:d}=Ne(o);let g=gb(t,a);const p=pb(t,h,l);return h==="center"?a==="left"?g+=l:a==="right"&&(g-=l):a==="left"?g-=Math.max(c,f)+n:a==="right"&&(g+=Math.max(u,d)+n),{x:ut(g,0,s.width-t.width),y:ut(p,0,s.height-t.height)}}function fs(i,t,e){const s=yt(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function qa(i){return zt([],Xt(i))}function mb(i,t,e){return ve(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Qa(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const zc={beforeTitle:Ut,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return B(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function Pt(i,t,e,s){const n=i[t].call(e,s);return typeof n>"u"?zc[t].call(e,s):n}class Za extends se{static positioners=ki;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&e.options.animation&&s.animations,r=new mc(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=mb(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,n=Pt(s,"beforeTitle",this,t),r=Pt(s,"title",this,t),o=Pt(s,"afterTitle",this,t);let a=[];return a=zt(a,Xt(n)),a=zt(a,Xt(r)),a=zt(a,Xt(o)),a}getBeforeBody(t,e){return qa(Pt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,n=[];return Y(t,r=>{const o={before:[],lines:[],after:[]},a=Qa(s,r);zt(o.before,Xt(Pt(a,"beforeLabel",this,r))),zt(o.lines,Pt(a,"label",this,r)),zt(o.after,Xt(Pt(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,e){return qa(Pt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,n=Pt(s,"beforeFooter",this,t),r=Pt(s,"footer",this,t),o=Pt(s,"afterFooter",this,t);let a=[];return a=zt(a,Xt(n)),a=zt(a,Xt(r)),a=zt(a,Xt(o)),a}_createItems(t){const e=this._active,s=this.chart.data,n=[],r=[],o=[];let a=[],h,l;for(h=0,l=e.length;h<l;++h)a.push(cb(this.chart,e[h]));return t.filter&&(a=a.filter((c,u,f)=>t.filter(c,u,f,s))),t.itemSort&&(a=a.sort((c,u)=>t.itemSort(c,u,s))),Y(a,c=>{const u=Qa(t.callbacks,c);n.push(Pt(u,"labelColor",this,c)),r.push(Pt(u,"labelPointStyle",this,c)),o.push(Pt(u,"labelTextColor",this,c))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const s=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=ki[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const h=this._size=Xa(this,s),l=Object.assign({},a,h),c=Ga(this.chart,s,l),u=Ja(s,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:u.x,y:u.y,width:h.width,height:h.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,n){const r=this.getCaretPosition(t,s,n);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,s){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:h,topRight:l,bottomLeft:c,bottomRight:u}=Ne(a),{x:f,y:d}=t,{width:g,height:p}=e;let m,b,v,x,w,_;return r==="center"?(w=d+p/2,n==="left"?(m=f,b=m-o,x=w+o,_=w-o):(m=f+g,b=m+o,x=w-o,_=w+o),v=m):(n==="left"?b=f+Math.max(h,c)+o:n==="right"?b=f+g-Math.max(l,u)-o:b=this.caretX,r==="top"?(x=d,w=x-o,m=b-o,v=b+o):(x=d+p,w=x+o,m=b+o,v=b-o),_=x),{x1:m,x2:b,x3:v,y1:x,y2:w,y3:_}}drawTitle(t,e,s){const n=this.title,r=n.length;let o,a,h;if(r){const l=ti(s.rtl,this.x,this.width);for(t.x=fs(this,s.titleAlign,s),e.textAlign=l.textAlign(s.titleAlign),e.textBaseline="middle",o=ct(s.titleFont),a=s.titleSpacing,e.fillStyle=s.titleColor,e.font=o.string,h=0;h<r;++h)e.fillText(n[h],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,h+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,e,s,n,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:h,boxWidth:l}=r,c=ct(r.bodyFont),u=fs(this,"left",r),f=n.x(u),d=h<c.lineHeight?(c.lineHeight-h)/2:0,g=e.y+d;if(r.usePointStyle){const p={radius:Math.min(l,h)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=n.leftForLtr(f,l)+l/2,b=g+h/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,wr(t,p,m,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,wr(t,p,m,b)}else{t.lineWidth=V(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const p=n.leftForLtr(f,l),m=n.leftForLtr(n.xPlus(f,1),l-2),b=Ne(o.borderRadius);Object.values(b).some(v=>v!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,$i(t,{x:p,y:g,w:l,h,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),$i(t,{x:m,y:g+1,w:l-2,h:h-2,radius:b}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(p,g,l,h),t.strokeRect(p,g,l,h),t.fillStyle=o.backgroundColor,t.fillRect(m,g+1,l-2,h-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:h,boxWidth:l,boxPadding:c}=s,u=ct(s.bodyFont);let f=u.lineHeight,d=0;const g=ti(s.rtl,this.x,this.width),p=function(C){e.fillText(C,g.x(t.x+d),t.y+f/2),t.y+=f+r},m=g.textAlign(o);let b,v,x,w,_,S,y;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=fs(this,m,s),e.fillStyle=s.bodyColor,Y(this.beforeBody,p),d=a&&m!=="right"?o==="center"?l/2+c:l+2+c:0,w=0,S=n.length;w<S;++w){for(b=n[w],v=this.labelTextColors[w],e.fillStyle=v,Y(b.before,p),x=b.lines,a&&x.length&&(this._drawColorBox(e,t,w,g,s),f=Math.max(u.lineHeight,h)),_=0,y=x.length;_<y;++_)p(x[_]),f=u.lineHeight;Y(b.after,p)}d=0,f=u.lineHeight,Y(this.afterBody,p),t.y-=r}drawFooter(t,e,s){const n=this.footer,r=n.length;let o,a;if(r){const h=ti(s.rtl,this.x,this.width);for(t.x=fs(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=h.textAlign(s.footerAlign),e.textBaseline="middle",o=ct(s.footerFont),e.fillStyle=s.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(n[a],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,e,s,n){const{xAlign:r,yAlign:o}=this,{x:a,y:h}=t,{width:l,height:c}=s,{topLeft:u,topRight:f,bottomLeft:d,bottomRight:g}=Ne(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+u,h),o==="top"&&this.drawCaret(t,e,s,n),e.lineTo(a+l-f,h),e.quadraticCurveTo(a+l,h,a+l,h+f),o==="center"&&r==="right"&&this.drawCaret(t,e,s,n),e.lineTo(a+l,h+c-g),e.quadraticCurveTo(a+l,h+c,a+l-g,h+c),o==="bottom"&&this.drawCaret(t,e,s,n),e.lineTo(a+d,h+c),e.quadraticCurveTo(a,h+c,a,h+c-d),o==="center"&&r==="left"&&this.drawCaret(t,e,s,n),e.lineTo(a,h+u),e.quadraticCurveTo(a,h,a+u,h),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,n=s&&s.x,r=s&&s.y;if(n||r){const o=ki[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Xa(this,t),h=Object.assign({},o,this._size),l=Ga(e,t,h),c=Ja(t,h,l,e);(n._to!==c.x||r._to!==c.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=yt(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,n,e),cc(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),uc(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,n=t.map(({datasetIndex:a,index:h})=>{const l=this.chart.getDatasetMeta(a);if(!l)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:l.data[h],index:h}}),r=!Ws(s,n),o=this._positionChanged(n,e);(r||o)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,s),a=this._positionChanged(o,t),h=e||!Ws(o,r)||a;return h&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),h}_getActiveElements(t,e,s,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:s,caretY:n,options:r}=this,o=ki[r.position].call(this,t,e);return o!==!1&&(s!==o.x||n!==o.y)}}var bb={id:"tooltip",_element:Za,positioners:ki,afterInit(i,t,e){e&&(i.tooltip=new Za({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zc},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},vb=Object.freeze({__proto__:null,Colors:T0,Decimation:D0,Filler:tb,Legend:ob,SubTitle:lb,Title:hb,Tooltip:bb});const xb=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function wb(i,t,e,s){const n=i.indexOf(t);if(n===-1)return xb(i,t,e,s);const r=i.lastIndexOf(t);return n!==r?e:n}const _b=(i,t)=>i===null?null:ut(Math.round(i),0,t);function th(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class yb extends He{static id="category";static defaults={ticks:{callback:th}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:n,label:r}of e)s[n]===r&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(B(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:wb(s,t,z(e,t),this._addedLabels),_b(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,n=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=e;o++)n.push({value:o});return n}getLabelForValue(t){return th.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Mb(i,t){const e=[],{bounds:n,step:r,min:o,max:a,precision:h,count:l,maxTicks:c,maxDigits:u,includeBounds:f}=i,d=r||1,g=c-1,{min:p,max:m}=t,b=!B(o),v=!B(a),x=!B(l),w=(m-p)/(u+1);let _=Xo((m-p)/g/d)*d,S,y,C,E;if(_<1e-14&&!b&&!v)return[{value:p},{value:m}];E=Math.ceil(m/_)-Math.floor(p/_),E>g&&(_=Xo(E*_/g/d)*d),B(h)||(S=Math.pow(10,h),_=Math.ceil(_*S)/S),n==="ticks"?(y=Math.floor(p/_)*_,C=Math.ceil(m/_)*_):(y=p,C=m),b&&v&&r&&rg((a-o)/r,_/1e3)?(E=Math.round(Math.min((a-o)/_,c)),_=(a-o)/E,y=o,C=a):x?(y=b?o:y,C=v?a:C,E=l-1,_=(C-y)/E):(E=(C-y)/_,Ti(E,Math.round(E),_/1e3)?E=Math.round(E):E=Math.ceil(E));const L=Math.max(Go(_),Go(y));S=Math.pow(10,B(h)?L:h),y=Math.round(y*S)/S,C=Math.round(C*S)/S;let T=0;for(b&&(f&&y!==o?(e.push({value:o}),y<o&&T++,Ti(Math.round((y+T*_)*S)/S,o,eh(o,w,i))&&T++):y<o&&T++);T<E;++T){const F=Math.round((y+T*_)*S)/S;if(v&&F>a)break;e.push({value:F})}return v&&f&&C!==a?e.length&&Ti(e[e.length-1].value,a,eh(a,w,i))?e[e.length-1].value=a:e.push({value:a}):(!v||C===a)&&e.push({value:C}),e}function eh(i,t,{horizontal:e,minRotation:s}){const n=Dt(s),r=(e?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+i).length;return Math.min(t/r,o)}class Js extends He{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return B(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this;const o=h=>n=e?n:h,a=h=>r=s?r:h;if(t){const h=$t(n),l=$t(r);h<0&&l<0?a(0):h>0&&l>0&&o(0)}if(n===r){let h=r===0?1:Math.abs(r*.05);a(r+h),t||o(n-h)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=Mb(n,r);return t.bounds==="ticks"&&Kl(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return qi(t,this.chart.options.locale,this.options.ticks.format)}}class Sb extends Js{static id="linear";static defaults={ticks:{callback:cn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=nt(t)?t:0,this.max=nt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=Dt(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Ui=i=>Math.floor(le(i)),Pe=(i,t)=>Math.pow(10,Ui(i)+t);function ih(i){return i/Math.pow(10,Ui(i))===1}function sh(i,t,e){const s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function Pb(i,t){const e=t-i;let s=Ui(e);for(;sh(i,t,s)>10;)s++;for(;sh(i,t,s)<10;)s--;return Math.min(s,Ui(i))}function Cb(i,{min:t,max:e}){t=Tt(i.min,t);const s=[],n=Ui(t);let r=Pb(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),h=n>r?Math.pow(10,n):0,l=Math.round((t-h)*o)/o,c=Math.floor((t-h)/a/10)*a*10;let u=Math.floor((l-c)/Math.pow(10,r)),f=Tt(i.min,Math.round((h+c+u*Math.pow(10,r))*o)/o);for(;f<e;)s.push({value:f,major:ih(f),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),f=Math.round((h+c+u*Math.pow(10,r))*o)/o;const d=Tt(i.max,f);return s.push({value:d,major:ih(d),significand:u}),s}class kb extends He{static id="logarithmic";static defaults={ticks:{callback:cn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=Js.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return nt(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=nt(t)?Math.max(0,t):null,this.max=nt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!nt(this._userMin)&&(this.min=t===Pe(this.min,0)?Pe(this.min,-1):Pe(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,n=this.max;const r=a=>s=t?s:a,o=a=>n=e?n:a;s===n&&(s<=0?(r(1),o(10)):(r(Pe(s,-1)),o(Pe(n,1)))),s<=0&&r(Pe(n,-1)),n<=0&&o(Pe(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=Cb(e,this);return t.bounds==="ticks"&&Kl(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":qi(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=le(t),this._valueRange=le(this.max)-le(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(le(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Cr(i){const t=i.ticks;if(t.display&&i.display){const e=yt(t.backdropPadding);return z(t.font&&t.font.size,tt.font.size)+e.height}return 0}function Eb(i,t,e){return e=Z(e)?e:[e],{w:yg(i,t.string,e),h:e.length*t.lineHeight}}function nh(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function Lb(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],r=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?W/r:0;for(let h=0;h<r;h++){const l=o.setContext(i.getPointLabelContext(h));n[h]=l.padding;const c=i.getPointPosition(h,i.drawingArea+n[h],a),u=ct(l.font),f=Eb(i.ctx,u,i._pointLabels[h]);s[h]=f;const d=xt(i.getIndexAngle(h)+a),g=Math.round(qr(d)),p=nh(g,c.x,f.w,0,180),m=nh(g,c.y,f.h,90,270);Tb(e,t,d,p,m)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=Ab(i,s,n)}function Tb(i,t,e,s,n){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,h=0;s.start<t.l?(a=(t.l-s.start)/r,i.l=Math.min(i.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,i.r=Math.max(i.r,t.r+a)),n.start<t.t?(h=(t.t-n.start)/o,i.t=Math.min(i.t,t.t-h)):n.end>t.b&&(h=(n.end-t.b)/o,i.b=Math.max(i.b,t.b+h))}function Rb(i,t,e){const s=i.drawingArea,{extra:n,additionalAngle:r,padding:o,size:a}=e,h=i.getPointPosition(t,s+n+o,r),l=Math.round(qr(xt(h.angle+rt))),c=Fb(h.y,a.h,l),u=Db(l),f=Ob(h.x,a.w,u);return{visible:!0,x:h.x,y:c,textAlign:u,left:f,top:c,right:f+a.w,bottom:c+a.h}}function Nb(i,t){if(!t)return!0;const{left:e,top:s,right:n,bottom:r}=i;return!(Zt({x:e,y:s},t)||Zt({x:e,y:r},t)||Zt({x:n,y:s},t)||Zt({x:n,y:r},t))}function Ab(i,t,e){const s=[],n=i._pointLabels.length,r=i.options,{centerPointLabels:o,display:a}=r.pointLabels,h={extra:Cr(r)/2,additionalAngle:o?W/n:0};let l;for(let c=0;c<n;c++){h.padding=e[c],h.size=t[c];const u=Rb(i,c,h);s.push(u),a==="auto"&&(u.visible=Nb(u,l),u.visible&&(l=u))}return s}function Db(i){return i===0||i===180?"center":i<180?"left":"right"}function Ob(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function Fb(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function Ib(i,t,e){const{left:s,top:n,right:r,bottom:o}=e,{backdropColor:a}=t;if(!B(a)){const h=Ne(t.borderRadius),l=yt(t.backdropPadding);i.fillStyle=a;const c=s-l.left,u=n-l.top,f=r-s+l.width,d=o-n+l.height;Object.values(h).some(g=>g!==0)?(i.beginPath(),$i(i,{x:c,y:u,w:f,h:d,radius:h}),i.fill()):i.fillRect(c,u,f,d)}}function zb(i,t){const{ctx:e,options:{pointLabels:s}}=i;for(let n=t-1;n>=0;n--){const r=i._pointLabelItems[n];if(!r.visible)continue;const o=s.setContext(i.getPointLabelContext(n));Ib(e,o,r);const a=ct(o.font),{x:h,y:l,textAlign:c}=r;Ie(e,i._pointLabels[n],h,l+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}function Bc(i,t,e,s){const{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,Q);else{let r=i.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=i.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function Bb(i,t,e,s,n){const r=i.ctx,o=t.circular,{color:a,lineWidth:h}=t;!o&&!s||!a||!h||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=h,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),Bc(i,e,o,s),r.closePath(),r.stroke(),r.restore())}function jb(i,t,e){return ve(i,{label:e,index:t,type:"pointLabel"})}class Vb extends Js{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:cn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=yt(Cr(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=nt(t)&&!isNaN(t)?t:0,this.max=nt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Cr(this.options))}generateTickLabels(t){Js.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const n=q(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?Lb(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){const e=Q/(this._pointLabels.length||1),s=this.options.startAngle||0;return xt(t*e+Dt(s))}getDistanceFromCenterForValue(t){if(B(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(B(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return jb(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const n=this.getIndexAngle(t)-rt+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),Bc(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:n,border:r}=e,o=this._pointLabels.length;let a,h,l;if(e.pointLabels.display&&zb(this,o),n.display&&this.ticks.forEach((c,u)=>{if(u!==0||u===0&&this.min<0){h=this.getDistanceFromCenterForValue(c.value);const f=this.getContext(u),d=n.setContext(f),g=r.setContext(f);Bb(this,d,h,o,g)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const c=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:f}=c;!f||!u||(t.lineWidth=f,t.strokeStyle=u,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,h=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,h),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,h)=>{if(h===0&&this.min>=0&&!e.reverse)return;const l=s.setContext(this.getContext(h)),c=ct(l.font);if(r=this.getDistanceFromCenterForValue(this.ticks[h].value),l.showLabelBackdrop){t.font=c.string,o=t.measureText(a.label).width,t.fillStyle=l.backdropColor;const u=yt(l.backdropPadding);t.fillRect(-o/2-u.left,-r-c.size/2-u.top,o+u.width,c.size+u.height)}Ie(t,a.label,0,-r,c,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),t.restore()}drawTitle(){}}const bn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ct=Object.keys(bn);function rh(i,t){return i-t}function oh(i,t){if(B(t))return null;const e=i._adapter,{parser:s,round:n,isoWeekday:r}=i._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),nt(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(n&&(o=n==="week"&&(oi(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,n)),+o)}function ah(i,t,e,s){const n=Ct.length;for(let r=Ct.indexOf(i);r<n-1;++r){const o=bn[Ct[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return Ct[r]}return Ct[n-1]}function Wb(i,t,e,s,n){for(let r=Ct.length-1;r>=Ct.indexOf(e);r--){const o=Ct[r];if(bn[o].common&&i._adapter.diff(n,s,o)>=t-1)return o}return Ct[e?Ct.indexOf(e):0]}function Hb(i){for(let t=Ct.indexOf(i)+1,e=Ct.length;t<e;++t)if(bn[Ct[t]].common)return Ct[t]}function hh(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:s,hi:n}=Qr(e,t),r=e[s]>=t?e[s]:e[n];i[r]=!0}}function $b(i,t,e,s){const n=i._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value;let a,h;for(a=r;a<=o;a=+n.add(a,1,s))h=e[a],h>=0&&(t[h].major=!0);return t}function lh(i,t,e){const s=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!e?s:$b(i,s,n,e)}class kr extends He{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),n=this._adapter=new Yp._date(t.adapters.date);n.init(e),Li(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:oh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function h(l){!o&&!isNaN(l.min)&&(n=Math.min(n,l.min)),!a&&!isNaN(l.max)&&(r=Math.max(r,l.max))}(!o||!a)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),n=nt(n)&&!isNaN(n)?n:+e.startOf(Date.now(),s),r=nt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),s)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=lg(n,r,o);return this._unit=e.unit||(s.autoSkip?ah(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):Wb(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Hb(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),lh(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=ut(e,0,o),s=ut(s,0,o),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,n=this.options,r=n.time,o=r.unit||ah(r.minUnit,e,s,this._getLabelCapacity(e)),a=z(n.ticks.stepSize,1),h=o==="week"?r.isoWeekday:!1,l=oi(h)||h===!0,c={};let u=e,f,d;if(l&&(u=+t.startOf(u,"isoWeek",h)),u=+t.startOf(u,l?"day":o),t.diff(s,e,o)>1e5*a)throw new Error(e+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(f=u,d=0;f<s;f=+t.add(f,a,o),d++)hh(c,f,g);return(f===s||n.bounds==="ticks"||d===1)&&hh(c,f,g),Object.keys(c).sort(rh).map(p=>+p)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,o=e||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,n){const r=this.options,o=r.ticks.callback;if(o)return q(o,[t,e,s],this);const a=r.time.displayFormats,h=this._unit,l=this._majorUnit,c=h&&a[h],u=l&&a[l],f=s[e],d=l&&u&&f&&f.major;return this._adapter.format(t,n||(d?u:c))}generateTickLabels(t){let e,s,n;for(e=0,s=t.length;e<s;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,n=Dt(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,n=s[e.unit]||s.millisecond,r=this._tickFormatFunction(t,0,lh(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,s=n.length;e<s;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const n=this.getLabels();for(e=0,s=n.length;e<s;++e)t.push(oh(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Jl(t.sort(rh))}}function ds(i,t,e){let s=0,n=i.length-1,r,o,a,h;e?(t>=i[s].pos&&t<=i[n].pos&&({lo:s,hi:n}=Qt(i,"pos",t)),{pos:r,time:a}=i[s],{pos:o,time:h}=i[n]):(t>=i[s].time&&t<=i[n].time&&({lo:s,hi:n}=Qt(i,"time",t)),{time:r,pos:a}=i[s],{time:o,pos:h}=i[n]);const l=o-r;return l?a+(h-a)*(t-r)/l:a}class Yb extends kr{static id="timeseries";static defaults=kr.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ds(e,this.min),this._tableRange=ds(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,n=[],r=[];let o,a,h,l,c;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=s&&n.push(l);if(n.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)c=n[o+1],h=n[o-1],l=n[o],Math.round((c+h)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((n,r)=>n-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(ds(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return ds(this._table,s*this._tableRange+this._minPos,!0)}}var Ub=Object.freeze({__proto__:null,CategoryScale:yb,LinearScale:Sb,LogarithmicScale:kb,RadialLinearScale:Vb,TimeScale:kr,TimeSeriesScale:Yb});const Kb=[$p,M0,vb,Ub];Xs.register(...Kb);async function Xb(){const t=(await jl({url:Wt.InfoUrl,method:"POST",body:{type:"portfolio",user:Wt.AccountAddress}}))?.find(n=>n?.[0]==="allTime")?.[1]??{},e=t.accountValueHistory??[],s=t.pnlHistory??[];return U.isShowHistory=!0,{accountValue:e.map(n=>({time:ri(n[0]),value:Number(n[1])})),totalPnL:s.map(n=>({time:ri(n[0]),value:Number(n[1])}))}}function ch(i,t,e){return{type:"line",data:{labels:t.map(s=>s.time.slice(0,16)),datasets:[{data:t.map(s=>s.value),pointRadius:0,pointHoverRadius:0,tension:.4,borderWidth:2,backgroundColor:t.map(s=>i==="Account Value"?"#4FC1FF":s.value>0?K.green:K.red),segment:{borderColor:s=>i==="Account Value"?"#4FC1FF":s.p1.parsed.y>0?K.green:K.red}}]},options:{interaction:{mode:"index",intersect:!1},animation:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:e?K.blackGray:K.whiteGray,maxTicksLimit:5,callback:function(s){return this.getLabelForValue(s).slice(5,10)}},grid:{display:!1}},y:{position:"right",ticks:{color:e?K.blackGray:K.whiteGray}}}}}}const Gb=I.memo(()=>{const[i,t]=I.useState({accountValue:[],totalPnL:[]}),[e,s]=I.useState("TotalPnL"),n=I.useMemo(()=>({totalPnLChartEl:null,accountValueChartEl:null}),[]),r=I.useMemo(()=>({totalPnLChart:null,accountValueChart:null}),[]);I.useEffect(()=>{(async()=>t(await Xb()))()},[]);const o=We(U);I.useEffect(()=>{n.accountValueChartEl=document.getElementById("accountValueChart"),i.accountValue.length>0&&n.accountValueChartEl&&e==="Account Value"&&(r.accountValueChart&&r.accountValueChart.destroy&&r.accountValueChart.destroy(),r.accountValueChart=new Xs(n.accountValueChartEl,ch(e,i.accountValue,o.isLight))),n.totalPnLChartEl=document.getElementById("totalPnLChart"),i.totalPnL.length>0&&n.totalPnLChartEl&&e==="TotalPnL"&&(r.totalPnLChart&&r.totalPnLChart.destroy&&r.totalPnLChart.destroy(),r.totalPnLChart=new Xs(n.totalPnLChartEl,ch(e,i.totalPnL,o.isLight)))},[i.accountValue.length,i.totalPnL.length,e,o.isLight]);const a=ie();function h(){return{back:st`
        background-color: ${o.isLight?"#F7F8F9":"#1F262F"};
        user-select: none;
      `,container:st`
      `,font:st`
        font-size: 17px;
        user-select: none;
        color: ${o.isLight?K.black:K.white};
      `}}const l=h(),c=Wt.AccountAddress.slice(0,6),u=Wt.AccountAddress.slice(-4,Wt.AccountAddress.length),d="ontouchstart"in window||navigator.maxTouchPoints>0?"click":"hover";return M.jsxs("div",{className:it(a.container),children:[M.jsx("div",{style:{height:"10px"}}),M.jsxs("div",{className:it(a.fsbc,l.container),children:[M.jsx("div",{className:l.font,children:M.jsxs(hl,{mouseEnterDelay:0,trigger:d,title:Wt.AccountAddress,children:[c,"...",u]})}),M.jsx("div",{style:{userSelect:"none"},children:M.jsx(pu,{defaultValue:e,style:{width:150},onChange:g=>s(g),value:e,options:[{value:"Account Value",label:"Account Value"},{value:"TotalPnL",label:"TotalPnL"}]})})]}),M.jsx("div",{style:{height:"10px"}}),e==="TotalPnL"?M.jsx(M.Fragment,{children:M.jsx("div",{className:l.back,children:M.jsx("canvas",{id:"totalPnLChart",height:"130"})})}):M.jsx(M.Fragment,{}),e==="Account Value"?M.jsx(M.Fragment,{children:M.jsx("div",{className:l.back,children:M.jsx("canvas",{id:"accountValueChart",height:"130"})})}):M.jsx(M.Fragment,{})]})}),ft=[];for(let i=0;i<256;++i)ft.push((i+256).toString(16).slice(1));function Jb(i,t=0){return(ft[i[t+0]]+ft[i[t+1]]+ft[i[t+2]]+ft[i[t+3]]+"-"+ft[i[t+4]]+ft[i[t+5]]+"-"+ft[i[t+6]]+ft[i[t+7]]+"-"+ft[i[t+8]]+ft[i[t+9]]+"-"+ft[i[t+10]]+ft[i[t+11]]+ft[i[t+12]]+ft[i[t+13]]+ft[i[t+14]]+ft[i[t+15]]).toLowerCase()}let Hn;const qb=new Uint8Array(16);function Qb(){if(!Hn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hn=crypto.getRandomValues.bind(crypto)}return Hn(qb)}const Zb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uh={randomUUID:Zb};function t1(i,t,e){i=i||{};const s=i.random??i.rng?.()??Qb();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Jb(s)}function jc(i,t,e){return uh.randomUUID&&!i?uh.randomUUID():t1(i)}const{Column:Ce}=ar,Vc=()=>({arrowButton:st`
      width: 40px;
      height: 32px;
      padding: 0;
    `}),Wc=i=>{const t=i.name;return t==="rightArrow"?M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:M.jsx("path",{d:"M6 12.796V3.204L11.481 8 6 12.796zm.659.753 5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753z"})}):t==="leftArrow"?M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:M.jsx("path",{d:"M10 12.796V3.204L4.519 8 10 12.796zm-.659.753-5.48-4.796a1 1 0 0 1 0-1.506l5.48-4.796A1 1 0 0 1 11 3.204v9.592a1 1 0 0 1-1.659.753z"})}):M.jsx(M.Fragment,{})},e1=()=>{const i=Vc(),t=ie();return M.jsx(As,{className:i.arrowButton,children:M.jsx("div",{className:t.fcc,children:M.jsx(Wc,{name:"leftArrow"})})})},i1=()=>{const i=Vc(),t=ie();return M.jsx(As,{className:i.arrowButton,children:M.jsx("div",{className:t.fcc,children:M.jsx(Wc,{name:"rightArrow"})})})},s1=I.memo(()=>{const i=We(U),t=ie(),[e,s]=I.useState(!1),[n,r]=I.useState(!1),o=I.useMemo(()=>({res:null}),[]),a=x=>ri(x?.getTime()??new Date().getTime()).slice(0,7),[h,l]=I.useState(a(new Date));I.useEffect(()=>{(async()=>(o.res=await n1(),r(!0),U.isShowFills=!0))()},[]);const c=I.useMemo(()=>{if(n)return o.res.filter(x=>x.time.slice(0,7)===h)},[n,h]),u=I.useMemo(()=>(i?.position?.entryPrice,i?.position?.positionValue,i?.position?.unrealizedPnl&&(s(!0),U.isShowPosition=!0),[{key:jc(),entryPrice:i?.position?.entryPrice,positionValue:i?.position?.positionValue,unrealizedPnl:i?.position?.unrealizedPnl}]),[i?.position?.entryPrice,i?.position?.positionValue,i?.position?.unrealizedPnl]),f=I.useMemo(()=>({width:"220px"}),[]),d=I.useMemo(()=>h?ll(h):"",[h]),g=I.useCallback(x=>{const w=x?.$d??null;l(w?a(w):"")},[]),p=()=>{l(jo(h||a(),-1))},m=()=>{l(jo(h||a(),1))},v="ontouchstart"in window||navigator.maxTouchPoints>0?"click":"hover";return M.jsxs("div",{className:it(t.container),children:[e?M.jsxs(M.Fragment,{children:[M.jsx("div",{style:{height:"10px"}}),M.jsxs(ar,{size:"small",pagination:!1,bordered:!0,dataSource:u,children:[M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"entry price",dataIndex:"entryPrice"}),M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"position value",dataIndex:"positionValue"}),M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"unrealized pnl",dataIndex:"unrealizedPnl"})]})]}):M.jsx(M.Fragment,{}),e?M.jsxs(M.Fragment,{children:[M.jsx("div",{style:{height:"20px"}}),M.jsxs("div",{className:t.fsbc,children:[M.jsx("div",{children:M.jsx(mu,{inputReadOnly:!0,style:f,value:d,onChange:g,picker:"month"})}),M.jsxs("div",{className:t.fsbc,style:{gap:"10px"},children:[M.jsx("div",{onClick:p,children:M.jsx(e1,{})}),M.jsx("div",{onClick:m,children:M.jsx(i1,{})})]})]}),M.jsx("div",{style:{height:"20px"}}),M.jsxs(ar,{size:"small",pagination:!1,bordered:!0,dataSource:c,children:[M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"time("+o.res.at(-1).time.slice(-3)+")",dataIndex:"time",render:(x,w)=>M.jsx(M.Fragment,{children:w.time.slice(0,16)})}),M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"price",dataIndex:"price",render:(x,w)=>M.jsx(M.Fragment,{children:M.jsx(hl,{mouseEnterDelay:0,trigger:v,title:M.jsx(M.Fragment,{children:M.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto auto",justifyItems:"center"},children:[M.jsx("div",{children:"fee"}),M.jsx("div",{style:{whiteSpace:"pre"},children:" : "}),M.jsx("div",{children:w.fee}),M.jsx("div",{children:"pnl"}),M.jsx("div",{style:{whiteSpace:"pre"},children:" : "}),M.jsx("div",{children:w.closedPnl})]})}),placement:"left",children:Te(w.price).format("0,0")})})}),M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"side",dataIndex:"side"}),M.jsx(Ce,{className:it(t.columnHeight),align:"center",title:"size",dataIndex:"size"})]})]}):M.jsx(M.Fragment,{})]})});async function n1(){let i=await Vl({type:"userFills",user:Wt.AccountAddress})??[];i=i.filter(e=>e.coin==="BTC").map(e=>{let s=e.side;return e.side==="A"&&(s="SHORT"),e.side==="B"&&(s="LONG"),{time:ri(e.time),side:s,price:Number(e.px),closedPnl:Number(e.closedPnl),fee:Number(e.fee),size:Number(e.sz)}}),i=i.reverse();const t=new Map;for(const e of i){const s=e.time+e.side;t.has(s)?t.get(s)?.push(e):t.set(s,[e])}i=[];for(const e of t.values()){const s=e[0].time,n=e[0].side,r=e.map(c=>c.price).reduce((c,u)=>c+u,0),o=Number.parseInt(""+r/e.length),a=e.map(c=>c.size).reduce((c,u)=>En(c,u),0),h=e.map(c=>c.fee).reduce((c,u)=>En(c,u),0),l=e.map(c=>c.closedPnl).reduce((c,u)=>En(c,u),0);i.push({key:jc(),time:s,side:n,price:o,size:a,fee:h,closedPnl:l})}for(let e=0;e<i.length;e++)i[e].closedPnl===0&&i[e-1]&&(i[e-1].side="Hedge");return i}const r1=I.memo(()=>{const i=Re.width-Re.paddingLeft-Re.paddingRight,t=st`
    height: 1px;
    width: ${i}px;
    border-radius: 2px;
    background-color: ${K.blackGray};
  `;return M.jsx("div",{className:t})}),o1=I.memo(({width:i,border:t})=>{const e=st`
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
    width: ${i}px;
    height: ${i}px;
    border-radius: 50%;
    border-top: ${t}px solid #e2e2e2;
    border-right: ${t}px solid #e2e2e2;
    border-bottom: ${t}px solid #e2e2e2;
    border-left: ${t}px solid #409eff;
    animation: spin 1.5s linear infinite;
  `;return M.jsx(M.Fragment,{children:M.jsx("div",{className:it(e)})})}),a1=I.memo(()=>{const i=We(U),t=ie();return M.jsx(M.Fragment,{children:M.jsx("div",{className:t.container,style:{display:"flex",justifyContent:"end"},children:M.jsx(bu,{checked:!i.isLight,onChange:()=>{U.isLight=!U.isLight},checkedChildren:"Dark",unCheckedChildren:"Light"})})})});function G(i){var t=i.width,e=i.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function De(i,t){return i.width===t.width&&i.height===t.height}var h1=(function(){function i(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return i.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(i.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),i.prototype.subscribe=function(t){var e=this,s={next:t};return this._observers.push(s),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==s})}}},i.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},i.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},i.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},i.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},i})();function l1(i){return new h1(i)}var c1=(function(){function i(t,e,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=G({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(r){return r}),this._allowResizeObserver=(n=s?.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return i.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(i.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitmapSize",{get:function(){return G({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),i.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=G(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},i.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(i.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),i.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},i.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},i.prototype._resizeBitmap=function(t){var e=this.bitmapSize;De(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},i.prototype._emitBitmapSizeChanged=function(t,e){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,s=G(this._transformBitmapSize(t,this._canvasElementClientSize)),n=De(this.bitmapSize,s)?null:s;e===null&&n===null||e!==null&&n!==null&&De(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},i.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}f1().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},i.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=fh(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=l1(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},i.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var s=fh(this._canvasElement);if(s!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:s.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?d1(r[0],n):G({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},i.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var s=e.find(function(o){return o.target===t._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],r=G({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},i})();function u1(i,t){return new c1(i,t.transform,t.options)}function fh(i){return i.ownerDocument.defaultView}function f1(){return new Promise(function(i){var t=new ResizeObserver(function(e){i(e.every(function(s){return"devicePixelContentBoxSize"in s})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function d1(i,t){return G({width:Math.round(i.left*t+i.width*t)-Math.round(i.left*t),height:Math.round(i.top*t+i.height*t)-Math.round(i.top*t)})}var g1=(function(){function i(t,e,s){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=t}return i.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},i.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(i.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),i})();function ze(i,t){var e=i.canvasElementClientSize;if(e.width===0||e.height===0)return null;var s=i.bitmapSize;if(s.width===0||s.height===0)return null;var n=i.canvasElement.getContext("2d",t);return n===null?null:new g1(n,e,s)}const Hc={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var dh,gh;function Be(i,t){const e={0:[],1:[i.lineWidth,i.lineWidth],2:[2*i.lineWidth,2*i.lineWidth],3:[6*i.lineWidth,6*i.lineWidth],4:[i.lineWidth,4*i.lineWidth]}[t];i.setLineDash(e)}function $c(i,t,e,s){i.beginPath();const n=i.lineWidth%2?.5:0;i.moveTo(e,t+n),i.lineTo(s,t+n),i.stroke()}function pt(i,t){if(!i)throw new Error("Assertion failed"+(t?": "+t:""))}function Lt(i){if(i===void 0)throw new Error("Value is undefined");return i}function k(i){if(i===null)throw new Error("Value is null");return i}function fe(i){return k(Lt(i))}(function(i){i[i.Simple=0]="Simple",i[i.WithSteps=1]="WithSteps",i[i.Curved=2]="Curved"})(dh||(dh={})),(function(i){i[i.Solid=0]="Solid",i[i.Dotted=1]="Dotted",i[i.Dashed=2]="Dashed",i[i.LargeDashed=3]="LargeDashed",i[i.SparseDotted=4]="SparseDotted"})(gh||(gh={}));class ot{constructor(){this.t=[]}i(t,e,s){const n={h:t,l:e,o:s===!0};this.t.push(n)}_(t){const e=this.t.findIndex((s=>t===s.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,s){const n=[...this.t];this.t=this.t.filter((r=>!r.o)),n.forEach((r=>r.h(t,e,s)))}v(){return this.t.length>0}m(){this.t=[]}}function Nt(i,...t){for(const e of t)for(const s in e)e[s]!==void 0&&Object.prototype.hasOwnProperty.call(e,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof e[s]!="object"||i[s]===void 0||Array.isArray(e[s])?i[s]=e[s]:Nt(i[s],e[s]));return i}function li(i){return typeof i=="number"&&isFinite(i)}function Ki(i){return typeof i=="number"&&i%1==0}function Qi(i){return typeof i=="string"}function gs(i){return typeof i=="boolean"}function te(i){const t=i;if(!t||typeof t!="object")return t;let e,s,n;for(s in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(n=t[s],e[s]=n&&typeof n=="object"?te(n):n);return e}function ph(i){return i!==null}function Xi(i){return i===null?void 0:i}const Yc="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function qs(i,t,e){return t===void 0&&(t=Yc),`${e=e!==void 0?`${e} `:""}${i}px ${t}`}class p1{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.F(),s=this.W();return t.k===e&&t.T===s||(t.k=e,t.T=s,t.P=qs(e,s),t.A=2.5/12*e,t.I=t.A,t.V=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function $n(i){return i<0?0:i>255?255:Math.round(i)||0}function mh(i){return .199*i[0]+.687*i[1]+.114*i[2]}class m1{constructor(t,e){this.q=new Map,this.j=t,e&&(this.q=e)}Y(t,e){if(t==="transparent")return t;const s=this.K(t),n=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${e*n})`}Z(t){const e=this.K(t);return{G:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,X:mh(e)>160?"black":"white"}}J(t){return mh(this.K(t))}tt(t,e,s){const[n,r,o,a]=this.K(t),[h,l,c,u]=this.K(e),f=[$n(n+s*(h-n)),$n(r+s*(l-r)),$n(o+s*(c-o)),(d=a+s*(u-a),d<=0||d>1?Math.min(Math.max(d,0),1):Math.round(1e4*d)/1e4)];var d;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(t){const e=this.q.get(t);if(e)return e;const s=(function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const h=window.getComputedStyle(a).color;return document.body.removeChild(a),h})(t),n=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.j.length)for(const o of this.j){const a=o(t);if(a)return this.q.set(t,a),a}throw new Error(`Failed to parse color: ${t}`)}const r=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(t,r),r}}class b1{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,s){this.it.forEach((n=>{n.nt(t,e,s)}))}}class $e{nt(t,e,s){t.useBitmapCoordinateSpace((n=>this.et(n,e,s)))}}class v1 extends $e{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const n=this.rt.lt,r=this.rt,o=Math.max(1,Math.floor(e))%2/2,a=h=>{t.beginPath();for(let l=n.to-1;l>=n.from;--l){const c=r.ot[l],u=Math.round(c._t*e)+o,f=c.ut*s,d=h*s+o;t.moveTo(u,f),t.arc(u,f,d,0,2*Math.PI)}t.fill()};r.ct>0&&(t.fillStyle=r.dt,a(r.ft+r.ct)),t.fillStyle=r.vt,a(r.ft)}}function x1(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const w1={from:0,to:1};class _1{constructor(t,e,s){this.Mt=new b1,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=s,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(x1),this.bt=this.St.map((e=>{const s=new v1;return s.ht(e),s})),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.It(),e=this.yt.Vt(),s=this.Ct.Bt(),n=this.O.Et();this.Pt(),e.forEach(((r,o)=>{const a=this.St[o],h=r.At(s),l=r.Lt();!t&&h!==null&&r.It()&&l!==null?(a.vt=h.zt,a.ft=h.ft,a.ct=h.Ot,a.ot[0].gt=h.gt,a.ot[0].ut=r.Ft().Nt(h.gt,l.Wt),a.dt=h.Ht??this.O.Ut(a.ot[0].ut/r.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=n.qt(s),a.lt=w1):a.lt=null}))}}class y1 extends $e{constructor(t){super(),this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null)return;const r=this.jt.Yt.It,o=this.jt.Kt.It;if(!r&&!o)return;const a=Math.round(this.jt._t*s),h=Math.round(this.jt.ut*n);t.lineCap="butt",r&&a>=0&&(t.lineWidth=Math.floor(this.jt.Yt.ct*s),t.strokeStyle=this.jt.Yt.R,t.fillStyle=this.jt.Yt.R,Be(t,this.jt.Yt.Zt),(function(l,c,u,f){l.beginPath();const d=l.lineWidth%2?.5:0;l.moveTo(c+d,u),l.lineTo(c+d,f),l.stroke()})(t,a,0,e.height)),o&&h>=0&&(t.lineWidth=Math.floor(this.jt.Kt.ct*n),t.strokeStyle=this.jt.Kt.R,t.fillStyle=this.jt.Kt.R,Be(t,this.jt.Kt.Zt),$c(t,h,0,e.width))}}class M1{constructor(t,e){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new y1(this.Gt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const t=this.Jt.It(),e=this.yt.Qt().N().crosshair,s=this.Gt;if(e.mode===2)return s.Kt.It=!1,void(s.Yt.It=!1);s.Kt.It=t&&this.Jt.ti(this.yt),s.Yt.It=t&&this.Jt.ii(),s.Kt.ct=e.horzLine.width,s.Kt.Zt=e.horzLine.style,s.Kt.R=e.horzLine.color,s.Yt.ct=e.vertLine.width,s.Yt.Zt=e.vertLine.style,s.Yt.R=e.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function S1(i,t,e,s,n,r){i.fillRect(t+r,e,s-2*r,r),i.fillRect(t+r,e+n-r,s-2*r,r),i.fillRect(t,e,r,n),i.fillRect(t+s-r,e,r,n)}function vn(i,t,e,s,n,r){i.save(),i.globalCompositeOperation="copy",i.fillStyle=r,i.fillRect(t,e,s,n),i.restore()}function bh(i,t,e,s,n,r){i.beginPath(),i.roundRect?i.roundRect(t,e,s,n,r):(i.lineTo(t+s-r[1],e),r[1]!==0&&i.arcTo(t+s,e,t+s,e+r[1],r[1]),i.lineTo(t+s,e+n-r[2]),r[2]!==0&&i.arcTo(t+s,e+n,t+s-r[2],e+n,r[2]),i.lineTo(t+r[3],e+n),r[3]!==0&&i.arcTo(t,e+n,t,e+n-r[3],r[3]),i.lineTo(t,e+r[0]),r[0]!==0&&i.arcTo(t,e,t+r[0],e,r[0]))}function vh(i,t,e,s,n,r,o=0,a=[0,0,0,0],h=""){if(i.save(),!o||!h||h===r)return bh(i,t,e,s,n,a),i.fillStyle=r,i.fill(),void i.restore();const l=o/2;var c;bh(i,t+l,e+l,s-o,n-o,(c=-l,a.map((u=>u===0?u:u+c)))),r!=="transparent"&&(i.fillStyle=r,i.fill()),h!=="transparent"&&(i.lineWidth=o,i.strokeStyle=h,i.closePath(),i.stroke()),i.restore()}function Uc(i,t,e,s,n,r,o){i.save(),i.globalCompositeOperation="copy";const a=i.createLinearGradient(0,0,0,n);a.addColorStop(0,r),a.addColorStop(1,o),i.fillStyle=a,i.fillRect(t,e,s,n),i.restore()}class xh{constructor(t,e){this.ht(t,e)}ht(t,e){this.jt=t,this.ei=e}$t(t,e){return this.jt.It?t.k+t.A+t.I:0}nt(t,e,s,n){if(!this.jt.It||this.jt.ri.length===0)return;const r=this.jt.R,o=this.ei.G,a=t.useBitmapCoordinateSpace((h=>{const l=h.context;l.font=e.P;const c=this.hi(h,e,s,n),u=c.ai;return c.li?vh(l,u.oi,u._i,u.ui,u.ci,o,u.di,[u.ft,0,0,u.ft],o):vh(l,u.fi,u._i,u.ui,u.ci,o,u.di,[0,u.ft,u.ft,0],o),this.jt.pi&&(l.fillStyle=r,l.fillRect(u.fi,u.mi,u.wi-u.fi,u.gi)),this.jt.Mi&&(l.fillStyle=e.D,l.fillRect(c.li?u.bi-u.di:0,u._i,u.di,u.Si-u._i)),c}));t.useMediaCoordinateSpace((({context:h})=>{const l=a.xi;h.font=e.P,h.textAlign=a.li?"right":"left",h.textBaseline="middle",h.fillStyle=r,h.fillText(this.jt.ri,l.Ci,(l._i+l.Si)/2+l.yi)}))}hi(t,e,s,n){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:h,verticalPixelRatio:l}=t,c=this.jt.pi||!this.jt.ki?e.C:0,u=this.jt.Pi?e.S:0,f=e.A+this.ei.Ti,d=e.I+this.ei.Ri,g=e.V,p=e.B,m=this.jt.ri,b=e.k,v=s.Di(r,m),x=Math.ceil(s.Ii(r,m)),w=b+f+d,_=e.S+g+p+x+c,S=Math.max(1,Math.floor(l));let y=Math.round(w*l);y%2!=S%2&&(y+=1);const C=u>0?Math.max(1,Math.floor(u*h)):0,E=Math.round(_*h),L=Math.round(c*h),T=this.ei.Vi??this.ei.Bi??this.ei.Ei,F=Math.round(T*l)-Math.floor(.5*l),j=Math.floor(F+S/2-y/2),et=j+y,D=n==="right",N=D?a.width-u:u,X=D?o.width-C:C;let Mt,at,Ft;return D?(Mt=X-E,at=X-L,Ft=N-c-g-u):(Mt=X+E,at=X+L,Ft=N+c+g),{li:D,ai:{_i:j,mi:F,Si:et,ui:E,ci:y,ft:2*h,di:C,oi:Mt,fi:X,wi:at,gi:S,bi:o.width},xi:{_i:j/l,Si:et/l,Ci:Ft,yi:v}}}}class xn{constructor(t){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(t||xh)(this.Li,this.Ai),this.Ni=new(t||xh)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Oi.$t(t,e),this.Ni.$t(t,e))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(t){this.Ai.Bi=t??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(t){return this.Fi(),this.Li.pi=this.Li.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class P1 extends xn{constructor(t,e,s){super(),this.Jt=t,this.Ki=e,this.Zi=s}Yi(t,e,s){if(t.It=!1,this.Jt.N().mode===2)return;const n=this.Jt.N().horzLine;if(!n.labelVisible)return;const r=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||r===null)return;const o=this.Ki.Xi().Z(n.labelBackgroundColor);s.G=o.G,t.R=o.X;const a=2/12*this.Ki.k();s.Ti=a,s.Ri=a;const h=this.Zi(this.Ki);s.Ei=h.Ei,t.ri=this.Ki.Ji(h.gt,r),t.It=!0}}const C1=/[1-9]/g;class Kc{constructor(){this.jt=null}ht(t){this.jt=t}nt(t,e){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const s=t.useMediaCoordinateSpace((({context:f})=>(f.font=e.P,Math.round(e.Qi.Ii(f,k(this.jt).ri,C1)))));if(s<=0)return;const n=e.ts,r=s+2*n,o=r/2,a=this.jt.ss;let h=this.jt.Ei,l=Math.floor(h-o)+.5;l<0?(h+=Math.abs(0-l),l=Math.floor(h-o)+.5):l+r>a&&(h-=Math.abs(a-(l+r)),l=Math.floor(h-o)+.5);const c=l+r,u=Math.ceil(0+e.S+e.C+e.A+e.k+e.I);t.useBitmapCoordinateSpace((({context:f,horizontalPixelRatio:d,verticalPixelRatio:g})=>{const p=k(this.jt);f.fillStyle=p.G;const m=Math.round(l*d),b=Math.round(0*g),v=Math.round(c*d),x=Math.round(u*g),w=Math.round(2*d);if(f.beginPath(),f.moveTo(m,b),f.lineTo(m,x-w),f.arcTo(m,x,m+w,x,w),f.lineTo(v-w,x),f.arcTo(v,x,v,x-w,w),f.lineTo(v,b),f.fill(),p.pi){const _=Math.round(p.Ei*d),S=b,y=Math.round((S+e.C)*g);f.fillStyle=p.R;const C=Math.max(1,Math.floor(d)),E=Math.floor(.5*d);f.fillRect(_-E,S,C,y-S)}})),t.useMediaCoordinateSpace((({context:f})=>{const d=k(this.jt),g=0+e.S+e.C+e.A+e.k/2;f.font=e.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=d.R;const p=e.Qi.Di(f,"Apr0");f.translate(l+n,g+p),f.fillText(d.ri,0,0)}))}}class k1{constructor(t,e,s){this.xt=!0,this.Xt=new Kc,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=t,this.ns=e,this.Zi=s}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const t=this.Gt;if(t.It=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const s=this.ns.Et();if(s.Gi())return;t.ss=s.ss();const n=this.Zi();if(n===null)return;t.Ei=n.Ei;const r=s.es(this.Ct.Bt());t.ri=s.rs(k(r)),t.It=!0;const o=this.ns.Xi().Z(e.labelBackgroundColor);t.G=o.G,t.R=o.X,t.pi=s.N().ticksVisible}}class Xc{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(t){this.ls=t}Ft(){return this.hs}cs(t){this.hs=t}ds(t){return[]}fs(){return[]}It(){return!0}}var Er;(function(i){i[i.Normal=0]="Normal",i[i.Magnet=1]="Magnet",i[i.Hidden=2]="Hidden",i[i.MagnetOHLC=3]="MagnetOHLC"})(Er||(Er={}));class E1 extends Xc{constructor(t,e){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=t,this.Ps=e,this.Ts=((n,r)=>o=>{const a=r(),h=n();if(o===k(this.yt).Rs())return{gt:h,Ei:a};{const l=k(o.Lt());return{gt:o.Ds(a,l),Ei:a}}})((()=>this.ps),(()=>this.Cs));const s=((n,r)=>()=>{const o=this.ns.Et().Is(n()),a=r();return o&&Number.isFinite(a)?{wt:o,Ei:a}:null})((()=>this.vs),(()=>this.si()));this.Vs=new k1(this,t,s)}N(){return this.Ps}Bs(t,e){this.ys=t,this.ks=e}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(t,e,s){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(t,e,s)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(t){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return t;const e=this.ns,s=e.Et();let n=null,r=null;for(const l of e.Us()){const c=l.qs().$s(t,-1);if(c){if(c.js===t)return t;(n===null||c.js>n)&&(n=c.js)}const u=l.qs().$s(t,1);if(u){if(u.js===t)return t;(r===null||u.js<r)&&(r=u.js)}}const o=[n,r].filter(ph);if(o.length===0)return t;const a=s.qt(t),h=o.map((l=>Math.abs(a-s.qt(l))));return o[h.indexOf(Math.min(...h))]}Ys(t){let e=this.bs.get(t);e||(e=new M1(this,t),this.bs.set(t,e));let s=this.Ss.get(t);return s||(s=new _1(this.ns,this,t),this.Ss.set(t,s)),[e,s]}ti(t){return t===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(t,e){this.ws&&this.yt===t||this.gs.clear();const s=[];return this.yt===t&&s.push(this.Zs(this.gs,e,this.Ts)),s}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach((t=>{this.bs.get(t)?.kt(),this.Ss.get(t)?.kt()})),this.gs.forEach((t=>t.kt())),this.Vs.kt()}Js(t){return t&&!t.Rs().Gi()?t.Rs():null}Os(t,e,s){this.Qs(t,e,s)&&this.Ws()}Qs(t,e,s){const n=this.xs,r=this.Cs,o=this.ps,a=this.vs,h=this.yt,l=this.Js(s);this.vs=t,this.xs=isNaN(t)?NaN:this.ns.Et().qt(t),this.yt=s;const c=l!==null?l.Lt():null;return l!==null&&c!==null?(this.ps=e,this.Cs=l.Nt(e,c)):(this.ps=NaN,this.Cs=NaN),n!==this.xs||r!==this.Cs||a!==this.vs||o!==this.ps||h!==this.yt}Fs(){const t=this.ns.tn().map((s=>s.qs().sn())).filter(ph),e=t.length===0?null:Math.max(...t);this.vs=e!==null?e:NaN}Zs(t,e,s){let n=t.get(e);return n===void 0&&(n=new P1(this,e,s),t.set(e,n)),n}}function wn(i){return i==="left"||i==="right"}class dt{constructor(t){this.nn=new Map,this.en=[],this.rn=t}hn(t,e){const s=(function(n,r){return n===void 0?r:{an:Math.max(n.an,r.an),ln:n.ln||r.ln}})(this.nn.get(t),e);this.nn.set(t,s)}_n(){return this.rn}un(t){const e=this.nn.get(t);return e===void 0?{an:this.rn}:{an:Math.max(this.rn,e.an),ln:e.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(t){this.dn(),this.en=[{fn:1,Wt:t}]}vn(t){this.mn(),this.en.push({fn:5,Wt:t})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(t){this.dn(),this.en.push({fn:2,Wt:t})}Mn(t){this.dn(),this.en.push({fn:3,Wt:t})}bn(){return this.en}Sn(t){for(const e of t.en)this.xn(e);this.rn=Math.max(this.rn,t.rn),t.nn.forEach(((e,s)=>{this.hn(s,e)}))}static Cn(){return new dt(2)}static yn(){return new dt(3)}xn(t){switch(t.fn){case 0:this.cn();break;case 1:this.pn(t.Wt);break;case 2:this.gn(t.Wt);break;case 3:this.Mn(t.Wt);break;case 4:this.wn();break;case 5:this.vn(t.Wt);break;case 6:this.mn()}}mn(){const t=this.en.findIndex((e=>e.fn===5));t!==-1&&this.en.splice(t,1)}}class Gc{formatTickmarks(t){return t.map((e=>this.format(e)))}}const wh=".";function ee(i,t){if(!li(i))return"n/a";if(!Ki(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?i.toString():("0000000000000000"+i.toString()).slice(-t)}class _n extends Gc{constructor(t,e){if(super(),e||(e=1),li(t)&&Ki(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ki=t,this.kn=e,this.Pn()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.Tn(t)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let t=this.Ki;for(;t>1;)t/=10,this.Rn++}}Tn(t){const e=this.Ki/this.kn;let s=Math.floor(t),n="";const r=this.Rn!==void 0?this.Rn:NaN;if(e>1){let o=+(Math.round(t*e)-s*e).toFixed(this.Rn);o>=e&&(o-=e,s+=1),n=wh+ee(+o.toFixed(this.Rn)*this.kn,r)}else s=Math.round(s*e)/e,r>0&&(n=wh+ee(0,r));return s.toFixed(0)+n}}class Jc extends _n{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class L1 extends Gc{constructor(t){super(),this.Dn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.In(t):t<999995?e+this.In(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.In(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.In(t/1e9)+"B")}In(t){let e;const s=Math.pow(10,this.Dn);return e=(t=Math.round(t*s)/s)>=1e-15&&t<1?t.toFixed(this.Dn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((n,r)=>r))}}const T1=/[2-9]/g;class Qs{constructor(t=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=t}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(t,e,s){return this.Nn(t,e,s).width}Di(t,e,s){const n=this.Nn(t,e,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}Nn(t,e,s){const n=s||T1,r=String(e).replace(n,"0");if(this.Ln.has(r))return Lt(this.Ln.get(r)).Fn;if(this.Vn===this.zn){const a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.Ln.set(r,{Fn:o,Wn:this.Bn}),this.An[this.Bn]=r,this.Vn++,this.Bn++),o}}class R1{constructor(t){this.Hn=null,this.M=null,this.Un="right",this.$n=t}qn(t,e,s){this.Hn=t,this.M=e,this.Un=s}nt(t){this.M!==null&&this.Hn!==null&&this.Hn.nt(t,this.M,this.$n,this.Un)}}class qc{constructor(t,e,s){this.jn=t,this.$n=new Qs(50),this.Yn=e,this.O=s,this.F=-1,this.Xt=new R1(this.$n)}Tt(){const t=this.O.Kn(this.Yn);if(t===null)return null;const e=t.Zn(this.Yn)?t.Gn():this.Yn.Ft();if(e===null)return null;const s=t.Xn(e);if(s==="overlay")return null;const n=this.O.Jn();return n.k!==this.F&&(this.F=n.k,this.$n.On()),this.Xt.qn(this.jn.ji(),n,s),this.Xt}}class N1 extends $e{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}Qn(t,e){if(!this.jt?.It)return null;const{ut:s,ct:n,te:r}=this.jt;return e>=s-n-7&&e<=s+n+7?{ie:this.jt,te:r}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null||this.jt.It===!1)return;const r=Math.round(this.jt.ut*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.jt.R,t.lineWidth=Math.floor(this.jt.ct*s),Be(t,this.jt.Zt),$c(t,r,0,e.width))}}class co{constructor(t){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new N1,this.xt=!0,this.ee=t,this.re=t.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class A1 extends co{constructor(t){super(t)}he(){this.se.It=!1;const t=this.ee.Ft(),e=t.ae().ae;if(e!==2&&e!==3)return;const s=this.ee.N();if(!s.baseLineVisible||!this.ee.It())return;const n=this.ee.Lt();n!==null&&(this.se.It=!0,this.se.ut=t.Nt(n.Wt,n.Wt),this.se.R=s.baseLineColor,this.se.ct=s.baseLineWidth,this.se.Zt=s.baseLineStyle)}}class D1 extends $e{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}le(){return this.jt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){const n=this.jt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,a=Math.round(n.oe.x*e)+o,h=n.oe.y*s;t.fillStyle=n._e,t.beginPath();const l=Math.max(2,1.5*n.ue)*e;t.arc(a,h,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.ce,t.beginPath(),t.arc(a,h,n.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.de,t.beginPath(),t.arc(a,h,n.ft*e+r/2,0,2*Math.PI,!1),t.stroke()}}const O1=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class F1{constructor(t){this.Xt=new D1,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=t}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const t=performance.now(),e=this.Ce-t;if(e>0)return void(e<650&&(this.Ce+=2600));this.xe=t,this.Ce=t+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const t=this.ye.Qt().Et(),e=t.Ie(),s=this.ye.Lt();if(e===null||s===null)return;const n=this.ye.Ve(!0);if(n.Be||!e.Ee(n.js))return;const r={x:t.qt(n.js),y:this.ye.Ft().Nt(n.gt,s.Wt)},o=n.R,a=this.ye.N().lineWidth,h=this.Ae(this.Le(),o);this.Xt.ht({_e:o,ue:a,ce:h.ce,de:h.de,ft:h.ft,oe:r})}De(){const t=this.Xt.le();if(t!==null){const e=this.Ae(this.Le(),t._e);t.ce=e.ce,t.de=e.de,t.ft=e.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(t,e,s,n){const r=s+(n-s)*e;return this.ye.Qt().Xi().Y(t,r)}Ae(t,e){const s=t%2600/2600;let n;for(const l of O1)if(s>=l.fe&&s<=l.pe){n=l;break}pt(n!==void 0,"Last price animation internal logic error");const r=(s-n.fe)/(n.pe-n.fe);return{ce:this.ze(e,r,n.we,n.ge),de:this.ze(e,r,n.Me,n.be),ft:(o=r,a=n.ve,h=n.me,a+(h-a)*o)};var o,a,h}}class I1 extends co{constructor(t){super(t)}he(){const t=this.se;t.It=!1;const e=this.ee.N();if(!e.priceLineVisible||!this.ee.It())return;const s=this.ee.Ve(e.priceLineSource===0);s.Be||(t.It=!0,t.ut=s.Ei,t.R=this.ee.Oe(s.R),t.ct=e.priceLineWidth,t.Zt=e.priceLineStyle)}}class z1 extends xn{constructor(t){super(),this.Jt=t}Yi(t,e,s){t.It=!1,e.It=!1;const n=this.Jt;if(!n.It())return;const r=n.N(),o=r.lastValueVisible,a=n.Ne()!=="",h=r.seriesLastValueMode===0,l=n.Ve(!1);if(l.Be)return;o&&(t.ri=this.Fe(l,o,h),t.It=t.ri.length!==0),(a||h)&&(e.ri=this.We(l,o,a,h),e.It=e.ri.length>0);const c=n.Oe(l.R),u=this.Jt.Qt().Xi().Z(c);s.G=u.G,s.Ei=l.Ei,e.Ht=n.Qt().Ut(l.Ei/n.Ft().$t()),t.Ht=c,t.R=u.X,e.R=u.X}We(t,e,s,n){let r="";const o=this.Jt.Ne();return s&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.Jt.Ft().He()?t.Ue:t.$e),r.trim()}Fe(t,e,s){return e?s?this.Jt.Ft().He()?t.$e:t.Ue:t.ri:""}}function _h(i,t,e,s){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?i(t,e):n||r?n?t:e:s}class St{constructor(t,e){this.qe=t,this.je=e}Ye(t){return t!==null&&this.qe===t.qe&&this.je===t.je}Ke(){return new St(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(t){return t===null?this:new St(_h(Math.min,this.Ze(),t.Ze(),-1/0),_h(Math.max,this.Ge(),t.Ge(),1/0))}Je(t){if(!li(t)||this.je-this.qe===0)return;const e=.5*(this.je+this.qe);let s=this.je-e,n=this.qe-e;s*=t,n*=t,this.je=e+s,this.qe=e+n}Qe(t){li(t)&&(this.je+=t,this.qe+=t)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(t){return t===null?null:new St(t.minValue,t.maxValue)}}class Zs{constructor(t,e){this.sr=t,this.nr=e||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(t){return t===null?null:new Zs(St.ir(t.priceRange),t.margins)}}const B1=[2,4,8,16,32,64,128,256,512],j1="Custom series with conflation reducer must have a priceValueBuilder method";class V1 extends co{constructor(t,e){super(t),this.hr=e}he(){const t=this.se;t.It=!1;const e=this.hr.N();if(!this.ee.It()||!e.lineVisible)return;const s=this.hr.ar();s!==null&&(t.It=!0,t.ut=s,t.R=e.color,t.ct=e.lineWidth,t.Zt=e.lineStyle,t.te=this.hr.N().id)}}class W1 extends xn{constructor(t,e){super(),this.ye=t,this.hr=e}Yi(t,e,s){t.It=!1,e.It=!1;const n=this.hr.N(),r=n.axisLabelVisible,o=n.title!=="",a=this.ye;if(!r||!a.It())return;const h=this.hr.ar();if(h===null)return;o&&(e.ri=n.title,e.It=!0),e.Ht=a.Qt().Ut(h/a.Ft().$t()),t.ri=this.lr(n.price),t.It=!0;const l=this.ye.Qt().Xi().Z(n.axisLabelColor||n.color);s.G=l.G;const c=n.axisLabelTextColor||l.X;t.R=c,e.R=c,s.Ei=h}lr(t){const e=this.ye.Lt();return e===null?"":this.ye.Ft().Ji(t,e.Wt)}}class H1{constructor(t,e){this.ye=t,this.Ps=e,this._r=new V1(t,this),this.jn=new W1(t,this),this.ur=new qc(this.jn,t,t.Qt())}cr(t){Nt(this.Ps,t),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const t=this.ye,e=t.Ft();if(t.Qt().Et().Gi()||e.Gi())return null;const s=t.Lt();return s===null?null:e.Nt(this.Ps.price,s.Wt)}}class $1{constructor(){this.wr=new WeakMap}gr(t,e,s){const n=1/e*s;if(t>=n)return 1;const r=n/t,o=Math.pow(2,Math.floor(Math.log2(r)));return Math.min(o,512)}Mr(t,e,s,n=!1,r){if(t.length===0||e<=1)return t;const o=this.br(e);if(o<=1)return t;const a=this.Sr(t);let h=a.Cr.get(o);return h!==void 0||(h=this.yr(t,o,s,n,r,a.Cr),a.Cr.set(o,h)),h}kr(t,e,s,n,r=!1,o){if(s<1||t.length===0)return t;const a=this.Sr(t),h=a.Cr.get(s);if(!h)return this.Mr(t,s,n,r,o);const l=this.Pr(t,e,s,h,r,n,o);return a.Cr.set(s,l),l}br(t){if(t<=2)return 2;for(const e of B1)if(t<=e)return e;return 512}Tr(t){if(t.length===0)return 0;const e=t[0],s=t[t.length-1];return 31*t.length+17*e.js+13*s.js}yr(t,e,s,n=!1,r,o=new Map){if(e===2)return this.Rr(t,2,s,n,r);const a=e/2;let h=o.get(a);return h||(h=this.yr(t,a,s,n,r,o),o.set(a,h)),this.Dr(h,s,n,r)}Rr(t,e,s,n=!1,r){const o=this.Ir(t,e,s,n,r);return this.Vr(o,n)}Dr(t,e,s=!1,n){const r=this.Ir(t,2,e,s,n);return this.Vr(r,s)}Ir(t,e,s,n=!1,r){const o=[];for(let a=0;a<t.length;a+=e)if(t.length-a>=e){const h=this.Br(t[a],t[a+1],s,n,r);h.Er=!1,o.push(h)}else if(o.length===0)o.push(this.Ar(t[a],!0));else{const h=o[o.length-1];o[o.length-1]=this.Lr(h,t[a],s,n,r)}return o}zr(t,e){return(t??1)+(e??1)}Br(t,e,s,n=!1,r){if(!n||!s||!r){const l=t.Wt[1]>e.Wt[1]?t.Wt[1]:e.Wt[1],c=t.Wt[2]<e.Wt[2]?t.Wt[2]:e.Wt[2];return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:l,$r:c,qr:e.Wt[3],jr:this.zr(t.jr,e.jr),Yr:void 0,Er:!1}}const o=s(this.Kr(t,r),this.Kr(e,r)),a=r(o),h=a.length?a[a.length-1]:0;return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:Math.max(t.Wt[1],h),$r:Math.min(t.Wt[2],h),qr:h,jr:this.zr(t.jr,e.jr),Yr:o,Er:!1}}Lr(t,e,s,n=!1,r){if(!n||!s||!r)return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:t.Ur>e.Wt[1]?t.Ur:e.Wt[1],$r:t.$r<e.Wt[2]?t.$r:e.Wt[2],qr:e.Wt[3],jr:t.jr+(e.jr??1),Yr:t.Yr,Er:!1};const o=t.Yr,a=this.Kr(e,r),h=o?{data:o,index:t.Or,originalTime:t.Fr,time:t.Fr,priceValues:r(o)}:null,l=h?s(h,a):a.data,c=h?r(l):a.priceValues,u=c.length?c[c.length-1]:0;return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:Math.max(t.Ur,u),$r:Math.min(t.$r,u),qr:u,jr:t.jr+(e.jr??1),Yr:l,Er:!1}}Zr(t,e,s,n,r,o,a=!1,h){const l=e===n?r:t[e];if(s-e==1)return this.Ar(l,!0);const c=e+1===n?r:t[e+1];let u=this.Br(l,c,o,a,h);for(let f=e+2;f<s;f++){const d=f===n?r:t[f];u=this.Lr(u,d,o,a,h)}return u}Kr(t,e){const s=t.le??{};return{data:t.le,index:t.js,originalTime:t.Gr,time:t.wt,priceValues:e(s)}}Xr(t,e=!1){const s=e===!0,n=!!t.Yr;return{js:t.Or,wt:t.Fr,Gr:t.Fr,Wt:[s?t.qr:t.Hr,t.Ur,t.$r,t.qr],jr:t.jr,le:s?n?t.Yr:{wt:t.Fr}:void 0}}Vr(t,e=!1){return t.map((s=>this.Xr(s,e)))}Pr(t,e,s,n,r=!1,o,a){if(n.length===0)return n;const h=t.length-1,l=Math.floor(h/s)*s;if(Math.min(l+s,t.length)-l<s&&t.length>s){const c=t.slice();return c[c.length-1]=e,this.Mr(c,s,o,r,a)}if(Math.floor((h-1)/s)===Math.floor(h/s)||n.length===1){const c=Math.min(l+s,t.length),u=c-l;if(u<=0)return n;const f=u===1?this.Ar(l===h?e:t[l],!0):this.Zr(t,l,c,h,e,o,r,a);return n[n.length-1]=this.Xr(f,r),n}{const c=t.slice();return c[c.length-1]=e,this.Mr(c,s,o,r,a)}}Ar(t,e=!1){return{Or:t.js,Nr:t.js,Fr:t.wt,Wr:t.wt,Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3],jr:t.jr??1,Yr:t.le,Er:e}}Sr(t){const e=this.Jr(t),s=this.Tr(t);return e.Qr!==s&&(e.Cr.clear(),e.Qr=s),e}Jr(t){let e=this.wr.get(t);return e===void 0&&(e={Qr:this.Tr(t),Cr:new Map},this.wr.set(t,e)),e}}class Y1 extends Xc{constructor(t){super(),this.ns=t}Qt(){return this.ns}}const U1={Bar:(i,t,e,s)=>{const n=t.upColor,r=t.downColor,o=k(i(e,s)),a=fe(o.Wt[0])<=fe(o.Wt[3]);return{th:o.R??(a?n:r)}},Candlestick:(i,t,e,s)=>{const n=t.upColor,r=t.downColor,o=t.borderUpColor,a=t.borderDownColor,h=t.wickUpColor,l=t.wickDownColor,c=k(i(e,s)),u=fe(c.Wt[0])<=fe(c.Wt[3]);return{th:c.R??(u?n:r),ih:c.Ht??(u?o:a),sh:c.nh??(u?h:l)}},Custom:(i,t,e,s)=>({th:k(i(e,s)).R??t.color}),Area:(i,t,e,s)=>{const n=k(i(e,s));return{th:n.vt??t.lineColor,vt:n.vt??t.lineColor,eh:n.eh??t.topColor,rh:n.rh??t.bottomColor}},Baseline:(i,t,e,s)=>{const n=k(i(e,s));return{th:n.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,hh:n.hh??t.topLineColor,ah:n.ah??t.bottomLineColor,oh:n.oh??t.topFillColor1,_h:n._h??t.topFillColor2,uh:n.uh??t.bottomFillColor1,dh:n.dh??t.bottomFillColor2}},Line:(i,t,e,s)=>{const n=k(i(e,s));return{th:n.R??t.color,vt:n.R??t.color}},Histogram:(i,t,e,s)=>({th:k(i(e,s)).R??t.color})};class K1{constructor(t){this.fh=(e,s)=>s!==void 0?s.Wt:this.ye.qs().ph(e),this.ye=t,this.mh=U1[t.wh()]}gh(t,e){return this.mh(this.fh,this.ye.N(),t,e)}}function Qc(i,t,e,s,n=0,r=t.length){let o=r-n;for(;0<o;){const a=o>>1,h=n+a;s(t[h],e)===i?(n=h+1,o-=a+1):o=a}return n}const ci=Qc.bind(null,!0),Zc=Qc.bind(null,!1);var yh;(function(i){i[i.NearestLeft=-1]="NearestLeft",i[i.None=0]="None",i[i.NearestRight=1]="NearestRight"})(yh||(yh={}));const ne=30;class X1{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(t){return this.Th(t,0)!==null}ph(t){return this.$s(t)}$s(t,e=0){const s=this.Th(t,e);return s===null?null:{...this.Rh(s),js:this.Ph(s)}}Dh(){return this.Mh}Ih(t,e,s){if(this.Gi())return null;let n=null;for(const r of s)n=ps(n,this.Vh(t,e,r));return n}ht(t){this.Sh.clear(),this.bh.clear(),this.Mh=t,this.xh=t.map((e=>e.js))}Bh(){return this.xh}Ph(t){return this.Mh[t].js}Rh(t){return this.Mh[t]}Th(t,e){const s=this.Eh(t);if(s===null&&e!==0)switch(e){case-1:return this.Ah(t);case 1:return this.Lh(t);default:throw new TypeError("Unknown search mode")}return s}Ah(t){let e=this.zh(t);return e>0&&(e-=1),e!==this.Mh.length&&this.Ph(e)<t?e:null}Lh(t){const e=this.Oh(t);return e!==this.Mh.length&&t<this.Ph(e)?e:null}Eh(t){const e=this.zh(t);return e===this.Mh.length||t<this.Mh[e].js?null:e}zh(t){return ci(this.Mh,t,((e,s)=>e.js<s))}Oh(t){return Zc(this.Mh,t,((e,s)=>e.js>s))}Nh(t,e,s){let n=null;for(let r=t;r<e;r++){const o=this.Mh[r].Wt[s];Number.isNaN(o)||(n===null?n={Fh:o,Wh:o}:(o<n.Fh&&(n.Fh=o),o>n.Wh&&(n.Wh=o)))}return n}Vh(t,e,s){if(this.Gi())return null;let n=null;const r=k(this.kh()),o=k(this.sn()),a=Math.max(t,r),h=Math.min(e,o),l=Math.ceil(a/ne)*ne,c=Math.max(l,Math.floor(h/ne)*ne);{const f=this.zh(a),d=this.Oh(Math.min(h,l,e));n=ps(n,this.Nh(f,d,s))}let u=this.bh.get(s);u===void 0&&(u=new Map,this.bh.set(s,u));for(let f=Math.max(l+1,a);f<c;f+=ne){const d=Math.floor(f/ne);let g=u.get(d);if(g===void 0){const p=this.zh(d*ne),m=this.Oh((d+1)*ne-1);g=this.Nh(p,m,s),u.set(d,g)}n=ps(n,g)}{const f=this.zh(c),d=this.Oh(h);n=ps(n,this.Nh(f,d,s))}return n}}function ps(i,t){return i===null?t:t===null?i:{Fh:Math.min(i.Fh,t.Fh),Wh:Math.max(i.Wh,t.Wh)}}function Yn(){return new X1}const tn={setLineStyle:Be};class G1{constructor(t){this.Hh=t}nt(t,e,s){this.Hh.draw(t,tn)}Uh(t,e,s){this.Hh.drawBackground?.(t,tn)}}class J1{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new G1(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}class tu{constructor(t){this.Kh=null,this.Zh=t}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){const t=this.Zh.paneViews?.()??[];if(this.Kh?.qh===t)return this.Kh.jh;const e=t.map((s=>new J1(s)));return this.Kh={qh:t,jh:e},e}Qn(t,e){return this.Zh.hitTest?.(t,e)??null}}let q1=class extends tu{ds(){return[]}};class Q1{constructor(t){this.Hh=t}nt(t,e,s){this.Hh.draw(t,tn)}Uh(t,e,s){this.Hh.drawBackground?.(t,tn)}}class Mh{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new Q1(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}function eu(i){return{ri:i.text(),Ei:i.coordinate(),Vi:i.fixedCoordinate?.(),R:i.textColor(),G:i.backColor(),It:i.visible?.()??!0,pi:i.tickVisible?.()??!0}}class Z1{constructor(t,e){this.Xt=new Kc,this.Xh=t,this.Jh=e}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...eu(this.Xh)}),this.Xt}}class tv extends xn{constructor(t,e){super(),this.Xh=t,this.Ki=e}Yi(t,e,s){const n=eu(this.Xh);s.G=n.G,t.R=n.R;const r=2/12*this.Ki.k();s.Ti=r,s.Ri=r,s.Ei=n.Ei,s.Vi=n.Vi,t.ri=n.ri,t.It=n.It,t.pi=n.pi}}class ev extends tu{constructor(t,e){super(t),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=e}fs(){const t=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===t)return this.Qh.jh;const e=this.ye.Qt().Et(),s=t.map((n=>new Z1(n,e)));return this.Qh={qh:t,jh:s},s}Ks(){const t=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===t)return this.ta.jh;const e=this.ye.Ft(),s=t.map((n=>new tv(n,e)));return this.ta={qh:t,jh:s},s}na(){const t=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===t)return this.ia.jh;const e=t.map((s=>new Mh(s)));return this.ia={qh:t,jh:e},e}ea(){const t=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===t)return this.sa.jh;const e=t.map((s=>new Mh(s)));return this.sa={qh:t,jh:e},e}ra(t,e){return this.Zh.autoscaleInfo?.(t,e)??null}}function Un(i,t,e,s){i.forEach((n=>{t(n).forEach((r=>{r.Yh()===e&&s.push(r)}))}))}function Kn(i){return i.Ys()}function iv(i){return i.na()}function sv(i){return i.ea()}const nv=["Area","Line","Baseline"];class yn extends Y1{constructor(t,e,s,n,r){super(t),this.jt=Yn(),this._r=new I1(this),this.ha=[],this.aa=new A1(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new $1,this.da=new Map,this.fa=null,this.Ps=s,this.pa=e;const o=new z1(this);if(this.gs=[o],this.ur=new qc(o,this,t),nv.includes(this.pa)&&(this.la=new F1(this)),this.va(),this.$h=n(this,this.Qt(),r),this.pa==="Custom"){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(t){return this.Ps.priceLineColor||t}Ve(t){const e={Be:!0},s=this.Ft();if(this.Qt().Et().Gi()||s.Gi()||this.jt.Gi())return e;const n=this.Qt().Et().Ie(),r=this.Lt();if(n===null||r===null)return e;let o,a;if(t){const u=this.jt.Ch();if(u===null)return e;o=u,a=u.js}else{const u=this.jt.$s(n.bi(),-1);if(u===null||(o=this.jt.ph(u.js),o===null))return e;a=u.js}const h=o.Wt[3],l=this.ga().gh(a,{Wt:o}),c=s.Nt(h,r.Wt);return{Be:!1,gt:h,ri:s.Ji(h,r.Wt),Ue:s.Ma(h),$e:s.ba(h,r.Wt),R:l.th,Ei:c,js:a}}ga(){return this.oa!==null||(this.oa=new K1(this)),this.oa}N(){return this.Ps}cr(t){const e=this.Qt(),{priceScaleId:s,visible:n,priceFormat:r}=t;s!==void 0&&s!==this.Ps.priceScaleId&&e.Sa(this,s),n!==void 0&&n!==this.Ps.visible&&e.xa();const o=t.conflationThresholdFactor!==void 0;Nt(this.Ps,t),o&&(this.da.clear(),this.Qt().dr()),r!==void 0&&(this.va(),e.Ca()),e.ya(this),e.ka(),this.$h.kt("options")}ht(t,e){this.jt.ht(t),this.da.clear();const s=this.Qt().Et().N();s.enableConflation&&s.precomputeConflationOnInit&&this.Pa(s.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(e&&e.Ta?this.la.Pe():t.length===0&&this.la.ke());const n=this.Qt().Kn(this);this.Qt().Ra(n),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(t){const e=new H1(this,t);return this.ha.push(e),this.Qt().ya(this),e}Ia(t){const e=this.ha.indexOf(t);e!==-1&&this.ha.splice(e,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const t=this.Ba();return t===null?null:{Wt:t.Wt[3],Ea:t.wt}}Ba(){const t=this.Qt().Et().Ie();if(t===null)return null;const e=t.Aa();return this.jt.$s(e,1)}qs(){return this.jt}wa(t){this.fa=t,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(t){if(!this.La())return;const e=this.za();if(!this.da.has(e))return;const s=this.pa==="Custom",n=s&&this.fa||void 0,r=s&&this.$h.Oa?h=>{const l=h,c=this.$h.Oa(l);return Array.isArray(c)?c:[typeof c=="number"?c:0]}:void 0,o=this.ca.kr(this.jt.Dh(),t,e,n,s,r),a=Yn();a.ht(o),this.da.set(e,a)}Na(){const t=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!t)return this.jt;const e=this.za(),s=this.da.get(e);return s||(this.Fa(e),this.da.get(e)??this.jt)}Wa(t){const e=this.jt.ph(t);return e===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3]}:e.Wt[3]}Ha(t){const e=[];Un(this.ua,Kn,"top",e);const s=this.la;return s!==null&&s.It()&&(this._a===null&&s.Re()&&(this._a=setTimeout((()=>{this._a=null,this.Qt().Ua()}),0)),s.Te(),e.unshift(s)),e}Ys(){const t=[];this.$a()||t.push(this.aa),t.push(this.$h,this._r);const e=this.ha.map((s=>s.pr()));return t.push(...e),Un(this.ua,Kn,"normal",t),t}qa(){return this.ja(Kn,"bottom")}Ya(t){return this.ja(iv,t)}Ka(t){return this.ja(sv,t)}Za(t,e){return this.ua.map((s=>s.Qn(t,e))).filter((s=>s!==null))}ds(){return[this.ur,...this.ha.map((t=>t.vr()))]}Ks(t,e){if(e!==this.hs&&!this.$a())return[];const s=[...this.gs];for(const n of this.ha)s.push(n.mr());return this.ua.forEach((n=>{s.push(...n.Ks())})),s}fs(){const t=[];return this.ua.forEach((e=>{t.push(...e.fs())})),t}ra(t,e){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider((()=>{const n=this.Ga(t,e);return n===null?null:n.tr()}));return Zs.ir(s)}return this.Ga(t,e)}qh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}Xa(){return this.Ja}Ws(){this.$h.kt();for(const t of this.gs)t.kt();for(const t of this.ha)t.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach((t=>t.Ws()))}Ft(){return k(super.Ft())}At(t){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const e=this.jt.ph(t);return e===null?null:{gt:e.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(t)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(t){this.ua.push(new ev(t,this))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t))}rl(){if(this.pa==="Custom")return t=>this.$h.Oa(t)}hl(){if(this.pa==="Custom")return t=>this.$h.al(t)}ll(){return this.jt.Bh()}$a(){return!wn(this.Ft().ol())}Ga(t,e){if(!Ki(t)||!Ki(e)||this.jt.Gi())return null;const s=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],n=this.jt.Ih(t,e,s);let r=n!==null?new St(n.Fh,n.Wh):null,o=null;if(this.wh()==="Histogram"){const a=this.Ps.base,h=new St(a,a);r=r!==null?r.Sn(h):h}return this.ua.forEach((a=>{const h=a.ra(t,e);if(h?.priceRange){const l=new St(h.priceRange.minValue,h.priceRange.maxValue);r=r!==null?r.Sn(l):l}h?.margins&&(o=h.margins)})),new Zs(r,o)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(t){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.ga().gh(t).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.Ja={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.Ja=new L1(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new Jc(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new _n(t,this.Ps.priceFormat.minMove*t)}}this.hs!==null&&this.hs._l()}ja(t,e){const s=[];return Un(this.ua,t,e,s),s}za(){const{ul:t,cl:e,dl:s}=this.fl();return this.ca.gr(t,e,s)}fl(){const t=this.Qt().Et(),e=t.ul(),s=window.devicePixelRatio||1,n=t.N().conflationThresholdFactor;return{ul:e,cl:s,dl:this.Ps.conflationThresholdFactor??n??1}}pl(t){const e=this.jt.Dh();let s;if(this.pa==="Custom"&&this.fa!==null){const r=this.rl();if(!r)throw new Error(j1);s=this.ca.Mr(e,t,this.fa,!0,(o=>r(o)))}else s=this.ca.Mr(e,t);const n=Yn();return n.ht(s),n}Fa(t){const e=this.pl(t);this.da.set(t,e)}Pa(t){if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const e=this.Qt().Et().vl();for(const s of e){const n=()=>{this.ml(s)},r=typeof window=="object"&&window||typeof self=="object"&&self;r?.gl?.wl?r.gl.wl((()=>{n()}),{Ml:t}):Promise.resolve().then((()=>n()))}}ml(t){if(this.da.has(t)||this.jt.Dh().length===0)return;const e=this.pl(t);this.da.set(t,e)}}const rv=[3],ov=[0,1,2,3];class av{constructor(t){this.Ps=t}bl(t,e,s){let n=t;if(this.Ps.mode===0)return n;const r=s.Rs(),o=r.Lt();if(o===null)return n;const a=r.Nt(t,o),h=s.Sl().filter((c=>c instanceof yn)).reduce(((c,u)=>{if(s.Zn(u)||!u.It())return c;const f=u.Ft(),d=u.qs();if(f.Gi()||!d.Ee(e))return c;const g=d.ph(e);if(g===null)return c;const p=fe(u.Lt()),m=this.Ps.mode===3?ov:rv;return c.concat(m.map((b=>f.Nt(g.Wt[b],p.Wt))))}),[]);if(h.length===0)return n;h.sort(((c,u)=>Math.abs(c-a)-Math.abs(u-a)));const l=h[0];return n=r.Ds(l,o),n}}function Ai(i,t,e){return Math.min(Math.max(i,t),e)}function ms(i,t,e){return t-i<=e}class hv extends $e{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null)return;const r=Math.max(1,Math.floor(s));t.lineWidth=r,(function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()})(t,(()=>{const o=k(this.jt);if(o.xl){t.strokeStyle=o.Cl,Be(t,o.yl),t.beginPath();for(const a of o.kl){const h=Math.round(a.Pl*s);t.moveTo(h,-r),t.lineTo(h,e.height+r)}t.stroke()}if(o.Tl){t.strokeStyle=o.Rl,Be(t,o.Dl),t.beginPath();for(const a of o.Il){const h=Math.round(a.Pl*n);t.moveTo(-r,h),t.lineTo(e.width+r,h)}t.stroke()}}))}}class lv{constructor(t){this.Xt=new hv,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){const t=this.yt.Qt().N().grid,e={Tl:t.horzLines.visible,xl:t.vertLines.visible,Rl:t.horzLines.color,Cl:t.vertLines.color,Dl:t.horzLines.style,yl:t.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map((s=>({Pl:s.coord})))};this.Xt.ht(e),this.xt=!1}return this.Xt}}class cv{constructor(t){this.$h=new lv(t)}pr(){return this.$h}}const Xn={Bl:4,El:1e-4};function qe(i,t){const e=100*(i-t)/t;return t<0?-e:e}function uv(i,t){const e=qe(i.Ze(),t),s=qe(i.Ge(),t);return new St(e,s)}function Di(i,t){const e=100*(i-t)/t+100;return t<0?-e:e}function fv(i,t){const e=Di(i.Ze(),t),s=Di(i.Ge(),t);return new St(e,s)}function en(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.log10(e+t.El)+t.Bl;return i<0?-s:s}function Oi(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.pow(10,e-t.Bl)-t.El;return i<0?-s:s}function yi(i,t){if(i===null)return null;const e=en(i.Ze(),t),s=en(i.Ge(),t);return new St(e,s)}function Qe(i,t){if(i===null)return null;const e=Oi(i.Ze(),t),s=Oi(i.Ge(),t);return new St(e,s)}function Gn(i){if(i===null)return Xn;const t=Math.abs(i.Ge()-i.Ze());if(t>=1||t<1e-15)return Xn;const e=Math.ceil(Math.abs(Math.log10(t))),s=Xn.Bl+e;return{Bl:s,El:1/Math.pow(10,s)}}class Jn{constructor(t,e){if(this.Al=t,this.Ll=e,(function(s){if(s<0)return!1;if(s>1e18)return!0;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0})(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let s=this.Al;s!==1;){if(s%2==0)this.zl.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),s/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(t,e,s){const n=this.Al===0?0:1/this.Al;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,a=this.Ll[0];for(;;){const u=ms(r,n,1e-14)&&r>n+1e-14,f=ms(r,s*a,1e-14),d=ms(r,1,1e-14);if(!(u&&f&&d))break;r/=a,a=this.Ll[++o%this.Ll.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.zl.length>0&&(h=r,l=1,c=1e-14,Math.abs(h-l)<c))for(o=0,a=this.zl[0];ms(r,s*a,1e-14)&&r>n+1e-14;)r/=a,a=this.zl[++o%this.zl.length];var h,l,c;return r}}class Sh{constructor(t,e,s,n){this.Nl=[],this.Ki=t,this.Al=e,this.Fl=s,this.Wl=n}Ol(t,e){if(t<e)throw new Error("high < low");const s=this.Ki.$t(),n=(t-e)*this.Hl()/s,r=new Jn(this.Al,[2,2.5,2]),o=new Jn(this.Al,[2,2,2.5]),a=new Jn(this.Al,[2.5,2,2]),h=[];return h.push(r.Ol(t,e,n),o.Ol(t,e,n),a.Ol(t,e,n)),(function(l){if(l.length<1)throw Error("array is empty");let c=l[0];for(let u=1;u<l.length;++u)l[u]<c&&(c=l[u]);return c})(h)}Ul(){const t=this.Ki,e=t.Lt();if(e===null)return void(this.Nl=[]);const s=t.$t(),n=this.Fl(s-1,e),r=this.Fl(0,e),o=this.Ki.N().entireTextOnly?this.$l()/2:0,a=o,h=s-1-o,l=Math.max(n,r),c=Math.min(n,r);if(l===c)return void(this.Nl=[]);const u=this.Ol(l,c);if(this.ql(e,u,l,c,a,h),t.jl()&&this.Yl(u,c,l)){const g=this.Ki.Kl();this.Zl(e,u,a,h,g,2*g)}const f=this.Nl.map((g=>g.Gl)),d=this.Ki.Xl(f);for(let g=0;g<this.Nl.length;g++)this.Nl[g].Jl=d[g]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(t,e,s,n,r,o){const a=this.Nl,h=this.Ki;let l=s%e;l+=l<0?e:0;const c=s>=n?1:-1;let u=null,f=0;for(let d=s-l;d>n;d-=e){const g=this.Wl(d,t,!0);u!==null&&Math.abs(g-u)<this.Hl()||g<r||g>o||(f<a.length?(a[f].Pl=g,a[f].Jl=h.Ql(d),a[f].Gl=d):a.push({Pl:g,Jl:h.Ql(d),Gl:d}),f++,u=g,h.io()&&(e=this.Ol(d*c,n)))}a.length=f}Zl(t,e,s,n,r,o){const a=this.Nl,h=this.so(t,s,r,o),l=this.so(t,n,-o,-r),c=this.Wl(0,t,!0)-this.Wl(e,t,!0);a.length>0&&a[0].Pl-h.Pl<c/2&&a.shift(),a.length>0&&l.Pl-a[a.length-1].Pl<c/2&&a.pop(),a.unshift(h),a.push(l)}so(t,e,s,n){const r=(s+n)/2,o=this.Fl(e+s,t),a=this.Fl(e+n,t),h=Math.min(o,a),l=Math.max(o,a),c=Math.max(.1,this.Ol(l,h)),u=this.Fl(e+r,t),f=u-u%c,d=this.Wl(f,t,!0);return{Jl:this.Ki.Ql(f),Pl:d,Gl:f}}Yl(t,e,s){let n=fe(this.Ki.er());return this.Ki.io()&&(n=Qe(n,this.Ki.no())),n.Ze()-e<t&&s-n.Ge()<t}}function iu(i){return i.slice().sort(((t,e)=>k(t._s())-k(e._s())))}var Ph;(function(i){i[i.Normal=0]="Normal",i[i.Logarithmic=1]="Logarithmic",i[i.Percentage=2]="Percentage",i[i.IndexedTo100=3]="IndexedTo100"})(Ph||(Ph={}));const Ch=new Jc,kh=new _n(100,1);class dv{constructor(t,e,s,n,r){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new ot,this.fo=new ot,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=kh,this.So=Gn(null),this.xo=t,this.Ps=e,this.Co=s,this.yo=n,this.ko=r,this.Po=new Sh(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(t){if(Nt(this.Ps,t),this._l(),t.mode!==void 0&&this.Do({ae:t.mode}),t.scaleMargins!==void 0){const e=Lt(t.scaleMargins.top),s=Lt(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(e+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+s}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(t){const e=this.ae();let s=null;t.ln!==void 0&&(this.Ps.autoScale=t.ln),t.ae!==void 0&&(this.Ps.mode=t.ae,t.ae!==2&&t.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),e.ae===1&&t.ae!==e.ae&&((function(r,o){if(r===null)return!1;const a=Oi(r.Ze(),o),h=Oi(r.Ge(),o);return isFinite(a)&&isFinite(h)})(this.sr,this.So)?(s=Qe(this.sr,this.So),s!==null&&this.Lo(s)):this.Ps.autoScale=!0),t.ae===1&&t.ae!==e.ae&&(s=yi(this.sr,this.So),s!==null&&this.Lo(s));const n=e.ae!==this.Ps.mode;n&&(e.ae===2||this.He())&&this._l(),n&&(e.ae===3||this.Eo())&&this._l(),t.Ao!==void 0&&e.Ao!==t.Ao&&(this.Ps.invertScale=t.Ao,this.zo()),this.fo.p(e,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(t){this.eo!==t&&(this.eo=t,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const t=this.$t()-this.Wo()-this.Ho();return this.ro=t,t}er(){return this.Uo(),this.sr}Lo(t,e){const s=this.sr;(e||s===null&&t!==null||s!==null&&!s.Ye(t))&&(this.wo=null,this.sr=t)}$o(t){this.Lo(t),this.qo(t!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(t){return this.Ao()?t:this.$t()-1-t}Nt(t,e){return this.He()?t=qe(t,e):this.Eo()&&(t=Di(t,e)),this.Ro(t,e)}Yo(t,e,s){this.Uo();const n=this.Ho(),r=k(this.er()),o=r.Ze(),a=r.Ge(),h=this.Fo()-1,l=this.Ao(),c=h/(a-o),u=s===void 0?0:s.from,f=s===void 0?t.length:s.to,d=this.Ko();for(let g=u;g<f;g++){const p=t[g],m=p.gt;if(isNaN(m))continue;let b=m;d!==null&&(b=d(p.gt,e));const v=n+c*(b-o),x=l?v:this.eo-1-v;p.ut=x}}Zo(t,e,s){this.Uo();const n=this.Ho(),r=k(this.er()),o=r.Ze(),a=r.Ge(),h=this.Fo()-1,l=this.Ao(),c=h/(a-o),u=s===void 0?0:s.from,f=s===void 0?t.length:s.to,d=this.Ko();for(let g=u;g<f;g++){const p=t[g];let m=p.Hr,b=p.Ur,v=p.$r,x=p.qr;d!==null&&(m=d(p.Hr,e),b=d(p.Ur,e),v=d(p.$r,e),x=d(p.qr,e));let w=n+c*(m-o),_=l?w:this.eo-1-w;p.Go=_,w=n+c*(b-o),_=l?w:this.eo-1-w,p.Xo=_,w=n+c*(v-o),_=l?w:this.eo-1-w,p.Jo=_,w=n+c*(x-o),_=l?w:this.eo-1-w,p.Qo=_}}Ds(t,e){const s=this.To(t,e);return this.t_(s,e)}t_(t,e){let s=t;return this.He()?s=(function(n,r){return r<0&&(n=-n),n/100*r+r})(s,e):this.Eo()&&(s=(function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r})(s,e)),s}Sl(){return this.po}Dt(){return this.mo||(this.mo=iu(this.po)),this.mo}i_(t){this.po.indexOf(t)===-1&&(this.po.push(t),this._l(),this.s_())}n_(t){const e=this.po.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.po.splice(e,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let t=null;for(const e of this.po){const s=e.Lt();s!==null&&(t===null||s.Ea<t.Ea)&&(t=s)}return t===null?null:t.Wt}Ao(){return this.Ps.invertScale}Vl(){const t=this.Lt()===null;if(this.wo!==null&&(t||this.wo.e_===t))return this.wo.Vl;this.Po.Ul();const e=this.Po.Vl();return this.wo={Vl:e,e_:t},this.do.p(),e}r_(){return this.do}h_(t){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-t,this.ho=k(this.er()).Ke()))}a_(t){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(t=this.eo-t)<0&&(t=0);let e=(this.Mo+.2*(this.eo-1))/(t+.2*(this.eo-1));const s=k(this.ho).Ke();e=Math.max(e,.1),s.Je(e),this.Lo(s)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(t){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=t,this.ho=k(this.er()).Ke()))}__(t){if(this.Vo()||this.bo===null)return;const e=k(this.er()).Xe()/(this.Fo()-1);let s=t-this.bo;this.Ao()&&(s*=-1);const n=s*e,r=k(this.ho).Ke();r.Qe(n),this.Lo(r,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(t,e){switch(this.Ps.mode){case 2:return this.c_(qe(t,e));case 3:return this.Xa().format(Di(t,e));default:return this.lr(t)}}Ql(t){switch(this.Ps.mode){case 2:return this.c_(t);case 3:return this.Xa().format(t);default:return this.lr(t)}}Xl(t){switch(this.Ps.mode){case 2:return this.d_(t);case 3:return this.Xa().formatTickmarks(t);default:return this.f_(t)}}Ma(t){return this.lr(t,k(this.vo).Xa())}ba(t,e){return t=qe(t,e),this.c_(t,Ch)}p_(){return this.po}v_(t){this.ao={oo:t,lo:!1}}Ws(){this.po.forEach((t=>t.Ws()))}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let t=1/0;this.vo=null;for(const s of this.po)s._s()<t&&(t=s._s(),this.vo=s);let e=100;this.vo!==null&&(e=Math.round(this.vo.qh())),this.Ja=kh,this.He()?(this.Ja=Ch,e=100):this.Eo()?(this.Ja=new _n(100,1),e=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new Sh(this,e,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(t){this._o=t}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(t,e){if(this.Uo(),this.Gi())return 0;t=this.io()&&t?en(t,this.So):t;const s=k(this.er()),n=this.Ho()+(this.Fo()-1)*(t-s.Ze())/s.Xe();return this.jo(n)}To(t,e){if(this.Uo(),this.Gi())return 0;const s=this.jo(t),n=k(this.er()),r=n.Ze()+n.Xe()*((s-this.Ho())/(this.Fo()-1));return this.io()?Oi(r,this.So):r}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const t=this.ao.oo;if(t===null)return;let e=null;const s=this.p_();let n=0,r=0;for(const h of s){if(!h.It())continue;const l=h.Lt();if(l===null)continue;const c=h.ra(t.Aa(),t.bi());let u=c&&c.er();if(u!==null){switch(this.Ps.mode){case 1:u=yi(u,this.So);break;case 2:u=uv(u,l.Wt);break;case 3:u=fv(u,l.Wt)}if(e=e===null?u:e.Sn(k(u)),c!==null){const f=c.rr();f!==null&&(n=Math.max(n,f.above),r=Math.max(r,f.below))}}}if(this.jl()&&(n=Math.max(n,this.Kl()),r=Math.max(r,this.Kl())),n===this.uo&&r===this.co||(this.uo=n,this.co=r,this.wo=null,this.Io()),e!==null){if(e.Ze()===e.Ge()){const h=5*this.m_();this.io()&&(e=Qe(e,this.So)),e=new St(e.Ze()-h,e.Ge()+h),this.io()&&(e=yi(e,this.So))}if(this.io()){const h=Qe(e,this.So),l=Gn(h);if(o=l,a=this.So,o.Bl!==a.Bl||o.El!==a.El){const c=this.ho!==null?Qe(this.ho,this.So):null;this.So=l,e=yi(h,l),c!==null&&(this.ho=yi(c,l))}}this.Lo(e)}else this.sr===null&&(this.Lo(new St(-.5,.5)),this.So=Gn(null));var o,a}Ko(){return this.He()?qe:this.Eo()?Di:this.io()?t=>en(t,this.So):null}g_(t,e,s){return e===void 0?(s===void 0&&(s=this.Xa()),s.format(t)):e(t)}M_(t,e,s){return e===void 0?(s===void 0&&(s=this.Xa()),s.formatTickmarks(t)):e(t)}lr(t,e){return this.g_(t,this.yo.priceFormatter,e)}f_(t,e){const s=this.yo.priceFormatter;return this.M_(t,this.yo.tickmarksPriceFormatter??(s?n=>n.map(s):void 0),e)}c_(t,e){return this.g_(t,this.yo.percentageFormatter,e)}d_(t,e){const s=this.yo.percentageFormatter;return this.M_(t,this.yo.tickmarksPercentageFormatter??(s?n=>n.map(s):void 0),e)}}function Eh(i){return i instanceof yn}class Lh{constructor(t,e){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new ot,this.ua=[],this.Jh=t,this.ns=e,this.k_=new cv(this);const s=e.N();this.P_=this.T_("left",s.leftPriceScale),this.R_=this.T_("right",s.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(s)}I_(t){if(t.leftPriceScale&&this.P_.cr(t.leftPriceScale),t.rightPriceScale&&this.R_.cr(t.rightPriceScale),t.localization&&(this.P_._l(),this.R_._l()),t.overlayPriceScales){const e=Array.from(this.b_.values());for(const s of e){const n=k(s[0].Ft());n.cr(t.overlayPriceScales),t.localization&&n._l()}}}V_(t){switch(t){case"left":return this.P_;case"right":return this.R_}return this.b_.has(t)?Lt(this.b_.get(t))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach((t=>{t.m&&t.m()})),this.ua=this.ua.filter((t=>{const e=t.Gh();return e.detached&&e.detached(),!1})),this.y_.p()}E_(){return this.x_}A_(t){this.x_=t}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(t){this.S_=t,this.z_()}No(t){this.eo=t,this.P_.No(t),this.R_.No(t),this.po.forEach((e=>{if(this.Zn(e)){const s=e.Ft();s!==null&&s.No(t)}})),this.z_()}O_(t){this.C_=t}N_(){return this.C_}F_(){return this.po.filter(Eh)}Sl(){return this.po}Zn(t){const e=t.Ft();return e===null||this.P_!==e&&this.R_!==e}i_(t,e,s){this.W_(t,e,s?t._s():this.po.length)}n_(t,e){const s=this.po.indexOf(t);pt(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1),e||this.po.forEach(((o,a)=>o.us(a)));const n=k(t.Ft()).ol();if(this.b_.has(n)){const o=Lt(this.b_.get(n)),a=o.indexOf(t);a!==-1&&(o.splice(a,1),o.length===0&&this.b_.delete(n))}const r=t.Ft();r&&r.Sl().indexOf(t)>=0&&(r.n_(t),this.H_(r)),this.mo=null}Xn(t){return t===this.P_?"left":t===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(t,e){t.h_(e)}Y_(t,e){t.a_(e),this.z_()}K_(t){t.l_()}Z_(t,e){t.o_(e)}G_(t,e){t.__(e),this.z_()}X_(t){t.u_()}z_(){this.po.forEach((t=>{t.Ws()}))}Rs(){let t=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?t=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?t=this.P_:this.po.length!==0&&(t=this.po[0].Ft()),t===null&&(t=this.R_),t}Gn(){let t=null;return this.ns.N().rightPriceScale.visible?t=this.R_:this.ns.N().leftPriceScale.visible&&(t=this.P_),t}H_(t){t!==null&&t.Vo()&&this.J_(t)}Q_(t){const e=this.Jh.Ie();t.Do({ln:!0}),e!==null&&t.v_(e),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach((t=>{this.Zn(t)&&this.H_(t.Ft())})),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=iu(this.po)),this.mo}su(t,e){e=Ai(e,0,this.po.length-1);const s=this.po.indexOf(t);pt(s!==-1,"setSeriesOrder: invalid data source"),this.po.splice(s,1),this.po.splice(e,0,t),this.po.forEach(((n,r)=>n.us(r))),this.mo=null;for(const n of[this.P_,this.R_])n.s_(),n._l();this.ns.dr()}Vt(){return this.Dt().filter(Eh)}nu(){return this.y_}eu(){return this.k_}nl(t){this.ua.push(new q1(t))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t)),t.detached&&t.detached(),this.ns.dr()}ru(){return this.ua}Za(t,e){return this.ua.map((s=>s.Qn(t,e))).filter((s=>s!==null))}J_(t){const e=t.p_();if(e&&e.length>0&&!this.Jh.Gi()){const s=this.Jh.Ie();s!==null&&t.v_(s)}t.Ws()}W_(t,e,s){let n=this.V_(e);if(n===null&&(n=this.T_(e,this.ns.N().overlayPriceScales)),this.po.splice(s,0,t),!wn(e)){const r=this.b_.get(e)||[];r.push(t),this.b_.set(e,r)}t.us(s),n.i_(t),t.cs(n),this.H_(n),this.mo=null}D_(t,e,s){e.ae!==s.ae&&this.J_(t)}T_(t,e){const s={visible:!0,autoScale:!0,...te(e)},n=new dv(t,s,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return n.No(this.$t()),n}}function bs(i){return{hu:i.hu,au:{te:i.lu.externalId},ou:i.lu.cursorStyle}}function gv(i,t,e,s){for(const n of i){const r=n.Tt(s);if(r!==null&&r.Qn){const o=r.Qn(t,e);if(o!==null)return{_u:n,au:o}}}return null}function pv(i){return i.Ys!==void 0}function su(i,t,e){const s=[i,...i.Dt()],n=(function(r,o,a){let h,l;for(const f of r){const d=f.Za?.(o,a)??[];for(const g of d)c=g.zOrder,u=h?.zOrder,(!u||c==="top"&&u!=="top"||c==="normal"&&u==="bottom")&&(h=g,l=f)}var c,u;return h&&l?{lu:h,hu:l}:null})(s,t,e);if(n?.lu.zOrder==="top")return bs(n);for(const r of s){if(n&&n.hu===r&&n.lu.zOrder!=="bottom"&&!n.lu.isBackground)return bs(n);if(pv(r)){const o=gv(r.Ys(i),t,e,i);if(o!==null)return{hu:r,_u:o._u,au:o.au}}if(n&&n.hu===r&&n.lu.zOrder!=="bottom"&&n.lu.isBackground)return bs(n)}return n?.lu?bs(n):null}class mv{constructor(t,e,s=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=t,this.cu=e,this.zn=s}du(t){const e=t.time,s=this.cu.cacheKey(e),n=this.Ln.get(s);if(n!==void 0)return n.fu;if(this.Vn===this.zn){const o=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(Lt(o)),this.En++,this.Vn--}const r=this.uu(t);return this.Ln.set(s,{fu:r,Wn:this.Bn}),this.An.set(this.Bn,s),this.Vn++,this.Bn++,r}}class Fi{constructor(t,e){pt(t<=e,"right should be >= left"),this.pu=t,this.vu=e}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(t){return this.pu<=t&&t<=this.vu}Ye(t){return this.pu===t.Aa()&&this.vu===t.bi()}}function Th(i,t){return i===null||t===null?i===t:i.Ye(t)}class bv{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(t){this.gu=t,this.Ln=null}bu(t,e){this.Su(e),this.Ln=null;for(let s=e;s<t.length;++s){const n=t[s];let r=this.wu.get(n.timeWeight);r===void 0&&(r=[],this.wu.set(n.timeWeight,r)),r.push({index:s,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}xu(t,e,s,n,r){const o=Math.ceil(e/t);return this.Ln!==null&&this.Ln.Cu===o&&r===this.Ln.yu&&s===this.Ln.ku||(this.Ln={yu:r,ku:s,Vl:this.Pu(o,s,n),Cu:o}),this.Ln.Vl}Su(t){if(t===0)return void this.wu.clear();const e=[];this.wu.forEach(((s,n)=>{t<=s[0].index?e.push(n):s.splice(ci(s,t,(r=>r.index<t)),1/0)}));for(const s of e)this.wu.delete(s)}Pu(t,e,s){let n=[];const r=o=>!e||s.has(o.index);for(const o of Array.from(this.wu.keys()).sort(((a,h)=>h-a))){if(!this.wu.get(o))continue;const a=n;n=[];const h=a.length;let l=0;const c=Lt(this.wu.get(o)),u=c.length;let f=1/0,d=-1/0;for(let g=0;g<u;g++){const p=c[g],m=p.index;for(;l<h;){const b=a[l],v=b.index;if(!(v<m&&r(b))){f=v;break}l++,n.push(b),d=v,f=1/0}if(f-m>=t&&m-d>=t&&r(p))n.push(p),d=m;else if(this.gu)return a}for(;l<h;l++)r(a[l])&&n.push(a[l])}return n}}class ei{constructor(t){this.Tu=t}Ru(){return this.Tu===null?null:new Fi(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new ei(null)}}function vv(i,t){return i.weight>t.weight?i:t}class xv{constructor(t,e,s,n){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new bv,this.Au=new Map,this.Lu=ei.Iu(),this.zu=!0,this.Ou=new ot,this.Nu=new ot,this.Fu=new ot,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=e,this.yo=s,this.Yu=e.rightOffset,this.Ku=e.barSpacing,this.ns=t,this.Zu(e),this.cu=n,this.Gu(),this.Eu.Mu(e.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(t){Nt(this.yo,t),this.tc(),this.Gu()}cr(t,e){Nt(this.Ps,t),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),t.barSpacing!==void 0&&this.ns.gn(t.barSpacing),t.rightOffset!==void 0&&this.ns.Mn(t.rightOffset),this.Zu(t),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ns.gn(t.barSpacing??this.Ku),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),t.enableConflation===void 0&&t.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(t){return this.Bu[t]?.time??null}es(t){return this.Bu[t]??null}ec(t,e){if(this.Bu.length<1)return null;if(this.cu.key(t)>this.cu.key(this.Bu[this.Bu.length-1].time))return e?this.Bu.length-1:null;const s=ci(this.Bu,this.cu.key(t),((n,r)=>this.cu.key(n.time)<r));return this.cu.key(t)<this.cu.key(this.Bu[s].time)?e?s:null:s}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const t=this.Ie();if(t===null)return null;const e={from:t.Aa(),to:t.bi()};return this.oc(e)}oc(t){const e=Math.round(t.from),s=Math.round(t.to),n=k(this._c()),r=k(this.uc());return{from:k(this.es(Math.max(n,e))),to:k(this.es(Math.min(r,s)))}}cc(t){return{from:k(this.ec(t.from,!0)),to:k(this.ec(t.to,!0))}}ss(){return this.S_}L_(t){if(!isFinite(t)||t<=0||this.S_===t)return;const e=this.ac(),s=this.S_;if(this.S_=t,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const n=this.Ku*t/s;this.Ku=n}if(this.Ps.fixLeftEdge&&e!==null&&e.Aa()<=0){const n=s-t;this.Yu-=Math.round(n/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(t){if(this.Gi()||!Ki(t))return 0;const e=this.vc()+this.Yu-t;return this.S_-(e+.5)*this.Ku-1}mc(t,e){const s=this.vc(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const a=t[o].wt,h=s+this.Yu-a,l=this.S_-(h+.5)*this.Ku-1;t[o]._t=l}}wc(t,e){const s=Math.ceil(this.gc(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(s)?this.bc(s):s}Mn(t){this.zu=!0,this.Yu=t,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(t){const e=this.Ku;if(this.xc(t),this.Ps.rightOffsetPixels!==void 0&&e!==0){const s=this.Yu*e/this.Ku;this.Yu=s}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const t=this.Ku,e=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(e/t),n=k(this.Ie()),r=Math.max(n.Aa(),n.Aa()-s),o=Math.max(n.bi(),n.bi()-s),a=this.Eu.xu(t,e,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),h=this._c()+s,l=this.uc()-s,c=this.yc(),u=this.Ps.fixLeftEdge||c,f=this.Ps.fixRightEdge||c;let d=0;for(const g of a){if(!(r<=g.index&&g.index<=o))continue;let p;d<this.qu.length?(p=this.qu[d],p.coord=this.qt(g.index),p.label=this.kc(g),p.weight=g.weight):(p={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.kc(g),weight:g.weight},this.qu.push(p)),this.Ku>e/2&&!c?p.needAlignCoordinate=!1:p.needAlignCoordinate=u&&g.index<=h||f&&g.index>=l,d++}return this.qu.length=d,this.Hu=this.qu,this.qu}Pc(){let t;this.zu=!0,this.gn(this.Ps.barSpacing),t=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(t)}Tc(t){this.zu=!0,this.Vu=t,this.fc(),this.sc()}Rc(t,e){const s=this.gc(t),n=this.ul(),r=n+e*(n/10);this.gn(r),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(s-this.gc(t)))}h_(t){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=t,this.Dc()))}a_(t){if(this.Wu===null)return;const e=Ai(this.S_-t,0,this.S_),s=Ai(this.S_-k(this.Mo),0,this.S_);e!==0&&s!==0&&this.gn(this.Wu.ul*e/s)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(t){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=t,this.Dc()))}__(t){if(this.bo===null)return;const e=(this.bo-t)/this.ul();this.Yu=k(this.Wu).Cc+e,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.Yu,n=performance.now();this.ns.vn({Ec:r=>(r-n)/e>=1,Ac:r=>{const o=(r-n)/e;return o>=1?t:s+(t-s)*o}})}kt(t,e){this.zu=!0,this.Bu=t,this.Eu.bu(t,e),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(t,e){const s=t.mu(),n=e&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-n)/s),this.Yu=t.bi()-this.vc(),e&&(this.Yu=n?n/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const t=this._c(),e=this.uc();if(t===null||e===null)return;const s=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new Fi(t,e+s),!0)}Wc(t){const e=new Fi(t.from,t.to);this.Nc(e)}rs(t){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(t.originalTime):this.cu.formatHorzItem(t.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const t=this.ns.tn();for(const e of t)for(const s of e.ll())this.Uu.set(s,!0);this.$u++}Hc(){return this.ju}vl(){const t=1/(window.devicePixelRatio||1),e=this.Ps.minBarSpacing;if(e>=t)return[1];const s=[1];let n=2;for(;n<=512;)e<t/n&&s.push(n),n*=2;return s}yc(){const t=this.ns.N().handleScroll,e=this.ns.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(t){return(this.S_-1-t)/this.Ku}gc(t){const e=this.Uc(t),s=this.vc()+this.Yu-e;return Math.round(1e6*s)/1e6}xc(t){const e=this.Ku;this.Ku=t,this.dc(),e!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(ei.Iu());const t=this.vc(),e=this.S_/this.Ku,s=this.Yu+t,n=new Fi(s-e+1,s);this.qc(new ei(n))}dc(){const t=Ai(this.Ku,this.jc(),this.Yc());this.Ku!==t&&(this.Ku=t,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const t=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=t)return void(this.ju=1);const e=t/this.Ku,s=Math.pow(2,Math.floor(Math.log2(e)));this.ju=Math.min(s,512)}fc(){const t=this.Kc();t!==null&&this.Yu<t&&(this.Yu=t,this.zu=!0);const e=this.Zc();this.Yu>e&&(this.Yu=e,this.zu=!0)}Kc(){const t=this._c(),e=this.Vu;return t===null||e===null?null:t-e-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(t){let e=this.Au.get(t.weight);return e===void 0&&(e=new mv((s=>this.Gc(s)),this.cu),this.Au.set(t.weight,e)),e.du(t)}Gc(t){return this.cu.formatTickmark(t,this.yo)}qc(t){const e=this.Lu;this.Lu=t,Th(e.Ru(),this.Lu.Ru())||this.Ou.p(),Th(e.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const t=this._c();if(t===null)return;const e=this.Ie();if(e===null)return;const s=e.Aa()-t;if(s<0){const n=this.Yu-s-1;this.Mn(n)}this.dc()}nc(){this.fc(),this.dc()}Mc(t){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(t)||!1}bc(t){const e=(function*(n){const r=Math.round(n),o=r<n;let a=1;for(;;)o?(yield r+a,yield r-a):(yield r-a,yield r+a),a++})(t),s=this.uc();for(;s;){const n=e.next().value;if(this.Uu.get(n))return n;if(n<0||n>s)break}return t}Zu(t){if(t.rightOffsetPixels!==void 0){const e=t.rightOffsetPixels/(t.barSpacing||this.Ku);this.ns.Mn(e)}}}var Rh,Nh,Ah,Dh,Oh;(function(i){i[i.OnTouchEnd=0]="OnTouchEnd",i[i.OnNextTap=1]="OnNextTap"})(Rh||(Rh={}));class wv{constructor(t,e,s){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new ot,this.nd=new ot,this.ed=null,this.rd=t,this.Ps=e,this.cu=s,this.ko=new m1(this.Ps.layout.colorParsers),this.hd=new p1(this),this.Jh=new xv(this,e.timeScale,this.Ps.localization,s),this.Ct=new E1(this,e.crosshair),this.ad=new av(e.crosshair),e.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(dt.yn())}dr(){this.dd(dt.Cn())}Ua(){this.dd(new dt(1))}ya(t){const e=this.fd(t);this.dd(e)}pd(){return this.td}vd(t){if(this.td?.hu===t?.hu&&this.td?.au?.te===t?.au?.te)return;const e=this.td;this.td=t,e!==null&&this.ya(e.hu),t!==null&&t.hu!==e?.hu&&this.ya(t.hu)}N(){return this.Ps}cr(t){Nt(this.Ps,t),this.Xc.forEach((e=>e.I_(t))),t.timeScale!==void 0&&this.Jh.cr(t.timeScale),t.localization!==void 0&&this.Jh.Qu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(t,e,s=0){const n=this.Xc[s];if(n===void 0)return;if(t==="left")return Nt(this.Ps,{leftPriceScale:e}),n.I_({leftPriceScale:e}),this.sd.p(),void this.Ca();if(t==="right")return Nt(this.Ps,{rightPriceScale:e}),n.I_({rightPriceScale:e}),this.sd.p(),void this.Ca();const r=this.wd(t,s);r!==null&&(r.Ft.cr(e),this.sd.p())}wd(t,e){const s=this.Xc[e];if(s===void 0)return null;const n=s.V_(t);return n!==null?{Gs:s,Ft:n}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(t,e){t.No(e),this.Sc()}L_(t){this.S_=t,this.Jh.L_(this.S_),this.Xc.forEach((e=>e.L_(t))),this.Sc()}Sd(t){this.Xc.length!==1&&(pt(t>=0&&t<this.Xc.length,"Invalid pane index"),this.Xc.splice(t,1),this.Ca())}xd(t,e){if(this.Xc.length<2)return;pt(t>=0&&t<this.Xc.length,"Invalid pane index");const s=this.Xc[t],n=this.Xc.reduce(((u,f)=>u+f.E_()),0),r=this.Xc.reduce(((u,f)=>u+f.$t()),0),o=r-30*(this.Xc.length-1);e=Math.min(o,Math.max(30,e));const a=n/r,h=s.$t();s.A_(e*a);let l=e-h,c=this.Xc.length-1;for(const u of this.Xc)if(u!==s){const f=Math.min(o,Math.max(30,u.$t()-l/c));l-=u.$t()-f,c-=1;const d=f*a;u.A_(d)}this.Ca()}Cd(t,e){pt(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index");const s=this.Xc[t],n=this.Xc[e];this.Xc[t]=n,this.Xc[e]=s,this.Ca()}yd(t,e){if(pt(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index"),t===e)return;const[s]=this.Xc.splice(t,1);this.Xc.splice(e,0,s),this.Ca()}j_(t,e,s){t.j_(e,s)}Y_(t,e,s){t.Y_(e,s),this.ka(),this.dd(this.kd(t,2))}K_(t,e){t.K_(e),this.dd(this.kd(t,2))}Z_(t,e,s){e.Vo()||t.Z_(e,s)}G_(t,e,s){e.Vo()||(t.G_(e,s),this.ka(),this.dd(this.kd(t,2)))}X_(t,e){e.Vo()||(t.X_(e),this.dd(this.kd(t,2)))}Q_(t,e){t.Q_(e),this.dd(this.kd(t,2))}Pd(t){this.Jh.h_(t)}Td(t,e){const s=this.Et();if(s.Gi()||e===0)return;const n=s.ss();t=Math.max(1,Math.min(t,n)),s.Rc(t,e),this.Sc()}Rd(t){this.Dd(0),this.Id(t),this.Vd()}Bd(t){this.Jh.a_(t),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(t){this.Jh.o_(t)}Id(t){this.Jh.__(t),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter((t=>t.It()))),this.Qc}xa(){this.Qc=null}Ad(t,e,s,n,r){this.Ct.Bs(t,e);let o=NaN,a=this.Jh.wc(t,!0);const h=this.Jh.Ie();h!==null&&(a=Math.min(Math.max(h.Aa(),a),h.bi())),a=this.Ct.Hs(a);const l=n.Rs(),c=l.Lt();if(c!==null&&(o=l.Ds(e,c)),o=this.ad.bl(o,a,n),this.Ct.zs(a,o,n),this.Ua(),!r){const u=su(n,t,e);this.vd(u&&{hu:u.hu,au:u.au,ou:u.ou||null}),this.nd.p(this.Ct.Bt(),{x:t,y:e},s)}}Ld(t,e,s){const n=s.Rs(),r=n.Lt(),o=n.Nt(t,k(r)),a=this.Jh.ec(e,!0),h=this.Jh.qt(k(a));this.Ad(h,o,null,s,!0)}zd(t){this.gd().Ns(),this.Ua(),t||this.nd.p(null,null,null)}ka(){const t=this.Ct.Gs();if(t!==null){const e=this.Ct.As(),s=this.Ct.Ls();this.Ad(e,s,null,t)}this.Ct.Ws()}Od(t,e,s){const n=this.Jh.Is(0);e!==void 0&&s!==void 0&&this.Jh.kt(e,s);const r=this.Jh.Is(0),o=this.Jh.vc(),a=this.Jh.Ie();if(a!==null&&n!==null&&r!==null){const h=a.Ee(o),l=this.cu.key(n)>this.cu.key(r),c=t!==null&&t>o&&!l,u=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=h&&(s!==void 0||u)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(c&&!f){const d=t-o;this.Jh.Mn(this.Jh.Cc()-d)}}this.Jh.Tc(t)}Ra(t){t!==null&&t.iu()}Kn(t){if((function(s){return s instanceof Lh})(t))return t;const e=this.Xc.find((s=>s.Dt().includes(t)));return e===void 0?null:e}Sc(){this.Xc.forEach((t=>t.iu())),this.ka()}m(){this.Xc.forEach((t=>t.m())),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(t,e){const s=this.ld(e);this.Wd(t,s),this.Jc.push(t),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(t){const e=this.Kn(t),s=this.Jc.indexOf(t);pt(s!==-1,"Series not found");const n=k(e);this.Jc.splice(s,1),n.n_(t),t.m&&t.m(),this.xa(),this.Jh.Ju(),this.Ud(n)}Sa(t,e){const s=k(this.Kn(t));s.n_(t,!0),s.i_(t,e,!0)}Fc(){const t=dt.Cn();t.cn(),this.dd(t)}$d(t){const e=dt.Cn();e.pn(t),this.dd(e)}wn(){const t=dt.Cn();t.wn(),this.dd(t)}gn(t){const e=dt.Cn();e.gn(t),this.dd(e)}Mn(t){const e=dt.Cn();e.Mn(t),this.dd(e)}vn(t){const e=dt.Cn();e.vn(t),this.dd(e)}dn(){const t=dt.Cn();t.dn(),this.dd(t)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(t,e){if(pt(e>=0,"Index should be greater or equal to 0"),e===this.Yd(t))return;const s=k(this.Kn(t));s.n_(t);const n=this.ld(e);this.Wd(t,n),s.Sl().length===0&&this.Ud(s),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(t){const e=this.ud,s=this.od;if(e===s)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.ed===null||this.ed.eh!==s||this.ed.rh!==e)this.ed={eh:s,rh:e,Zd:new Map};else{const r=this.ed.Zd.get(t);if(r!==void 0)return r}const n=this.ko.tt(s,e,t/100);return this.ed.Zd.set(t,n),n}Gd(t){return this.Xc.indexOf(t)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(t){const e=new Lh(this.Jh,this);this.Xc.push(e);const s=t??this.Xc.length-1,n=dt.yn();return n.hn(s,{an:0,ln:!0}),this.dd(n),e}ld(t){return pt(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Xc.length,t))<this.Xc.length?this.Xc[t]:this.Jd(t)}Yd(t){return this.Xc.findIndex((e=>e.F_().includes(t)))}kd(t,e){const s=new dt(e);if(t!==null){const n=this.Xc.indexOf(t);s.hn(n,{an:e})}return s}fd(t,e){return e===void 0&&(e=2),this.kd(this.Kn(t),e)}dd(t){this.rd&&this.rd(t),this.Xc.forEach((e=>e.eu().pr().kt()))}Wd(t,e){const s=t.N().priceScaleId,n=s!==void 0?s:this.qd();e.i_(t,n),wn(n)||t.cr(t.N())}_d(t){const e=this.Ps.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}Ud(t){!t.N_()&&t.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(t),1)}}function nu(i){if(i>=1)return 0;let t=0;for(;t<8;t++){const e=Math.round(i);if(Math.abs(e-i)<1e-8)return t;i*=10}return t}function Lr(i){return!li(i)&&!Qi(i)}function ru(i){return li(i)}(function(i){i[i.Disabled=0]="Disabled",i[i.Continuous=1]="Continuous",i[i.OnDataUpdate=2]="OnDataUpdate"})(Nh||(Nh={})),(function(i){i[i.LastBar=0]="LastBar",i[i.LastVisible=1]="LastVisible"})(Ah||(Ah={})),(function(i){i.Solid="solid",i.VerticalGradient="gradient"})(Dh||(Dh={})),(function(i){i[i.Year=0]="Year",i[i.Month=1]="Month",i[i.DayOfMonth=2]="DayOfMonth",i[i.Time=3]="Time",i[i.TimeWithSeconds=4]="TimeWithSeconds"})(Oh||(Oh={}));const Fh=i=>i.getUTCFullYear();function _v(i,t,e){return t.replace(/yyyy/g,(s=>ee(Fh(s),4))(i)).replace(/yy/g,(s=>ee(Fh(s)%100,2))(i)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(i,e)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(i,e)).replace(/MM/g,(s=>ee((n=>n.getUTCMonth()+1)(s),2))(i)).replace(/dd/g,(s=>ee((n=>n.getUTCDate())(s),2))(i))}class ou{constructor(t="yyyy-MM-dd",e="default"){this.Qd=t,this.tf=e}du(t){return _v(t,this.Qd,this.tf)}}class yv{constructor(t){this.if=t||"%h:%m:%s"}du(t){return this.if.replace("%h",ee(t.getUTCHours(),2)).replace("%m",ee(t.getUTCMinutes(),2)).replace("%s",ee(t.getUTCSeconds(),2))}}const Mv={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class Sv{constructor(t={}){const e={...Mv,...t};this.hf=new ou(e.sf,e.rf),this.af=new yv(e.nf),this.lf=e.ef}du(t){return`${this.hf.du(t)}${this.lf}${this.af.du(t)}`}}function vs(i){return 60*i*60*1e3}function qn(i){return 60*i*1e3}const xs=[{_f:(Ih=1,1e3*Ih),uf:10},{_f:qn(1),uf:20},{_f:qn(5),uf:21},{_f:qn(30),uf:22},{_f:vs(1),uf:30},{_f:vs(3),uf:31},{_f:vs(6),uf:32},{_f:vs(12),uf:33}];var Ih;function zh(i,t){if(i.getUTCFullYear()!==t.getUTCFullYear())return 70;if(i.getUTCMonth()!==t.getUTCMonth())return 60;if(i.getUTCDate()!==t.getUTCDate())return 50;for(let e=xs.length-1;e>=0;--e)if(Math.floor(t.getTime()/xs[e]._f)!==Math.floor(i.getTime()/xs[e]._f))return xs[e].uf;return 0}function Qn(i){let t=i;if(Qi(i)&&(t=uo(i)),!Lr(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{cf:Math.round(e.getTime()/1e3),df:t}}function Bh(i){if(!ru(i))throw new Error("time must be of type isUTCTimestamp");return{cf:i}}function uo(i){const t=new Date(i);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${i}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function jh(i){Qi(i.time)&&(i.time=uo(i.time))}class Vh{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(jh)})(t):jh(t)}createConverterToInternalObj(t){return k((function(e){return e.length===0?null:Lr(e[0].time)||Qi(e[0].time)?Qn:Bh})(t))}key(t){return typeof t=="object"&&"cf"in t?t.cf:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.df===void 0?new Date(1e3*e.cf).getTime():new Date(Date.UTC(e.df.year,e.df.month-1,e.df.day)).getTime()}convertHorzItemToInternal(t){return ru(e=t)?Bh(e):Lr(e)?Qn(e):Qn(uo(e));var e}updateFormatter(t){if(!this.Ps)return;const e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new Sv({sf:e,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:t.locale}):this.ff=new ou(e,t.locale)}formatHorzItem(t){const e=t;return this.ff.du(new Date(1e3*e.cf))}formatTickmark(t,e){const s=(function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),n=this.Ps.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,s,e.locale);if(r!==null)return r}return(function(r,o,a){const h={};switch(o){case 0:h.year="numeric";break;case 1:h.month="short";break;case 2:h.day="numeric";break;case 3:h.hour12=!1,h.hour="2-digit",h.minute="2-digit";break;case 4:h.hour12=!1,h.hour="2-digit",h.minute="2-digit",h.second="2-digit"}const l=r.df===void 0?new Date(1e3*r.cf):new Date(Date.UTC(r.df.year,r.df.month-1,r.df.day));return new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()).toLocaleString(a,h)})(t.time,s,e.locale)}maxTickMarkWeight(t){let e=t.reduce(vv,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(s,n=0){if(s.length===0)return;let r=n===0?null:s[n-1].time.cf,o=r!==null?new Date(1e3*r):null,a=0;for(let h=n;h<s.length;++h){const l=s[h],c=new Date(1e3*l.time.cf);o!==null&&(l.timeWeight=zh(c,o)),a+=l.time.cf-(r||l.time.cf),r=l.time.cf,o=c}if(n===0&&s.length>1){const h=Math.ceil(a/(s.length-1)),l=new Date(1e3*(s[0].time.cf-h));s[0].timeWeight=zh(new Date(1e3*s[0].time.cf),l)}})(t,e)}static pf(t){return Nt({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const ui=typeof window<"u";function Wh(){return!!ui&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Zn(){return!!ui&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Tr(i){return i+i%2}function Pv(i){ui&&window.chrome!==void 0&&i.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Mn{constructor(t,e,s){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!Zn(),this.Uf=n=>{this.$f(n)},this.qf=n=>{if(this.jf(n)){const r=this.Yf(n);if(++this.gf,this.Mf&&this.gf>1){const{Kf:o}=this.Zf(It(n),this.bf);o<30&&!this.Tf&&this.Gf(r,this.Jf.Xf),this.Qf()}}else{const r=this.Yf(n);if(++this.vf,this.mf&&this.vf>1){const{Kf:o}=this.Zf(It(n),this.wf);o<5&&!this.Pf&&this.tp(r,this.Jf.ip),this.sp()}}},this.np=t,this.Jf=e,this.Ps=s,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(t){this.Vf&&this.Vf();const e=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",e)},this.np.addEventListener("mousemove",e),this.jf(t))return;const s=this.Yf(t);this.tp(s,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(t){if(this.Nf||this.yf!==null||this.jf(t))return;const e=this.Yf(t);this.tp(e,this.Jf.op),this.Hf=!0}_p(t){const e=tr(t.changedTouches,k(this.Wf));if(e===null||(this.Ff=ws(t),this.Af!==null)||this.Of)return;this.zf=!0;const s=this.Zf(It(e),k(this.yf)),{up:n,cp:r,Kf:o}=s;if(this.kf||!(o<5)){if(!this.kf){const a=.5*n,h=r>=a&&!this.Ps.dp(),l=a>r&&!this.Ps.fp();h||l||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const a=this.Yf(t,e);this.Gf(a,this.Jf.pp),Xe(t)}}}vp(t){if(t.button!==0)return;const e=this.Zf(It(t),k(this.Cf)),{Kf:s}=e;if(s>=5&&(this.Pf=!0,this.sp()),this.Pf){const n=this.Yf(t);this.tp(n,this.Jf.mp)}}Zf(t,e){const s=Math.abs(e._t-t._t),n=Math.abs(e.ut-t.ut);return{up:s,cp:n,Kf:s+n}}wp(t){let e=tr(t.changedTouches,k(this.Wf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Wf=null,this.Ff=ws(t),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const s=this.Yf(t,e);if(this.Gf(s,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:n}=this.Zf(It(e),this.bf);n<30&&!this.Tf&&this.Gf(s,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(s,this.Jf.Mp),this.Jf.Mp&&Xe(t));this.gf===0&&Xe(t),t.touches.length===0&&this.xf&&(this.xf=!1,Xe(t))}$f(t){if(t.button!==0)return;const e=this.Yf(t);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),Wh()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(t))if(this.tp(e,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:s}=this.Zf(It(t),this.wf);s<5&&!this.Pf&&this.tp(e,this.Jf.ip),this.sp()}else this.Pf||this.tp(e,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(t){if(this.Wf!==null)return;const e=t.changedTouches[0];this.Wf=e.identifier,this.Ff=ws(t);const s=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=It(e),this.Ef&&(this.Ef(),this.Ef=null);{const r=this._p.bind(this),o=this.wp.bind(this);this.Ef=()=>{s.removeEventListener("touchmove",r),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,t),240)}const n=this.Yf(t,e);this.Gf(n,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=It(e))}kp(t){if(t.button!==0)return;const e=this.np.ownerDocument.documentElement;Wh()&&e.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=It(t),this.Bf&&(this.Bf(),this.Bf=null);{const n=this.vp.bind(this),r=this.$f.bind(this);this.Bf=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this.Nf=!0,this.jf(t))return;const s=this.Yf(t);this.tp(s,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=It(t))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const t=this.np.ownerDocument,e=s=>{this.Jf.Tp&&(s.composed&&this.np.contains(s.composedPath()[0])||s.target&&this.np.contains(s.target)||this.Jf.Tp())};this.Df=()=>{t.removeEventListener("touchstart",e)},this.Rf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Zn()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),Pv(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",(()=>{}),{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",(t=>this.Ep(t.touches)),{passive:!0}),this.np.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const e=Hh(t.touches[0],t.touches[1])/this.Lf;this.Jf.Vp(this.Af,e),Xe(t)}}),{passive:!1}),this.np.addEventListener("touchend",(t=>{this.Ep(t.touches)})))}Ep(t){t.length===1&&(this.zf=!1),t.length!==2||this.zf||this.xf?this.Ap():this.Lp(t)}Lp(t){const e=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Lf=Hh(t[0],t[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(t){if(this.Vf&&this.Vf(),this.jf(t)||!this.Hf)return;const e=this.Yf(t);this.tp(e,this.Jf.zp),this.Hf=!Zn()}Cp(t){const e=tr(t.touches,k(this.Wf));if(e===null)return;const s=this.Yf(t,e);this.Gf(s,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:ws(t)<this.Ff+500}Gf(t,e){e&&e.call(this.Jf,t)}tp(t,e){e&&e.call(this.Jf,t)}Yf(t,e){const s=e||t,n=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Np:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Fp:t.type,Wp:s.target,_u:t.view,Hp:()=>{t.type!=="touchstart"&&Xe(t)}}}}function Hh(i,t){const e=i.clientX-t.clientX,s=i.clientY-t.clientY;return Math.sqrt(e*e+s*s)}function Xe(i){i.cancelable&&i.preventDefault()}function It(i){return{_t:i.pageX,ut:i.pageY}}function ws(i){return i.timeStamp||performance.now()}function tr(i,t){for(let e=0;e<i.length;++e)if(i[e].identifier===t)return i[e];return null}class Cv{constructor(t,e,s){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=t,this.Kp=t.Zp()[e],this.Gp=t.Zp()[s],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return G({width:this.Kp.sv().width,height:1})}nv(){return G({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(t,e,s){const n=this.nv();t.fillStyle=this.Yp.N().layout.panes.separatorColor,t.fillRect(e,s,n.width,n.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Jp.appendChild(t);const s=document.createElement("div"),n=s.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.Jp.appendChild(s);const r={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new Mn(s,r,{dp:()=>!1,fp:()=>!0}),this.Up={hv:s,rv:t}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(t){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(t){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(t){if(this.Up===null)return;const e=this.Kp.cv().E_()+this.Gp.cv().E_(),s=e/(this.Kp.sv().height+this.Gp.sv().height),n=30*s;e<=2*n||(this.jp={dv:t.pageY,fv:this.Kp.cv().E_(),pv:e-n,vv:e,mv:s,wv:n},this.Up.rv.style.display="block")}_v(t){const e=this.jp;if(e===null)return;const s=(t.pageY-e.dv)*e.mv,n=Ai(e.fv+s,e.wv,e.pv);this.Kp.cv().A_(n),this.Gp.cv().A_(e.vv-n),this.Yp.Qt().Ca()}uv(t){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function er(i,t){return i.gv-t.gv}function ir(i,t,e){const s=(i.gv-t.gv)/(i.wt-t.wt);return Math.sign(s)*Math.min(Math.abs(s),e)}class kv{constructor(t,e,s,n){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=t,this.Tv=e,this.Rv=s,this.kn=n}Dv(t,e){if(this.Mv!==null){if(this.Mv.wt===e)return void(this.Mv.gv=t);if(Math.abs(this.Mv.gv-t)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:e,gv:t}}fe(t,e){if(this.Mv===null||this.bv===null||e-this.Mv.wt>50)return;let s=0;const n=ir(this.Mv,this.bv,this.Tv),r=er(this.Mv,this.bv),o=[n],a=[r];if(s+=r,this.Sv!==null){const l=ir(this.bv,this.Sv,this.Tv);if(Math.sign(l)===Math.sign(n)){const c=er(this.bv,this.Sv);if(o.push(l),a.push(c),s+=c,this.xv!==null){const u=ir(this.Sv,this.xv,this.Tv);if(Math.sign(u)===Math.sign(n)){const f=er(this.Sv,this.xv);o.push(u),a.push(f),s+=f}}}}let h=0;for(let l=0;l<o.length;++l)h+=a[l]/s*o[l];Math.abs(h)<this.Pv||(this.Cv={gv:t,wt:e},this.kv=h,this.yv=(function(l,c){const u=Math.log(c);return Math.log(1*u/-l)/u})(Math.abs(h),this.Rv))}Ac(t){const e=k(this.Cv),s=t-e.wt;return e.gv+this.kv*(Math.pow(this.Rv,s)-1)/Math.log(this.Rv)}Ec(t){return this.Cv===null||this.Iv(t)===this.yv}Iv(t){const e=t-k(this.Cv).wt;return Math.min(e,this.yv)}}class Ev{constructor(t,e){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=t,this.Lv=e,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function je(i,t){const e=k(i.ownerDocument).createElement("canvas");i.appendChild(e);const s=u1(e,{options:{allowResizeObserver:!0},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return s.resizeCanvasElement(t),s}function Ve(i){i.width=1,i.height=1,i.getContext("2d")?.clearRect(0,0,1,1)}function Rr(i,t,e,s){i.Uh&&i.Uh(t,e,s)}function Rs(i,t,e,s){i.nt(t,e,s)}function Nr(i,t,e,s){const n=i(e,s);for(const r of n){const o=r.Tt(s);o!==null&&t(o)}}function sr(i,t){return e=>(function(s){return s.Ft!==void 0})(e)?(e.Ft()?.ol()??"")!==t?[]:e.Ya?.(i)??[]:[]}function $h(i,t,e,s){if(!i.length)return;let n=0;const r=i[0].$t(s,!0);let o=t===1?e/2-(i[0].Hi()-r/2):i[0].Hi()-r/2-e/2;o=Math.max(0,o);for(let a=1;a<i.length;a++){const h=i[a],l=i[a-1],c=l.$t(s,!1),u=h.Hi(),f=l.Hi();if(t===1?u>f-c:u<f+c){const d=f-c*t;h.Ui(d);const g=d-t*c/2;if((t===1?g<0:g>e)&&o>0){const p=t===1?-1-g:g-e,m=Math.min(p,o);for(let b=n;b<i.length;b++)i[b].Ui(i[b].Hi()+t*m);o-=m}}else n=a,o=t===1?f-c-u:u-(f+c)}}class Yh{constructor(t,e,s,n){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new Qs(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=t,this.Ps=e,this.Co=e.layout,this.hd=s,this.Jv=n==="left",this.Qv=sr("normal",n),this.tm=sr("top",n),this.im=sr("bottom",n),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=je(this.Jp,G({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=je(this.Jp,G({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const o=this.nm.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new Mn(this.nm.canvasElement,a,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ve(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ve(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const t=this.hd.N();return this.jv!==t.P&&(this.qv.On(),this.jv=t.P),t}om(){if(this.Ki===null)return 0;let t=0;const e=this.lm(),s=k(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));s.save();const n=this.Ki.Vl();s.font=this._m(),n.length>0&&(t=Math.max(this.qv.Ii(s,n[0].Jl),this.qv.Ii(s,n[n.length-1].Jl)));const r=this.um();for(let l=r.length;l--;){const c=this.qv.Ii(s,r[l].ri());c>t&&(t=c)}const o=this.Ki.Lt();if(o!==null&&this.Uv!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const l=this.Ki.Ds(1,o),c=this.Ki.Ds(this.Uv.height-2,o);t=Math.max(t,this.qv.Ii(s,this.Ki.Ji(Math.floor(Math.min(l,c))+.11111111111111,o)),this.qv.Ii(s,this.Ki.Ji(Math.ceil(Math.max(l,c))-.11111111111111,o)))}var a;s.restore();const h=t||34;return Tr(Math.ceil(e.S+e.C+e.V+e.B+5+h))}dm(t){this.Uv!==null&&De(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`)}fm(){return k(this.Uv).width}cs(t){this.Ki!==t&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=t,t.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const t=this.yt.cv();this.yt.Gv().Qt().Q_(t,k(this.Ft()))}pm(t){if(this.Uv===null)return;const e={colorSpace:this.yt.Gv().N().layout.colorSpace};if(t!==1){this.vm(),this.sm.applySuggestedBitmapSize();const n=ze(this.sm,e);n!==null&&(n.useBitmapCoordinateSpace((r=>{this.wm(r),this.gm(r)})),this.yt.Mm(n,this.im),this.bm(n),this.yt.Mm(n,this.Qv),this.Sm(n))}this.nm.applySuggestedBitmapSize();const s=ze(this.nm,e);s!==null&&(s.useBitmapCoordinateSpace((({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)})),this.xm(s),this.yt.Mm(s,this.tm))}nv(){return this.sm.bitmapSize}ev(t,e,s,n){const r=this.nv();if(r.width>0&&r.height>0&&(t.drawImage(this.sm.canvasElement,e,s),n)){const o=this.nm.canvasElement;t.drawImage(o,e,s)}}kt(){this.Ki?.Vl()}ov(t){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),s=this.yt.cv();this.$v=!0,e.j_(s,this.Ki,t.localY)}_v(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),s=this.yt.cv(),n=this.Ki;e.Y_(s,n,t.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),e=this.yt.cv(),s=this.Ki;this.$v&&(this.$v=!1,t.K_(e,s))}uv(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),s=this.yt.cv();this.$v=!1,e.K_(s,this.Ki)}hm(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(t){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(t){this.Cm(0)}um(){const t=[],e=this.Ki===null?void 0:this.Ki;return(s=>{for(let n=0;n<s.length;++n){const r=s[n].Ks(this.yt.cv(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.yt.cv().Dt()),t}wm({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.yt.cv().Qt(),o=r.$(),a=r.Kd();o===a?vn(t,0,0,s,n,o):Uc(t,0,0,s,n,o,a)}gm({context:t,bitmapSize:e,horizontalPixelRatio:s}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;t.fillStyle=this.Ki.N().borderColor;const n=Math.max(1,Math.floor(this.lm().S*s));let r;r=this.Jv?e.width-n:0,t.fillRect(r,0,n,e.height)}bm(t){if(this.Uv===null||this.Ki===null)return;const e=this.Ki.Vl(),s=this.Ki.N(),n=this.lm(),r=this.Jv?this.Uv.width-n.C:0;s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace((({context:o,horizontalPixelRatio:a,verticalPixelRatio:h})=>{o.fillStyle=s.borderColor;const l=Math.max(1,Math.floor(h)),c=Math.floor(.5*h),u=Math.round(n.C*a);o.beginPath();for(const f of e)o.rect(Math.floor(r*a),Math.round(f.Pl*h)-c,u,l);o.fill()})),t.useMediaCoordinateSpace((({context:o})=>{o.font=this._m(),o.fillStyle=s.textColor??this.Co.textColor,o.textAlign=this.Jv?"right":"left",o.textBaseline="middle";const a=this.Jv?Math.round(r-n.V):Math.round(r+n.C+n.V),h=e.map((l=>this.qv.Di(o,l.Jl)));for(let l=e.length;l--;){const c=e[l];o.fillText(c.Jl,a,c.Pl+h[l])}}))}vm(){if(this.Uv===null||this.Ki===null)return;let t=this.Uv.height/2;const e=[],s=this.Ki.Dt().slice(),n=this.yt.cv(),r=this.lm();this.Ki===n.Gn()&&this.yt.cv().Dt().forEach((h=>{n.Zn(h)&&s.push(h)}));const o=this.Ki.Sl()[0],a=this.Ki;s.forEach((h=>{const l=h.Ks(n,a);l.forEach((c=>{c.$i()&&c.Wi()===null&&(c.Ui(null),e.push(c))})),o===h&&l.length>0&&(t=l[0].Ei())})),this.Ki.N().alignLabels&&this.ym(e,r,t)}ym(t,e,s){if(this.Uv===null)return;const n=t.filter((o=>o.Ei()<=s)),r=t.filter((o=>o.Ei()>s));n.sort(((o,a)=>a.Ei()-o.Ei())),n.length&&r.length&&r.push(n[0]),r.sort(((o,a)=>o.Ei()-a.Ei()));for(const o of t){const a=Math.floor(o.$t(e)/2),h=o.Ei();h>-a&&h<a&&o.Ui(a),h>this.Uv.height-a&&h<this.Uv.height+a&&o.Ui(this.Uv.height-a)}$h(n,1,this.Uv.height,e),$h(r,-1,this.Uv.height,e)}Sm(t){if(this.Uv===null)return;const e=this.um(),s=this.lm(),n=this.Jv?"right":"left";e.forEach((r=>{r.qi()&&r.Tt(k(this.Ki)).nt(t,s,this.qv,n)}))}xm(t){if(this.Uv===null||this.Ki===null)return;const e=this.yt.Gv().Qt(),s=[],n=this.yt.cv(),r=e.gd().Ks(n,this.Ki);r.length&&s.push(r);const o=this.lm(),a=this.Jv?"right":"left";s.forEach((h=>{h.forEach((l=>{l.Tt(k(this.Ki)).nt(t,o,this.qv,a)}))}))}Cm(t){this.Jp.style.cursor=t===1?"ns-resize":"default"}do(){const t=this.om();this.Yv<t&&this.yt.Gv().Qt().Ca(),this.Yv=t}_m(){return qs(this.Co.fontSize,this.Co.fontFamily)}}function Lv(i,t){return i.qa?.(t)??[]}function Uh(i,t){return i.Ys?.(t)??[]}function Kh(i,t){return i.ds?.(t)??[]}function Tv(i,t){return i.Ha?.(t)??[]}class fo{constructor(t,e){this.Uv=G({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new ot,this.Vm=new ot,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=t,this.Nm=e,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(s),this.sm=je(s,G({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const n=this.sm.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.nm=je(s,G({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new Mn(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ve(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ve(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return k(this.Nm)}qm(t){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=t,this.Nm!==null&&this.Nm.nu().i(fo.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new Ev(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const t=this.Nm.U_();this.km.cs(k(t))}if(this.Pm!==null){const t=this.Nm.q_();this.Pm.cs(k(t))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(t){this.Nm&&this.Nm.A_(t)}lp(t){if(!this.Nm)return;this.Km();const e=t.localX,s=t.localY;this.Zm(e,s,t)}Pp(t){this.Km(),this.Gm(),this.Zm(t.localX,t.localY,t)}op(t){if(!this.Nm)return;this.Km();const e=t.localX,s=t.localY;this.Zm(e,s,t)}Sp(t){this.Nm!==null&&(this.Km(),this.Xm(t))}ip(t){this.Nm!==null&&this.Jm(this.Vm,t)}Xf(t){this.ip(t)}mp(t){this.Km(),this.Qm(t),this.Zm(t.localX,t.localY,t)}bp(t){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(t))}Mp(t){this.Nm!==null&&this.Xm(t)}Op(t){if(this.Em=!0,this.Am===null){const e={x:t.localX,y:t.localY};this.iw(e,e,t)}}zp(t){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(t,e){if(!this.Lv.N().handleScale.pinch)return;const s=5*(e-this.Bm);this.Bm=e,this.ns().Td(t._t,s)}yp(t){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const e=this.ns().gd();this.Am!==null&&e.It()&&(this.zm={x:e.si(),y:e.ni()},this.Am={x:t.localX,y:t.localY})}pp(t){if(this.Nm===null)return;const e=t.localX,s=t.localY;if(this.Am===null)this.Qm(t);else{this.Lm=!1;const n=k(this.zm),r=n.x+(e-this.Am.x),o=n.y+(s-this.Am.y);this.Zm(r,o,t)}}gp(t){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(t)}Qn(t,e){const s=this.Nm;return s===null?null:su(s,t,e)}hw(t,e){k(e==="left"?this.km:this.Pm).dm(G({width:t,height:this.Uv.height}))}sv(){return this.Uv}dm(t){De(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Wm.style.width=t.width+"px",this.Wm.style.height=t.height+"px")}aw(){const t=k(this.Nm);t.H_(t.U_()),t.H_(t.q_());for(const e of t.Sl())if(t.Zn(e)){const s=e.Ft();s!==null&&t.H_(s),e.Ws()}for(const e of t.ru())e.Ws()}nv(){return this.sm.bitmapSize}ev(t,e,s,n){const r=this.nv();if(r.width>0&&r.height>0&&(t.drawImage(this.sm.canvasElement,e,s),n)){const o=this.nm.canvasElement;t!==null&&t.drawImage(o,e,s)}}pm(t){if(t===0||this.Nm===null)return;t>1&&this.aw(),this.km!==null&&this.km.pm(t),this.Pm!==null&&this.Pm.pm(t);const e={colorSpace:this.Lv.N().layout.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const n=ze(this.sm,e);n!==null&&(n.useBitmapCoordinateSpace((r=>{this.wm(r)})),this.Nm&&(this.lw(n,Lv),this.ow(n),this.lw(n,Uh),this.lw(n,Kh)))}this.nm.applySuggestedBitmapSize();const s=ze(this.nm,e);s!==null&&(s.useBitmapCoordinateSpace((({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)})),this._w(s),this.lw(s,Tv),this.lw(s,Kh))}uw(){return this.km}cw(){return this.Pm}Mm(t,e){this.lw(t,e)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(t){this.Jm(this.Im,t)}Jm(t,e){const s=e.localX,n=e.localY;t.v()&&t.p(this.ns().Et().wc(s),{x:s,y:n},e)}wm({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.ns(),o=r.$(),a=r.Kd();o===a?vn(t,0,0,s,n,a):Uc(t,0,0,s,n,o,a)}ow(t){const e=k(this.Nm),s=e.eu().pr().Tt(e);s!==null&&s.nt(t,!1)}_w(t){this.dw(t,Uh,Rs,this.ns().gd())}lw(t,e){const s=k(this.Nm),n=s.Dt(),r=s.ru();for(const o of r)this.dw(t,e,Rr,o);for(const o of n)this.dw(t,e,Rr,o);for(const o of r)this.dw(t,e,Rs,o);for(const o of n)this.dw(t,e,Rs,o)}dw(t,e,s,n){const r=k(this.Nm),o=r.Qt().pd(),a=o!==null&&o.hu===n,h=o!==null&&a&&o.au!==void 0?o.au.ie:void 0;Nr(e,(l=>s(l,t,a,h)),n,r)}jm(){if(this.Nm===null)return;const t=this.Lv,e=this.Nm.U_().N().visible,s=this.Nm.q_().N().visible;e||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),s||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const n=t.Qt().Nd();e&&this.km===null&&(this.km=new Yh(this,t.N(),n,"left"),this.Hm.appendChild(this.km.iv())),s&&this.Pm===null&&(this.Pm=new Yh(this,t.N(),n,"right"),this.Um.appendChild(this.Pm.iv()))}fw(t){return t.Np&&this.Em||this.Am!==null}Zm(t,e,s){t=Math.max(0,Math.min(t,this.Uv.width-1)),e=Math.max(0,Math.min(e,this.Uv.height-1)),this.ns().Ad(t,e,s,k(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(t,e,s){this.Am=t,this.Lm=!1,this.Zm(e.x,e.y,s);const n=this.ns().gd();this.zm={x:n.si(),y:n.ni()}}ns(){return this.Lv.Qt()}tw(t){if(!this.Dm)return;const e=this.ns(),s=this.cv();if(e.X_(s,s.Rs()),this.Rm=null,this.Dm=!1,e.Vd(),this.Om!==null){const n=performance.now(),r=e.Et();this.Om.fe(r.Cc(),n),this.Om.Ec(n)||e.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)k(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(t){if(this.Nm===null)return;const e=this.ns(),s=e.Et();if(s.Gi())return;const n=this.Lv.N(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t.Np)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.Np))return;const a=this.Nm.Rs(),h=performance.now();if(this.Rm!==null||this.fw(t)||(this.Rm={x:t.clientX,y:t.clientY,cf:h,pw:t.localX,mw:t.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==t.clientX||this.Rm.y!==t.clientY)){if(t.Np&&o.touch||!t.Np&&o.mouse){const l=s.ul();this.Om=new kv(.2/l,7/l,.997,15/l),this.Om.Dv(s.Cc(),this.Rm.cf)}else this.Om=null;a.Gi()||e.Z_(this.Nm,a,t.localY),e.Dd(t.localX),this.Dm=!0}this.Dm&&(a.Gi()||e.G_(this.Nm,a,t.localY),e.Id(t.localX),this.Om!==null&&this.Om.Dv(s.Cc(),h))}}class Xh{constructor(t,e,s,n,r){this.xt=!0,this.Uv=G({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=t==="left",this.hd=s.Nd,this.Ps=e,this.ww=n,this.gw=r,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=je(this.Jp,G({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ve(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(t){De(this.Uv,t)||(this.Uv=t,this.sm.resizeCanvasElement(t),this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xt=!0)}pm(t){if(t<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const e=ze(this.sm,{colorSpace:this.Ps.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace((s=>{this.wm(s),this.gm(s)}))}nv(){return this.sm.bitmapSize}ev(t,e,s){const n=this.nv();n.width>0&&n.height>0&&t.drawImage(this.sm.canvasElement,e,s)}gm({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.ww())return;t.fillStyle=this.Ps.timeScale.borderColor;const r=Math.floor(this.hd.N().S*s),o=Math.floor(this.hd.N().S*n),a=this.Jv?e.width-r:0;t.fillRect(a,0,r,o)}wm({context:t,bitmapSize:e}){vn(t,0,0,e.width,e.height,this.gw())}}function go(i){return t=>t.Ka?.(i)??[]}const Rv=go("normal"),Nv=go("top"),Av=go("bottom");class Dv{constructor(t,e){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=G({width:0,height:0}),this.xw=new ot,this.qv=new Qs(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=t,this.cu=e,this.Ps=t.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=je(this.kw,G({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=je(this.kw,G({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const n=this.nm.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new Mn(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ve(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ve(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(t){if(this.Sw)return;this.Sw=!0;const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Pd(t.localX)}yp(t){this.Pp(t)}Tp(){const t=this.Lv.Qt();!t.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Ed())}mp(t){const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Bd(t.localX)}pp(t){this.mp(t)}bp(){this.Sw=!1;const t=this.Lv.Qt();t.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||t.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(t,e,s){De(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xw.p(t)),this.Mw!==null&&this.Mw.dm(G({width:e,height:t.height})),this.bw!==null&&this.bw.dm(G({width:s,height:t.height}))}Vw(){const t=this.Bw();return Math.ceil(t.S+t.C+t.k+t.A+t.I+t.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(t,e,s,n){const r=this.nv();if(r.width>0&&r.height>0&&(t.drawImage(this.sm.canvasElement,e,s),n)){const o=this.nm.canvasElement;t.drawImage(o,e,s)}}pm(t){if(t===0)return;const e={colorSpace:this.Ps.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const n=ze(this.sm,e);n!==null&&(n.useBitmapCoordinateSpace((r=>{this.wm(r),this.gm(r),this.Aw(n,Av)})),this.bm(n),this.Aw(n,Rv)),this.Mw!==null&&this.Mw.pm(t),this.bw!==null&&this.bw.pm(t)}this.nm.applySuggestedBitmapSize();const s=ze(this.nm,e);s!==null&&(s.useBitmapCoordinateSpace((({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)})),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],s),this.Aw(s,Nv))}Aw(t,e){const s=this.Lv.Qt().tn();for(const n of s)Nr(e,(r=>Rr(r,t,!1,void 0)),n,void 0);for(const n of s)Nr(e,(r=>Rs(r,t,!1,void 0)),n,void 0)}wm({context:t,bitmapSize:e}){vn(t,0,0,e.width,e.height,this.Lv.Qt().Kd())}gm({context:t,bitmapSize:e,verticalPixelRatio:s}){if(this.Lv.N().timeScale.borderVisible){t.fillStyle=this.zw();const n=Math.max(1,Math.floor(this.Bw().S*s));t.fillRect(0,0,e.width,n)}}bm(t){const e=this.Lv.Qt().Et(),s=e.Vl();if(!s||s.length===0)return;const n=this.cu.maxTickMarkWeight(s),r=this.Bw(),o=e.N();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace((({context:a,horizontalPixelRatio:h,verticalPixelRatio:l})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();const c=Math.max(1,Math.floor(h)),u=Math.floor(.5*h);a.beginPath();const f=Math.round(r.C*l);for(let d=s.length;d--;){const g=Math.round(s[d].coord*h);a.rect(g-u,0,c,f)}a.fill()})),t.useMediaCoordinateSpace((({context:a})=>{const h=r.S+r.C+r.A+r.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m();for(const l of s)if(l.weight<n){const c=l.needAlignCoordinate?this.Ow(a,l.coord,l.label):l.coord;a.fillText(l.label,c,h)}this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw());for(const l of s)if(l.weight>=n){const c=l.needAlignCoordinate?this.Ow(a,l.coord,l.label):l.coord;a.fillText(l.label,c,h)}}))}Ow(t,e,s){const n=this.qv.Ii(t,s),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.Uv.width&&(e-=Math.abs(this.Uv.width-(o+n))),e}Lw(t,e){const s=this.Bw();for(const n of t)for(const r of n.fs())r.Tt().nt(e,s)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return qs(this.F(),this.Ps.fontFamily)}Nw(){return qs(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new Qs,Ew:0});const t=this.M,e=this._m();if(t.P!==e){const s=this.F();t.k=s,t.P=e,t.A=3*s/12,t.I=3*s/12,t.ts=9*s/12,t.L=0,t.Ew=4*s/12,t.Qi.On()}return this.M}Cm(t){this.Jp.style.cursor=t===1?"ew-resize":"default"}Pw(){const t=this.Lv.Qt(),e=t.N();e.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),e.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const s={Nd:this.Lv.Qt().Nd()},n=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,r=()=>t.Kd();e.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new Xh("left",e,s,n,r),this.Cw.appendChild(this.Mw.iv())),e.rightPriceScale.visible&&this.bw===null&&(this.bw=new Xh("right",e,s,n,r),this.yw.appendChild(this.bw.iv()))}}const Ov=!!ui&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((i=>i.brand.includes("Chromium")))&&!!ui&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class Fv{constructor(t,e,s){var n;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new ot,this.Vm=new ot,this.nd=new ot,this.Yw=null,this.Kw=null,this.Av=t,this.Ps=e,this.cu=s,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(n=this.Vv).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),nr(this.Ps)&&this.Jw(!0),this.ns=new wv(this.rd.bind(this),this.Ps,s),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new Dv(this,this.cu),this.Zw.appendChild(this.tg.iv());const r=e.autoSize&&this.ig();let o=this.Ps.width,a=this.Ps.height;if(r||o===0||a===0){const h=t.getBoundingClientRect();o=o||h.width,a=a||h.height}this.sg(o,a),this.ng(),t.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const t of this.Fw)this.Zw.removeChild(t.iv()),t.nw().u(this),t.ew().u(this),t.m();this.Fw=[];for(const t of this.Ww)this.hg(t);this.Ww=[],k(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(t,e,s=!1){if(this.eo===e&&this.S_===t)return;const n=(function(a){const h=Math.floor(a.width),l=Math.floor(a.height);return G({width:h-h%2,height:l-l%2})})(G({width:t,height:e}));this.eo=n.height,this.S_=n.width;const r=this.eo+"px",o=this.S_+"px";k(this.Vv).style.height=r,k(this.Vv).style.width=o,this.Zw.style.height=r,this.Zw.style.width=o,s?this.lg(dt.yn(),performance.now()):this.ns.Ca()}pm(t){t===void 0&&(t=dt.yn());for(let e=0;e<this.Fw.length;e++)this.Fw[e].pm(t.un(e).an);this.Ps.timeScale.visible&&this.tg.pm(t._n())}cr(t){const e=nr(this.Ps);this.ns.cr(t);const s=nr(this.Ps);s!==e&&this.Jw(s),t.layout?.panes&&this.og(),this.eg(),this._g(t)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(t=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const e=this.cg(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=k(s.getContext("2d"));return this.cg(n,t),s}dg(t){return t==="left"&&!this.fg()||t==="right"&&!this.pg()||this.Fw.length===0?0:k(t==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(t){this.Kw=t,this.Kw?this.hv().style.setProperty("cursor",t):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(t){return Lt(this.Fw[t]).sv()}og(){this.Ww.forEach((t=>{t.kt()}))}_g(t){(t.autoSize!==void 0||!this.Yw||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Yw&&this.ig(),t.autoSize===!1&&this.Yw!==null&&this.ag(),t.autoSize||t.width===void 0&&t.height===void 0||this.sg(t.width||this.S_,t.height||this.eo))}cg(t,e){let s=0,n=0;const r=this.Fw[0],o=(h,l)=>{let c=0;for(let u=0;u<this.Fw.length;u++){const f=this.Fw[u],d=k(h==="left"?f.uw():f.cw()),g=d.nv();if(t!==null&&d.ev(t,l,c,e),c+=g.height,u<this.Fw.length-1){const p=this.Ww[u],m=p.nv();t!==null&&p.ev(t,l,c),c+=m.height}}};this.fg()&&(o("left",0),s+=k(r.uw()).nv().width);for(let h=0;h<this.Fw.length;h++){const l=this.Fw[h],c=l.nv();if(t!==null&&l.ev(t,s,n,e),n+=c.height,h<this.Fw.length-1){const u=this.Ww[h],f=u.nv();t!==null&&u.ev(t,s,n),n+=f.height}}s+=r.nv().width,this.pg()&&(o("right",s),s+=k(r.cw()).nv().width);const a=(h,l,c)=>{k(h==="left"?this.tg.Tw():this.tg.Rw()).ev(k(t),l,c)};if(this.Ps.timeScale.visible){const h=this.tg.nv();if(t!==null){let l=0;this.fg()&&(a("left",l,n),l=k(r.uw()).nv().width),this.tg.ev(t,l,n,e),l+=h.width,this.pg()&&a("right",l,n)}n+=h.height}return G({width:s,height:n})}Mg(){let t=0,e=0,s=0;for(const m of this.Fw)this.fg()&&(e=Math.max(e,k(m.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(s=Math.max(s,k(m.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),t+=m.E_();e=Tr(e),s=Tr(s);const n=this.S_,r=this.eo,o=Math.max(n-e-s,0),a=1*this.Ww.length,h=this.Ps.timeScale.visible;let l=h?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=a+l,f=r<u?0:r-u,d=f/t;let g=0;const p=window.devicePixelRatio||1;for(let m=0;m<this.Fw.length;++m){const b=this.Fw[m];b.qm(this.ns.Xs()[m]);let v=0,x=0;x=m===this.Fw.length-1?Math.ceil((f-g)*p)/p:Math.round(b.E_()*d*p)/p,v=Math.max(x,2),g+=v,b.dm(G({width:o,height:v})),this.fg()&&b.hw(e,"left"),this.pg()&&b.hw(s,"right"),b.cv()&&this.ns.bd(b.cv(),v)}this.tg.Iw(G({width:h?o:0,height:l}),h?e:0,h?s:0),this.ns.L_(o),this.Uw!==e&&(this.Uw=e),this.$w!==s&&(this.$w=s)}Jw(t){t?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Ov?1/window.devicePixelRatio:1}Xw(t){if(!(t.deltaX!==0&&this.Ps.handleScroll.mouseWheel||t.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const e=this.bg(t),s=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.Ps.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(o,r)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*s)}lg(t,e){const s=t._n();s===3&&this.Sg(),s!==3&&s!==2||(this.xg(t),this.Cg(t,e),this.tg.kt(),this.Fw.forEach((n=>{n.Ym()})),this.qw?._n()===3&&(this.qw.Sn(t),this.Sg(),this.xg(this.qw),this.Cg(this.qw,e),t=this.qw,this.qw=null)),this.pm(t)}Cg(t,e){for(const s of t.bn())this.xn(s,e)}xg(t){const e=this.ns.Xs();for(let s=0;s<e.length;s++)t.un(s).ln&&e[s].tu()}xn(t,e){const s=this.ns.Et();switch(t.fn){case 0:s.Fc();break;case 1:s.Wc(t.Wt);break;case 2:s.gn(t.Wt);break;case 3:s.Mn(t.Wt);break;case 4:s.Pc();break;case 5:t.Wt.Ec(e)||s.Mn(t.Wt.Ac(e))}}rd(t){this.qw!==null?this.qw.Sn(t):this.qw=t,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame((e=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const s=this.qw;this.qw=null,this.lg(s,e);for(const n of s.bn())if(n.fn===5&&!n.Wt.Ec(e)){this.Qt().vn(n.Wt);break}}})))}Sg(){this.ng()}hg(t){this.Zw.removeChild(t.iv()),t.m()}ng(){const t=this.ns.Xs(),e=t.length,s=this.Fw.length;for(let n=e;n<s;n++){const r=Lt(this.Fw.pop());this.Zw.removeChild(r.iv()),r.nw().u(this),r.ew().u(this),r.m();const o=this.Ww.pop();o!==void 0&&this.hg(o)}for(let n=s;n<e;n++){const r=new fo(this,t[n]);if(r.nw().i(this.yg.bind(this,r),this),r.ew().i(this.kg.bind(this,r),this),this.Fw.push(r),n>0){const o=new Cv(this,n-1,n);this.Ww.push(o),this.Zw.insertBefore(o.iv(),this.tg.iv())}this.Zw.insertBefore(r.iv(),this.tg.iv())}for(let n=0;n<e;n++){const r=t[n],o=this.Fw[n];o.cv()!==r?o.qm(r):o.$m()}this.eg(),this.Mg()}Pg(t,e,s,n){const r=new Map;t!==null&&this.ns.tn().forEach((u=>{const f=u.qs().$s(t);f!==null&&r.set(u,f)}));let o;if(t!==null){const u=this.ns.Et().es(t)?.originalTime;u!==void 0&&(o=u)}const a=this.Qt().pd(),h=a!==null&&a.hu instanceof yn?a.hu:void 0,l=a!==null&&a.au!==void 0?a.au.te:void 0,c=this.Tg(n);return{Gr:o,js:t??void 0,Rg:e??void 0,Dg:c!==-1?c:void 0,Ig:h,Vg:r,Bg:l,Eg:s??void 0}}Tg(t){let e=-1;if(t)e=this.Fw.indexOf(t);else{const s=this.Qt().gd().Gs();s!==null&&(e=this.Qt().Xs().indexOf(s))}return e}yg(t,e,s,n){this.Im.p((()=>this.Pg(e,s,n,t)))}kg(t,e,s,n){this.Vm.p((()=>this.Pg(e,s,n,t)))}Qw(t,e,s){this.mg(this.Qt().pd()?.ou??null),this.nd.p((()=>this.Pg(t,e,s)))}eg(){const t=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=t}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.sg(e.contentRect.width,e.contentRect.height)})),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function nr(i){return!!(i.handleScroll.mouseWheel||i.handleScale.mouseWheel)}function Iv(i){return i.open===void 0&&i.value===void 0}function zv(i){return(function(t){return t.open!==void 0})(i)||(function(t){return t.value!==void 0})(i)}function Gh(i,t,e,s){const n=e.value,r={js:t,wt:i,Wt:[n,n,n,n],Gr:s};return e.color!==void 0&&(r.R=e.color),r}function Bv(i,t,e,s){const n=e.value,r={js:t,wt:i,Wt:[n,n,n,n],Gr:s};return e.lineColor!==void 0&&(r.vt=e.lineColor),e.topColor!==void 0&&(r.eh=e.topColor),e.bottomColor!==void 0&&(r.rh=e.bottomColor),r}function jv(i,t,e,s){const n=e.value,r={js:t,wt:i,Wt:[n,n,n,n],Gr:s};return e.topLineColor!==void 0&&(r.hh=e.topLineColor),e.bottomLineColor!==void 0&&(r.ah=e.bottomLineColor),e.topFillColor1!==void 0&&(r.oh=e.topFillColor1),e.topFillColor2!==void 0&&(r._h=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.uh=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.dh=e.bottomFillColor2),r}function Vv(i,t,e,s){const n={js:t,wt:i,Wt:[e.open,e.high,e.low,e.close],Gr:s};return e.color!==void 0&&(n.R=e.color),n}function Wv(i,t,e,s){const n={js:t,wt:i,Wt:[e.open,e.high,e.low,e.close],Gr:s};return e.color!==void 0&&(n.R=e.color),e.borderColor!==void 0&&(n.Ht=e.borderColor),e.wickColor!==void 0&&(n.nh=e.wickColor),n}function Hv(i,t,e,s,n){const r=Lt(n)(e),o=Math.max(...r),a=Math.min(...r),h=r[r.length-1],l=[h,o,a,h],{time:c,color:u,...f}=e;return{js:t,wt:i,Wt:l,Gr:s,le:f,R:u}}function Ge(i){return i.Wt!==void 0}function Jh(i,t){return t.customValues!==void 0&&(i.Ag=t.customValues),i}function ke(i){return(t,e,s,n,r,o)=>(function(a,h){return h?h(a):Iv(a)})(s,o)?Jh({wt:t,js:e,Gr:n},s):Jh(i(t,e,s,n,r),s)}function qh(i){return{Candlestick:ke(Wv),Bar:ke(Vv),Area:ke(Bv),Baseline:ke(jv),Histogram:ke(Gh),Line:ke(Gh),Custom:ke(Hv)}[i]}function Qh(i){return{js:0,Lg:new Map,Ea:i}}function Zh(i,t){if(i!==void 0&&i.length!==0)return{zg:t.key(i[0].wt),Og:t.key(i[i.length-1].wt)}}function tl(i){let t;return i.forEach((e=>{t===void 0&&(t=e.Gr)})),Lt(t)}class $v{constructor(t){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=t}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(t,e){let s=this.Ng.size!==0,n=!1;const r=this.Fg.get(t);if(r!==void 0)if(this.Fg.size===1)s=!1,n=!0,this.Ng.clear();else for(const h of this.Hg)h.pointData.Lg.delete(t)&&(n=!0);let o=[];if(e.length!==0){const h=e.map((d=>d.time)),l=this.cu.createConverterToInternalObj(e),c=qh(t.wh()),u=t.rl(),f=t.hl();o=e.map(((d,g)=>{const p=l(d.time),m=this.cu.key(p);let b=this.Ng.get(m);b===void 0&&(b=Qh(p),this.Ng.set(m,b),n=!0);const v=c(p,b.js,d,h[g],u,f);return b.Lg.set(t,v),v}))}s&&this.$g(),this.qg(t,o);let a=-1;if(n){const h=[];this.Ng.forEach((l=>{h.push({timeWeight:0,time:l.Ea,pointData:l,originalTime:tl(l.Lg)})})),h.sort(((l,c)=>this.cu.key(l.time)-this.cu.key(c.time))),a=this.jg(h)}return this.Yg(t,a,(function(h,l,c){const u=Zh(h,c),f=Zh(l,c);if(u!==void 0&&f!==void 0)return{Kg:!1,Ta:u.Og>=f.Og&&u.zg>=f.zg}})(this.Fg.get(t),r,this.cu))}Hd(t){return this.Ug(t,[])}Zg(t,e,s){if(s&&t.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const n=e;(function(b){b.Gr===void 0&&(b.Gr=b.time)})(n),this.cu.preprocessData(e);const r=this.cu.createConverterToInternalObj([e])(e.time),o=this.Wg.get(t);if(!s&&o!==void 0&&this.cu.key(r)<this.cu.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.Ng.get(this.cu.key(r));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const h=a===void 0;a===void 0&&(a=Qh(r),this.Ng.set(this.cu.key(r),a));const l=qh(t.wh()),c=t.rl(),u=t.hl(),f=l(r,a.js,e,n.Gr,c,u),d=!s&&!h&&o!==void 0&&this.cu.key(r)===this.cu.key(o);a.Lg.set(t,f),s?this.Gg(t,f,a.js):d&&t.La()&&Ge(f)?(t.kr(f),this.Xg(t,f)):this.Xg(t,f);const g={Ta:Ge(f),Kg:s};if(!h)return this.Yg(t,-1,g);const p={timeWeight:0,time:a.Ea,pointData:a,originalTime:tl(a.Lg)},m=ci(this.Hg,this.cu.key(p.time),((b,v)=>this.cu.key(b.time)<v));this.Hg.splice(m,0,p);for(let b=m;b<this.Hg.length;++b)_s(this.Hg[b].pointData,b);return this.cu.fillWeightsForPoints(this.Hg,m),this.Yg(t,m,g)}Jg(t,e){const s=this.Fg.get(t);if(s===void 0||e<=0)return[[],this.Qg()];e=Math.min(e,s.length);const n=s.splice(-e).reverse();s.length===0?this.Wg.delete(t):this.Wg.set(t,s[s.length-1].wt);for(const r of n){const o=this.Ng.get(this.cu.key(r.wt));if(o&&(o.Lg.delete(t),o.Lg.size===0)){this.Ng.delete(this.cu.key(o.Ea)),this.Hg.splice(o.js,1);for(let a=o.js;a<this.Hg.length;++a)_s(this.Hg[a].pointData,a)}}return[n,this.Yg(t,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(t,e){let s=this.Fg.get(t);s===void 0&&(s=[],this.Fg.set(t,s));const n=s.length!==0?s[s.length-1]:null;n===null||this.cu.key(e.wt)>this.cu.key(n.wt)?Ge(e)&&s.push(e):Ge(e)?s[s.length-1]=e:s.splice(-1,1),this.Wg.set(t,e.wt)}Gg(t,e,s){const n=this.Fg.get(t);if(n===void 0)return;const r=ci(n,s,((o,a)=>o.js<a));Ge(e)?n[r]=e:n.splice(r,1)}qg(t,e){e.length!==0?(this.Fg.set(t,e.filter(Ge)),this.Wg.set(t,e[e.length-1].wt)):(this.Fg.delete(t),this.Wg.delete(t))}$g(){for(const t of this.Hg)t.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(t.time))}jg(t){let e=-1;for(let s=0;s<this.Hg.length&&s<t.length;++s){const n=this.Hg[s],r=t[s];if(this.cu.key(n.time)!==this.cu.key(r.time)){e=s;break}r.timeWeight=n.timeWeight,_s(r.pointData,s)}if(e===-1&&this.Hg.length!==t.length&&(e=Math.min(this.Hg.length,t.length)),e===-1)return-1;for(let s=e;s<t.length;++s)_s(t[s].pointData,s);return this.cu.fillWeightsForPoints(t,e),this.Hg=t,e}tM(){if(this.Fg.size===0)return null;let t=0;return this.Fg.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].js))})),t}Yg(t,e,s){const n=this.Qg();if(e!==-1)this.Fg.forEach(((r,o)=>{n.F_.set(o,{le:r,iM:o===t?s:void 0})})),this.Fg.has(t)||n.F_.set(t,{le:[],iM:s}),n.Et.sM=this.Hg,n.Et.nM=e;else{const r=this.Fg.get(t);n.F_.set(t,{le:r||[],iM:s})}return n}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function _s(i,t){i.js=t,i.Lg.forEach((e=>{e.js=t}))}function Yv(i,t){return i.wt<t}function Uv(i,t){return t<i.wt}function Kv(i,t,e){const s=t.Aa(),n=t.bi(),r=ci(i,s,Yv),o=Zc(i,n,Uv);if(!e)return{from:r,to:o};let a=r,h=o;return r>0&&r<i.length&&i[r].wt>=s&&(a=r-1),o>0&&o<i.length&&i[o-1].wt<=n&&(h=o+1),{from:a,to:h}}class po{constructor(t,e,s){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=t,this.re=e,this._M=s}kt(t){this.eM=!0,t==="data"&&(this.rM=!0),t==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map((t=>({...t,...this.ee.ga().gh(t.wt)})))}fM(){this.lM=null}uM(){const t=this.re.Et(),e=t.N().enableConflation?t.Hc():0;e!==this.oM&&(this.rM=!0,this.oM=e),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const t=this.ee.Ft(),e=this.re.Et();if(this.fM(),e.Gi()||t.Gi())return;const s=e.Ie();if(s===null||this.ee.qs().yh()===0)return;const n=this.ee.Lt();n!==null&&(this.lM=Kv(this.aM,s,this._M),this.mM(t,e,n.Wt),this.wM())}}class Xv{constructor(t,e){this.gM=t,this.Ki=e}nt(t,e,s){this.gM.draw(t,this.Ki,e,s)}}class Gv extends po{constructor(t,e,s){super(t,e,!1),this.$h=s,this.cM=new Xv(this.$h.renderer(),(n=>{const r=t.Lt();return r===null?null:t.Ft().Nt(n,r.Wt)}))}get ma(){return this.$h.conflationReducer}Oa(t){return this.$h.priceValueBuilder(t)}al(t){return this.$h.isWhitespace(t)}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>({wt:e.js,_t:NaN,...t.gh(e.js),MM:e.le})))}mM(t,e){e.mc(this.aM,Xi(this.lM))}wM(){this.$h.update({bars:this.aM.map(Jv),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function Jv(i){return{x:i._t,time:i.wt,originalData:i.MM,barColor:i.th}}const qv={color:"#2196f3"},Qv=(i,t,e)=>{const s=fe(e);return new Gv(i,t,s)};function mo(i){const t={value:i.Wt[3],time:i.Gr};return i.Ag!==void 0&&(t.customValues=i.Ag),t}function el(i){const t=mo(i);return i.R!==void 0&&(t.color=i.R),t}function Zv(i){const t=mo(i);return i.vt!==void 0&&(t.lineColor=i.vt),i.eh!==void 0&&(t.topColor=i.eh),i.rh!==void 0&&(t.bottomColor=i.rh),t}function tx(i){const t=mo(i);return i.hh!==void 0&&(t.topLineColor=i.hh),i.ah!==void 0&&(t.bottomLineColor=i.ah),i.oh!==void 0&&(t.topFillColor1=i.oh),i._h!==void 0&&(t.topFillColor2=i._h),i.uh!==void 0&&(t.bottomFillColor1=i.uh),i.dh!==void 0&&(t.bottomFillColor2=i.dh),t}function au(i){const t={open:i.Wt[0],high:i.Wt[1],low:i.Wt[2],close:i.Wt[3],time:i.Gr};return i.Ag!==void 0&&(t.customValues=i.Ag),t}function ex(i){const t=au(i);return i.R!==void 0&&(t.color=i.R),t}function ix(i){const t=au(i),{R:e,Ht:s,nh:n}=i;return e!==void 0&&(t.color=e),s!==void 0&&(t.borderColor=s),n!==void 0&&(t.wickColor=n),t}function Ns(i){return{Area:Zv,Line:el,Baseline:tx,Histogram:el,Bar:ex,Candlestick:ix,Custom:sx}[i]}function sx(i){const t=i.Gr;return{...i.le,time:t}}const nx={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},rx={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},ox={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Yc,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},rr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},ax={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function il(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:ox,crosshair:nx,grid:rx,overlayPriceScales:{...rr},leftPriceScale:{...rr,visible:!1},rightPriceScale:{...rr,visible:!0},timeScale:ax,localization:{locale:ui?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class hu{constructor(t,e,s){this.Yp=t,this.bM=e,this.SM=s??0}applyOptions(t){this.Yp.Qt().md(this.bM,t,this.SM)}options(){return this.Ki().N()}width(){return wn(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(t){this.setAutoScale(!1),this.Ki().$o(new St(t.from,t.to))}getVisibleRange(){let t,e,s=this.Ki().er();if(s===null)return null;if(this.Ki().io()){const n=this.Ki().m_(),r=nu(n);s=Qe(s,this.Ki().no()),t=Number((Math.round(s.Ze()/n)*n).toFixed(r)),e=Number((Math.round(s.Ge()/n)*n).toFixed(r))}else t=s.Ze(),e=s.Ge();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Ki(){return k(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class hx{constructor(t,e,s,n){this.Yp=t,this.yt=s,this.xM=e,this.CM=n}getHeight(){return this.yt.$t()}setHeight(t){const e=this.Yp.Qt(),s=e.Gd(this.yt);e.xd(s,t)}getStretchFactor(){return this.yt.E_()}setStretchFactor(t){this.yt.A_(t),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(t){const e=this.paneIndex();e!==t&&(pt(t>=0&&t<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(e,t))}getSeries(){return this.yt.F_().map((t=>this.xM(t)))??[]}getHTMLElement(){const t=this.Yp.Zp();return t&&t.length!==0&&t[this.paneIndex()]?t[this.paneIndex()].iv():null}attachPrimitive(t){this.yt.nl(t),t.attached&&t.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(t){this.yt.el(t)}priceScale(t){if(this.yt.V_(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new hu(this.Yp,t,this.paneIndex())}setPreserveEmptyPane(t){this.yt.O_(t)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(t,e={},s=0){return this.CM.addCustomSeries(t,e,s)}addSeries(t,e={}){return this.CM.addSeries(t,e,this.paneIndex())}}const lx={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class sl{constructor(t){this.hr=t}applyOptions(t){this.hr.cr(t)}options(){return this.hr.N()}yM(){return this.hr}}class cx{constructor(t,e,s,n,r,o){this.kM=new ot,this.ee=t,this.PM=e,this.TM=s,this.cu=r,this.CM=n,this.RM=o}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Nt(t,e.Wt)}coordinateToPrice(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Ds(t,e.Wt)}barsInLogicalRange(t){if(t===null)return null;const e=new ei(new Fi(t.from,t.to)).Ru(),s=this.ee.qs();if(s.Gi())return null;const n=s.$s(e.Aa(),1),r=s.$s(e.bi(),-1),o=k(s.kh()),a=k(s.sn());if(n!==null&&r!==null&&n.js>r.js)return{barsBefore:t.from-o,barsAfter:a-t.to};const h={barsBefore:n===null||n.js===o?t.from-o:n.js-o,barsAfter:r===null||r.js===a?a-t.to:a-r.js};return n!==null&&r!==null&&(h.from=n.Gr,h.to=r.Gr),h}setData(t){this.cu,this.ee.wh(),this.PM.DM(this.ee,t),this.IM("full")}update(t,e=!1){this.ee.wh(),this.PM.VM(this.ee,t,e),this.IM("update")}pop(t=1){const e=this.PM.BM(this.ee,t);e.length!==0&&this.IM("update");const s=Ns(this.seriesType());return e.map((n=>s(n)))}dataByIndex(t,e){const s=this.ee.qs().$s(t,e);return s===null?null:Ns(this.seriesType())(s)}data(){const t=Ns(this.seriesType());return this.ee.qs().Dh().map((e=>t(e)))}subscribeDataChanged(t){this.kM.i(t)}unsubscribeDataChanged(t){this.kM._(t)}applyOptions(t){this.ee.cr(t)}options(){return te(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(t){const e=Nt(te(lx),t),s=this.ee.Da(e);return new sl(s)}removePriceLine(t){this.ee.Ia(t.yM())}priceLines(){return this.ee.Va().map((t=>new sl(t)))}seriesType(){return this.ee.wh()}lastValueData(t){const e=this.ee.Ve(t);return e.Be?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.ee.nl(t),t.attached&&t.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(t){this.ee.el(t),t.detached&&t.detached(),this.ee.Qt().Ca()}getPane(){const t=this.ee,e=k(this.ee.Qt().Kn(t));return this.RM(e)}moveToPane(t){this.ee.Qt().jd(this.ee,t)}seriesOrder(){const t=this.ee.Qt().Kn(this.ee);return t===null?-1:t.F_().indexOf(this.ee)}setSeriesOrder(t){const e=this.ee.Qt().Kn(this.ee);e!==null&&e.su(this.ee,t)}IM(t){this.kM.v()&&this.kM.p(t)}}class ux{constructor(t,e,s){this.EM=new ot,this.Nu=new ot,this.xw=new ot,this.ns=t,this.Jh=t.Et(),this.tg=e,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=s}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(t,e){e?this.Jh.Bc(t,1e3):this.ns.Mn(t)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const t=this.Jh.lc();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.cu.convertHorzItemToInternal(t.from),to:this.cu.convertHorzItemToInternal(t.to)},s=this.Jh.cc(e);this.ns.$d(s)}getVisibleLogicalRange(){const t=this.Jh.ac();return t===null?null:{from:t.Aa(),to:t.bi()}}setVisibleLogicalRange(t){pt(t.from<=t.to,"The from index cannot be after the to index."),this.ns.$d(t)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(t){const e=this.ns.Et();return e.Gi()?null:e.qt(t)}coordinateToLogical(t){return this.Jh.Gi()?null:this.Jh.wc(t)}timeToIndex(t,e){const s=this.cu.convertHorzItemToInternal(t);return this.Jh.ec(s,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.Jh.qt(e)}coordinateToTime(t){const e=this.ns.Et(),s=e.wc(t),n=e.es(s);return n===null?null:n.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(t){this.EM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.EM._(t)}subscribeVisibleLogicalRangeChange(t){this.Nu.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.Nu._(t)}subscribeSizeChange(t){this.xw.i(t)}unsubscribeSizeChange(t){this.xw._(t)}applyOptions(t){this.Jh.cr(t)}options(){return{...te(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(t){this.xw.p(t.width,t.height)}}function nl(i){return(function(t){if(gs(t.handleScale)){const s=t.handleScale;t.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=t.handleScale;gs(s)&&(t.handleScale.axisPressedMouseMove={time:s,price:s}),gs(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;gs(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(i),i}class fx{constructor(t,e,s){this.OM=new Map,this.NM=new Map,this.FM=new ot,this.WM=new ot,this.HM=new ot,this.Xc=new WeakMap,this.UM=new $v(e);const n=s===void 0?te(il()):Nt(te(il()),nl(s));this.$M=e,this.Yp=new Fv(t,n,e),this.Yp.nw().i((o=>{this.FM.v()&&this.FM.p(this.qM(o()))}),this),this.Yp.ew().i((o=>{this.WM.v()&&this.WM.p(this.qM(o()))}),this),this.Yp.Md().i((o=>{this.HM.v()&&this.HM.p(this.qM(o()))}),this);const r=this.Yp.Qt();this.jM=new ux(r,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(t,e,s){this.autoSizeActive()||this.Yp.sg(t,e,s)}addCustomSeries(t,e={},s=0){const n=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...qv,...r.defaultOptions()},YM:Qv,KM:r}))(fe(t));return this.ZM(n,e,s)}addSeries(t,e={},s=0){return this.ZM(t,e,s)}removeSeries(t){const e=Lt(this.OM.get(t)),s=this.UM.Hd(e);this.Yp.Qt().Hd(e),this.GM(s),this.OM.delete(t),this.NM.delete(e)}DM(t,e){this.GM(this.UM.Ug(t,e))}VM(t,e,s){this.GM(this.UM.Zg(t,e,s))}BM(t,e){const[s,n]=this.UM.Jg(t,e);return s.length!==0&&this.GM(n),s}subscribeClick(t){this.FM.i(t)}unsubscribeClick(t){this.FM._(t)}subscribeCrosshairMove(t){this.HM.i(t)}unsubscribeCrosshairMove(t){this.HM._(t)}subscribeDblClick(t){this.WM.i(t)}unsubscribeDblClick(t){this.WM._(t)}priceScale(t,e=0){return new hu(this.Yp,t,e)}timeScale(){return this.jM}applyOptions(t){this.Yp.cr(nl(t))}options(){return this.Yp.N()}takeScreenshot(t=!1,e=!1){let s,n;try{e||(s=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),n=this.Yp.ug(t)}finally{e||s===void 0||this.Yp.Qt().cr({crosshair:{mode:s}})}return n}addPane(t=!1){const e=this.Yp.Qt().Xd();return e.O_(t),this.XM(e)}removePane(t){this.Yp.Qt().Sd(t)}swapPanes(t,e){this.Yp.Qt().Cd(t,e)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map((t=>this.XM(t)))}paneSize(t=0){const e=this.Yp.gg(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,s){const n=this.OM.get(s);if(n===void 0)return;const r=this.Yp.Qt().Kn(n);r!==null&&this.Yp.Qt().Ld(t,e,r)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(t,e={},s=0){pt(t.YM!==void 0),(function(h){if(h===void 0||h.type==="custom")return;const l=h;l.minMove!==void 0&&l.precision===void 0&&(l.precision=nu(l.minMove))})(e.priceFormat),t.type==="Candlestick"&&(function(h){h.borderColor!==void 0&&(h.borderUpColor=h.borderColor,h.borderDownColor=h.borderColor),h.wickColor!==void 0&&(h.wickUpColor=h.wickColor,h.wickDownColor=h.wickColor)})(e);const n=Nt(te(Hc),te(t.defaultOptions),e),r=t.YM,o=new yn(this.Yp.Qt(),t.type,n,r,t.KM);this.Yp.Qt().Fd(o,s);const a=new cx(o,this,this,this,this.$M,(h=>this.XM(h)));return this.OM.set(a,o),this.NM.set(o,a),a}GM(t){const e=this.Yp.Qt();e.Od(t.Et.vc,t.Et.sM,t.Et.nM),t.F_.forEach(((s,n)=>n.ht(s.le,s.iM))),e.Et().Ju(),e.Sc()}JM(t){return Lt(this.NM.get(t))}qM(t){const e=new Map;t.Vg.forEach(((n,r)=>{const o=r.wh(),a=Ns(o)(n);if(o!=="Custom")pt(zv(a));else{const h=r.hl();pt(!h||h(a)===!1)}e.set(this.JM(r),a)}));const s=t.Ig!==void 0&&this.NM.has(t.Ig)?this.JM(t.Ig):void 0;return{time:t.Gr,logical:t.js,point:t.Rg,paneIndex:t.Dg,hoveredSeries:s,hoveredObjectId:t.Bg,seriesData:e,sourceEvent:t.Eg}}XM(t){let e=this.Xc.get(t);return e||(e=new hx(this.Yp,(s=>this.JM(s)),t,this),this.Xc.set(t,e)),e}}function dx(i){if(Qi(i)){const t=document.getElementById(i);return pt(t!==null,`Cannot find element in DOM with id=${i}`),t}return i}function gx(i,t,e){const s=dx(i),n=new fx(s,t,e);return t.setOptions(n.options()),n}function px(i,t){return gx(i,new Vh,Vh.pf(t))}class mx extends po{constructor(t,e){super(t,e,!0)}mM(t,e,s){e.mc(this.aM,Xi(this.lM)),t.Yo(this.aM,s,Xi(this.lM))}QM(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>{let s;if((e.jr??1)>1){const n=e.Wt[1],r=e.Wt[2],o=e.Wt[3];s=Math.abs(n-o)>Math.abs(r-o)?n:r}else s=e.Wt[3];return this.tb(e.js,s,t)}))}}function bx(i,t,e,s,n,r,o){if(t.length===0||s.from>=t.length||s.to<=0)return;const{context:a,horizontalPixelRatio:h,verticalPixelRatio:l}=i,c=t[s.from];let u=r(i,c),f=c;if(s.to-s.from<2){const d=n/2;a.beginPath();const g={_t:c._t-d,ut:c.ut},p={_t:c._t+d,ut:c.ut};a.moveTo(g._t*h,g.ut*l),a.lineTo(p._t*h,p.ut*l),o(i,u,g,p)}else{const d=(p,m)=>{o(i,u,f,m),a.beginPath(),u=p,f=m};let g=f;a.beginPath(),a.moveTo(c._t*h,c.ut*l);for(let p=s.from+1;p<s.to;++p){g=t[p];const m=r(i,g);switch(e){case 0:a.lineTo(g._t*h,g.ut*l);break;case 1:a.lineTo(g._t*h,t[p-1].ut*l),m!==u&&(d(m,g),a.lineTo(g._t*h,t[p-1].ut*l)),a.lineTo(g._t*h,g.ut*l);break;case 2:{const[b,v]=vx(t,p-1,p);a.bezierCurveTo(b._t*h,b.ut*l,v._t*h,v.ut*l,g._t*h,g.ut*l);break}}e!==1&&m!==u&&(d(m,g),a.moveTo(g._t*h,g.ut*l))}(f!==g||f===g&&e===1)&&o(i,u,f,g)}}const rl=6;function or(i,t){return{_t:i._t-t._t,ut:i.ut-t.ut}}function ol(i,t){return{_t:i._t/t,ut:i.ut/t}}function vx(i,t,e){const s=Math.max(0,t-1),n=Math.min(i.length-1,e+1);var r,o;return[(r=i[t],o=ol(or(i[e],i[s]),rl),{_t:r._t+o._t,ut:r.ut+o.ut}),or(i[e],ol(or(i[n],i[t]),rl))]}function xx(i,t){const e=i.context;e.strokeStyle=t,e.stroke()}class wx extends $e{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:s,ib:n,sb:r,ct:o,Zt:a,nb:h}=this.rt;if(s===null)return;const l=t.context;l.lineCap="butt",l.lineWidth=o*t.verticalPixelRatio,Be(l,a),l.lineJoin="round";const c=this.eb.bind(this);r!==void 0&&bx(t,e,r,s,n,c,xx),h&&(function(u,f,d,g,p){if(g.to-g.from<=0)return;const{horizontalPixelRatio:m,verticalPixelRatio:b,context:v}=u;let x=null;const w=Math.max(1,Math.floor(m))%2/2,_=d*b+w;for(let S=g.to-1;S>=g.from;--S){const y=f[S];if(y){const C=p(u,y);C!==x&&(v.beginPath(),x!==null&&v.fill(),v.fillStyle=C,x=C);const E=Math.round(y._t*m)+w,L=y.ut*b;v.moveTo(E,L),v.arc(E,L,_,0,2*Math.PI)}}v.fill()})(t,e,h,s,c)}}class _x extends wx{eb(t,e){return e.vt}}class yx extends mx{constructor(){super(...arguments),this.cM=new _x}tb(t,e,s){return{...this.QM(t,e),...s.gh(t)}}wM(){const t=this.ee.N(),e={ot:this.aM,Zt:t.lineStyle,sb:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(e)}}const al={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(i,t)=>new yx(i,t)};class Mx extends po{constructor(t,e){super(t,e,!1)}mM(t,e,s){e.mc(this.aM,Xi(this.lM)),t.Zo(this.aM,s,Xi(this.lM))}Lb(t,e,s){return{wt:t,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>this.tb(e.js,e,t)))}}class Sx extends $e{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(t){this.jt=t}et(t){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:e}=t;this.Ib=(function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),h=Math.floor(r*a*o),l=Math.floor(r*o),c=Math.min(h,l);return Math.max(Math.floor(o),c)})(this.jt.ul,e),this.Ib>=2&&Math.floor(e)%2!=this.Ib%2&&this.Ib--;const s=this.jt.qs;this.jt.zb&&this.Ob(t,s,this.jt.lt),this.jt.Mi&&this.gm(t,s,this.jt.lt);const n=this.Nb(e);(!this.jt.Mi||this.Ib>2*n)&&this.Fb(t,s,this.jt.lt)}Ob(t,e,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let a="",h=Math.min(Math.floor(r),Math.floor(this.jt.ul*r));h=Math.max(Math.floor(r),Math.min(h,this.Ib));const l=Math.floor(.5*h);let c=null;for(let u=s.from;u<s.to;u++){const f=e[u];f.sh!==a&&(n.fillStyle=f.sh,a=f.sh);const d=Math.round(Math.min(f.Go,f.Qo)*o),g=Math.round(Math.max(f.Go,f.Qo)*o),p=Math.round(f.Xo*o),m=Math.round(f.Jo*o);let b=Math.round(r*f._t)-l;const v=b+h-1;c!==null&&(b=Math.max(c+1,b),b=Math.min(b,v));const x=v-b+1;n.fillRect(b,p,x,d-p),n.fillRect(b,g+1,x,m-g),c=v}}Nb(t){let e=Math.floor(1*t);this.Ib<=2*e&&(e=Math.floor(.5*(this.Ib-1)));const s=Math.max(Math.floor(t),e);return this.Ib<=2*s?Math.max(Math.floor(t),Math.floor(1*t)):s}gm(t,e,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let a="";const h=this.Nb(r);let l=null;for(let c=s.from;c<s.to;c++){const u=e[c];u.ih!==a&&(n.fillStyle=u.ih,a=u.ih);let f=Math.round(u._t*r)-Math.floor(.5*this.Ib);const d=f+this.Ib-1,g=Math.round(Math.min(u.Go,u.Qo)*o),p=Math.round(Math.max(u.Go,u.Qo)*o);if(l!==null&&(f=Math.max(l+1,f),f=Math.min(f,d)),this.jt.ul*r>2*h)S1(n,f,g,d-f+1,p-g+1,h);else{const m=d-f+1;n.fillRect(f,g,m,p-g+1)}l=d}}Fb(t,e,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let a="";const h=this.Nb(r);for(let l=s.from;l<s.to;l++){const c=e[l];let u=Math.round(Math.min(c.Go,c.Qo)*o),f=Math.round(Math.max(c.Go,c.Qo)*o),d=Math.round(c._t*r)-Math.floor(.5*this.Ib),g=d+this.Ib-1;if(c.th!==a){const p=c.th;n.fillStyle=p,a=p}this.jt.Mi&&(d+=h,u+=h,g-=h,f-=h),u>f||n.fillRect(d,u,g-d+1,f-u+1)}}}class Px extends Mx{constructor(){super(...arguments),this.cM=new Sx}tb(t,e,s){return{...this.Lb(t,e,s),...s.gh(t)}}wM(){const t=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:t.wickVisible,Mi:t.borderVisible,lt:this.lM})}}const Cx={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(i,t)=>new Px(i,t)};({...Hc});function Ar(){return{ma8Color:"#4FC1FF",ma288Color:"#e82ac2"}}function lu(i){return i.map(t=>({time:t.t/1e3,open:Number(t.o),high:Number(t.h),low:Number(t.l),close:Number(t.c)}))}function sn(i,t){const e=[];for(const s of Array.from({length:i.length},((n,r)=>r))){if(s<t-1)continue;let n=0;for(let r of Array.from({length:t},((o,a)=>a)))n+=i[s-r].close;e.push({time:i[s].time,value:Number.parseInt(""+n/t)})}return e}function Dr(i){return i?350:150}function cu(){const{width:i,paddingLeft:t,paddingRight:e}=Re;return i-t-e}function uu(i){if(i.length>0){const t=i.at(-1).close,e=i.find(({time:s})=>s===i.at(-1).time-Ur({days:1})/1e3)?.close;e&&(U.chg24Hour=(t-e)/e)}}function kx(i,t){const{ma8Color:e,ma288Color:s}=Ar(),n=sn(i.candleData,8),r=sn(i.candleData,288),o=n.at(-1)?.value??0,a=r.at(-1)?.value??0;t({ma8Price:o,ma288Price:a}),i.ma8Series=i.chart.addSeries(al,{color:e,lineWidth:1,lastValueVisible:!1,priceLineVisible:!1,crosshairMarkerVisible:!1}),i.ma288Series=i.chart.addSeries(al,{color:s,lineWidth:1,lastValueVisible:!1,priceLineVisible:!1,crosshairMarkerVisible:!1}),i.ma8Series.setData(n),i.ma288Series.setData(r),i.candlestickSeries=i.chart.addSeries(Cx),i.candlestickSeries.setData(i.candleData),i.chart.timeScale().applyOptions({tickMarkFormatter:h=>ri(h*1e3).slice(5,10)}),i.chart.applyOptions({localization:{timeFormatter:h=>ri(h*1e3).slice(0,16)}}),i.chart.applyOptions({localization:{priceFormatter:h=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(h)}})}async function Ex(i,t){try{const e=await Vl({type:"candleSnapshot",req:{coin:"BTC",interval:"15m",endTime:Bo(),startTime:Bo()-Ur({days:50})}});i.candleData=lu(e),U.price||(U.price=i.candleData.at(-1).close),uu(i.candleData),kx(i,t),U.isShowCandle=!0}catch{}}function fu(){return{darkTheme:{layout:{background:{color:"#1F262F"},textColor:"#d1d4dc"},grid:{vertLines:{color:"rgba(42, 46, 57, 0.6)"},horzLines:{color:"rgba(42, 46, 57, 0.6)"}}},lightTheme:{layout:{background:{color:"#F7F8F9"},textColor:"#191919"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.5)"},horzLines:{color:"rgba(197, 203, 206, 0.5)"}}}}}function Lx(i,t,e,s){i.chart=px(t,{width:cu(),height:Dr(e)});const{lightTheme:n,darkTheme:r}=fu();i.chart.applyOptions(s?n:r),i.chart.applyOptions({crosshair:{mode:Er.Normal}})}function Tx(i,t){const e=fr(U,"candle",()=>{if(!i.candleData)return;const r=lu([U.candle])[0];r.time>i.candleData.at(-1).time?i.candleData.push(r):i.candleData[i.candleData.length-1]=r,uu(i.candleData);const o=sn(i.candleData,8).at(-1),a=sn(i.candleData,288).at(-1);i.ma8Series.update(o),i.ma288Series.update(a),t({ma8Price:o?.value??0,ma288Price:a?.value??0}),i.candlestickSeries.update(i.candleData.at(-1))}),s=fr(U,"isLight",()=>{const{lightTheme:r,darkTheme:o}=fu();i.chart.applyOptions(U.isLight?r:o)});return()=>{e(),s()}}function Rx(i){return{container:st`
      height: ${i}px;
      position: relative;
    `,button:st`
      z-index: 2;
      position: absolute;
      top: 0;
      right: 70px;
    `,legend:st`
      z-index: 2;
      position: absolute;
      top: 0;
      left: 10px;
      font-size: 12px;
      display: flex;
      gap: 10px;
      user-select: none;
    `}}const Nx=I.memo(()=>{const[i,t]=I.useState({ma8Price:0,ma288Price:0}),[e,s]=I.useState(!1),n=I.useMemo(()=>({chart:null,candleData:null,ma8Series:null,ma288Series:null,candlestickSeries:null}),[]),r=We(U),o=ie(),a=Rx(Dr(e));return I.useEffect(()=>{const h=document.getElementById("chart");Lx(n,h,e,r.isLight),Ex(n,t);const l=Tx(n,t);return()=>l()},[]),I.useEffect(()=>{n.chart.applyOptions({width:cu(),height:Dr(e)})},[e]),M.jsxs("div",{className:it(o.container,o.fcc,a.container),children:[M.jsx("div",{style:{zIndex:1},id:"chart"}),M.jsx("div",{className:it(a.button),children:e?M.jsx(As,{onClick:()=>s(!e),style:{width:"30px",height:"30px",padding:"0"},children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:M.jsx("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8m7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0m-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0z"})})}):M.jsx(As,{onClick:()=>s(!e),style:{width:"30px",height:"30px",padding:"0"},children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:M.jsx("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})})})}),M.jsxs("div",{className:it(a.legend),children:[M.jsx("span",{style:{color:r.isLight?"#000000":"#FFFFFF"},children:"15m"}),M.jsx("span",{style:{color:Ar().ma8Color},children:"MA(8): "+Number(i.ma8Price).toLocaleString("en-US")}),M.jsx("span",{style:{color:Ar().ma288Color},children:"MA(288): "+Number(i.ma288Price).toLocaleString("en-US")})]})]})}),Ax=I.memo(()=>{const i=We(U);I.useEffect(()=>{i.price!==0&&i.chg24Hour!==0&&(U.isShowPrice=!0)},[i.price,i.chg24Hour]);const t=ie(),s=(()=>{const n=i.isLight?K.blackGray:K.whiteGray;let r=K.blackGray;return i.chg24Hour>0&&(r=K.green),i.chg24Hour<0&&(r=K.red),{container:st`
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        align-items: center;
        grid-row-gap: 10px;
        grid-column-gap: 10px;
      `,jsStart:st`
        justify-self: start;
      `,jsEnd:st`
        justify-self: end;
      `,titleFont:st`
        color: ${n};
        font-size: 11px;
      `,font1:st`
        color: ${i.isLight?K.black:K.white};
        font-size: 16px;
      `,font2:st`
        color: ${i.isLight?K.black:K.white};
        font-size: 16px;
      `,font3:st`
        color: ${K.white};
        font-size: 14px;
        background-color: ${r};
        border-radius: 4px;
        width: 65px;
        height: 28px;
      `}})();return M.jsxs("div",{style:{userSelect:"none"},className:it(t.container,s.container),children:[M.jsx("div",{className:it(s.jsStart,s.titleFont),children:"Name"}),M.jsx("div",{className:it(s.jsEnd,s.titleFont),children:"Last Price"}),M.jsx("div",{className:it(s.jsEnd,s.titleFont),children:"24h chg%"}),M.jsx("div",{className:it(s.jsStart,s.font1),children:"BTCUSD"}),M.jsx("div",{className:it(s.jsEnd,s.font2),children:Te(i.price).format("0,0.0")}),M.jsx("div",{className:it(s.jsEnd,s.font3,t.fcc),children:M.jsx("div",{children:Te(i.chg24Hour).format("0.00%")})})]})});function Dx(){const i=new WebSocket(Wt.WsUrl);i.onopen=()=>{i.send(JSON.stringify({method:"subscribe",subscription:{type:"allMids"}})),i.send(JSON.stringify({method:"subscribe",subscription:{type:"candle",coin:"BTC",interval:"15m"}})),i.send(JSON.stringify({method:"subscribe",subscription:{type:"webData2",user:Wt.AccountAddress}}))},i.onmessage=t=>{try{const e=JSON.parse(t.data);if(e.channel==="allMids"){const s=Number.parseFloat(e?.data?.mids?.BTC);Number.isNaN(s)||(U.price=s,document.title=Te(U.price).format("0,0.0"))}if(e.channel==="candle"&&e?.data&&(U.candle=e?.data),e.channel==="webData2"){const n=(e.data.clearinghouseState?.assetPositions??[]).find(r=>r.position?.coin==="BTC");if(n.position){let{szi:r,entryPx:o,positionValue:a,unrealizedPnl:h}=n.position;r.at(0)==="-"&&(a="-"+a),U.position={entryPrice:Te(o).format("0,0.0"),positionValue:Te(a).format("0,0.0000"),unrealizedPnl:Te(h).format("0,0.0000")}}}}catch{}}}function Ox(){const i=window.matchMedia("(prefers-color-scheme: light)");U.isLight=i.matches,i.onchange=({matches:t})=>U.isLight=t}const Fx=I.memo(()=>M.jsxs(M.Fragment,{children:[M.jsx("div",{style:{height:"10px"}}),M.jsx(a1,{}),M.jsx("div",{style:{height:"10px"}}),M.jsx(Ax,{}),M.jsx("div",{style:{height:"10px"}}),M.jsx(r1,{}),M.jsx("div",{style:{height:"10px"}}),M.jsx(Nx,{}),M.jsx("div",{style:{height:"10px"}}),M.jsx(Gb,{}),M.jsx("div",{style:{height:"10px"}}),M.jsx(s1,{}),M.jsx("div",{style:{height:"300px"}})]})),Ix=I.memo(()=>{const i=We(U),t=ie(),e=I.useMemo(()=>!(i.isShowCandle&&i.isShowPrice&&i.isShowHistory&&i.isShowFills),[i.isShowCandle,i.isShowPrice,i.isShowHistory,i.isShowFills]),n={loading:st`
        position: fixed;
        z-index: 3;
        width: 100%;
        height: 100%;
        left: 0;
        top: 0;
        background-color: ${(i.isLight?K.white:K.black).slice(0,-2)+"CC"};
        backdrop-filter: blur(5px);
        overscroll-behavior: contain;
      `};return M.jsxs(M.Fragment,{children:[e?M.jsx("div",{className:it(n.loading,t.fcc),children:M.jsx(o1,{width:30,border:3})}):M.jsx(M.Fragment,{}),M.jsx("div",{children:M.jsx(Fx,{})})]})}),zx=I.memo(()=>{const i=We(U);I.useEffect(()=>{Ox(),Dx()},[]);const t=ie();return M.jsx(vu,{wave:{disabled:!0},theme:{algorithm:i.isLight?bo.defaultAlgorithm:bo.darkAlgorithm,components:{Tooltip:{colorBgSpotlight:i.isLight?K.white:K.blackGray,colorTextLightSolid:i.isLight?K.blackGray:K.white},Table:{cellPaddingBlockSM:0,headerBorderRadius:0}}},children:M.jsx("div",{className:t.fColumnCenter,children:M.jsx(Ix,{})})})});ll.locale("zh-cn");xu.createRoot(document.getElementById("root")).render(M.jsx(zx,{}));
